{"version":3,"sources":["webpack:///./node_modules/@atlaskit/media-ui/dist/esm/media-type-icon.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/handle-focus.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/components/focus-manager.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/classNames.js","webpack:///./node_modules/@atlaskit/icon/glyph/lock-filled.js","webpack:///./node_modules/@atlaskit/ds-lib/dist/esm/hooks/use-controlled.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/mime-type-icon.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/image/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/audio/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/video/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/document/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/archive/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/generic/24.js","webpack:///./node_modules/@atlaskit/icon/glyph/more.js","webpack:///./node_modules/@atlaskit/icon/glyph/check.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/MediaButton.js","webpack:///./node_modules/@atlaskit/icon/glyph/vid-hd-circle.js","webpack:///./node_modules/bytes/index.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/formatDate.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/types.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/parseJPEG.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/parsePNG.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/parsePNGXMP.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/metatags.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/index.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/shortcut.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/humanReadableSize.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/dropdown-menu-item-group.js","webpack:///./node_modules/@atlaskit/icon/glyph/image.js","webpack:///./node_modules/@atlaskit/icon/glyph/audio.js","webpack:///./node_modules/@atlaskit/icon/glyph/media-services/video.js","webpack:///./node_modules/@atlaskit/icon/glyph/document.js","webpack:///./node_modules/@atlaskit/icon/glyph/page.js","webpack:///./node_modules/@atlaskit/icon/glyph/media-services/zip.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/components/menu-wrapper.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/is-checkbox-item.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/is-radio-item.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/context/selection-store.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/use-generated-id.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/dropdown-menu.js","webpack:///./node_modules/@atlaskit/ds-lib/dist/esm/hooks/use-focus-event.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/inactivityDetector/styled.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/inactivityDetector/inactivityDetector.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/hooks/use-register-item-with-focus-manager.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/dropdown-menu-item.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/mediaImage/styled.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/mediaImage/index.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/ellipsify.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/mediaTypeIcon/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/mediaTypeIcon/iconWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/mediaTypeIcon/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/fileIcon/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/fileIcon/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/errorIcon/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/errorIcon/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/styles/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/cardActionButton.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/cardActionIconButton.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/errors.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/analytics.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/cardActionsDropdownMenu.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/preventClickThrough.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/cardActionsView.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/cardOverlay/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/styles/mixins.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/styles/config.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/styles/easing.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/cardOverlay/cardOverlayComponents.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/cardOverlay/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/progressBar/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/shouldDisplayImageThumbnail.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/progressBar/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/cardImageViewWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/isValidPercentageUnit.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/getElementDimension.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/actions.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/tickBox/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/playButton/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/getErrorMessage.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/common.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/imageRenderer/imageRenderer.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/truncateText.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/resizeModeToMediaImageProps.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/progressBar/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/titleBoxComponents.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/titleBox.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/failedTitleBox.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/progressBar/styledBar.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/blanket/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/progressBar/progressBar.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/playButton/playButtonWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/playButton/playButtonBackground.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/playButton/playButton.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/tickBox/tickBoxWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/tickBox/tickBox.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/blanket/blanket.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/actionsBar/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/actionsBar/actionsBarWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/actionsBar/actionsBar.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconWrapper/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconWrapper/iconWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconMessage/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconMessage/iconMessageWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/newFileExperience/styles.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconMessage/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/newFileExperience/newFileExperienceWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/cardViewWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/cardView.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/viewportDetector.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/containsPixelUnit.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/getDataURIDimension.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/isRetina.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/objectURLCache.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/cache.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/videoSnapshot.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/helpers.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/dimensionComparer.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/filePreviewStatus.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/metadata.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/inlinePlayerWrapper.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/inlinePlayer.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/cardAnalytics.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/document.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/printScript.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/globalScope/globalScope.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/cardState.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/types.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/getMediaCardCursor.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/ufoExperiences.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/generateUniqueId.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardStatus.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/globalScope/getSSRData.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/video/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/archive/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/image/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/audio/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/document/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/generic/16.js"],"names":["_templateObject","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","IconWrapper","div","_ref","size","displayName","largeIcons","image","audio","video","doc","archive","unknown","smallIcons","MediaTypeIcon","_React$Component","_super","key","value","_this$props","props","type","testId","icons","Icon","createElement","label","Component","_actionMap","actionMap","FocusManagerContext","menuItemRefs","registerRef","children","ref","current","includes","push","window","listener","refs","currentFocusedIdx","findIndex","el","_document$activeEleme","document","activeElement","isSameNode","length","preventDefault","focus","contextValue","Provider","hideControlsClassName","Object","defineProperty","exports","default","obj","_react","__esModule","_base","LockFilledIcon","assign","dangerouslySetGlyph","_default","useControlled","propValue","getDefaultPropValue","undefined","isControlled","_useState","_useState2","valueState","setValue","isControlledRef","setValueIfUncontrolled","newValue","MimeTypeIcon","_ref$mediaType","mediaType","_ref$mimeType","mimeType","_ref$name","name","_ref$size","iconInfo","icon","Image24Icon","Audio24Icon","Video24Icon","Document24Icon","Archive24Icon","Generic24Icon","MoreIcon","CheckIcon","_excluded","_excluded2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","i","source","forEach","getOwnPropertyDescriptors","defineProperties","buttonTheme","background","light","hover","active","boxShadowColor","color","disabled","primary","extract","newTheme","appearance","state","mode","root","reduce","acc","val","node","item","MediaButton","_ref2","_ref2$appearance","buttonRef","rest","theme","currentTheme","themeProps","_currentTheme","buttonStyles","VidHdCircleIcon","module","options","parse","format","formatThousandsRegExp","formatDecimalsRegExp","map","b","kb","mb","gb","tb","Math","pow","pb","parseRegExp","Number","isFinite","mag","abs","thousandsSeparator","unitSeparator","decimalPlaces","fixedDecimals","unit","toLowerCase","str","toFixed","replace","split","s","join","isNaN","floatValue","results","exec","parseFloat","parseInt","floor","formatterOptions","day","month","year","hour","minute","hour12","partsFormatter","_ref$dayPeriod","dayPeriod","formattedDayPeriod","concat","formatDate","timestamp","locale","l10n","formatToParts","ImageType","SupportedImageMetaTag","loadImage","ExifOrientation","XResolution","YResolution","readJPEGExifMetaData","file","Promise","mark","_callee","resolve","reject","wrap","_context","prev","next","sent","parseMetaData","data","tags","exif","getAll","numerator","stop","_x","_x2","pngChunksExtract","readPNGXMPMetaData","_readPNGXMPMetaData","buffer","chunks","parsePNGChunks","abrupt","_parsePNGChunks","_callee2","iTXt","pHYs","chunk","dv","PixelPerUnitX","PixelPerUnitY","_context2","String","fromCharCode","Array","from","DataView","getUint8","getUint32","parseXMPMetaData","xmpMetaData","metadata","match","tag","readImageMetaTags","_readImageMetaTags","_yield$readPNGXMPMeta","PNG","JPEG","t0","Orientation","getImageInfo","_getImageInfo","fileInfo","width","height","scaleFactor","readImageMetaData","getScaleFactor","scaleFactorFromFilename","trim","getScaleFactorFromFile","round","getMetaTagNumericValue","tagValue","numericValue","getOrientation","_getOrientation","defaultValue","num","_x3","_readImageMetaData","_callee3","src","orientation","isImageRotated","img","_readImageNaturalOrie","_width","_height","_context3","PixelXDimension","naturalWidth","naturalHeight","keyCodes","space","m","rightArrow","leftArrow","Shortcut","_Component","_this","_len","args","_key","handler","code","keyCode","addEventListener","keyHandler","removeEventListener","init","release","toHumanReadableMediaSize","parsedSize","toUpperCase","ImageIcon","AudioIcon","MediaServicesVideoIcon","DocumentIcon","PageIcon","MediaServicesZipIcon","onClose","setInitialFocusRef","role","onClick","some","menuItem","isCheckboxOrRadio","getAttribute","element","contains","SelectionStoreContext","setItemState","noop","getItemState","setGroupState","getGroupState","store","context","group","id","useGeneratedId","random","toString","substr","gridSize","spinnerContainerStyles","display","minWidth","padding","justifyContent","MAX_HEIGHT","fallbackPlacements","_props$defaultOpen","defaultOpen","isOpen","_props$onOpenChange","onOpenChange","_props$placement","placement","_trigger","trigger","_props$shouldFlip","shouldFlip","_props$isLoading","isLoading","_props$autoFocus","autoFocus","_props$statusLabel","statusLabel","_props$zIndex","zIndex","modal","_useControlledState","_useControlledState2","isLocalOpen","setLocalIsOpen","isTriggeredUsingKeyboard","setTriggeredUsingKeyboard","handleTriggerClicked","event","clientX","clientY","handleOnClose","_useFocus","isFocused","setIsFocused","bindFocus","onFocus","onBlur","useFocus","shouldUseCaptureOnOutsideClick","triggerProps","providedProps","triggerRef","isSelected","iconAfter","content","maxHeight","maxWidth","css","InactivityDetectorWrapper","controlsAreVisible","InactivityDetector","createRef","checkActivityTimeout","clearTimeout","contentWrapperElement","setState","setTimeout","hideControls","checkMouseMovement","_this2","onMouseMove","onMouseOut","itemRef","component","elemBefore","elemAfter","_props$shouldTitleWra","shouldTitleWrap","_props$shouldDescript","shouldDescriptionWrap","iconBefore","href","imgStyle","position","left","top","objectFit","imageOrientation","style","imageRef","otherProps","MediaImage","onImageLoad","isImageLoaded","imgWidth","imgHeight","currentTarget","parentWidth","Infinity","parentHeight","parent","findDOMNode","parentElement","_parent$getBoundingCl","getBoundingClientRect","crop","stretch","dataURI","previewOrientation","crossOrigin","onImageError","_this$props$alt","alt","loading","forceSyncDisplay","_this$state","parentRatio","imgRatio","percentSize","isCoverStrategy","isFitStrategy","ceil","isImageMoreLandscapyThanContainer","showImage","transform","draggable","onLoad","onError","inline","text","lines","endLength","setEllipsis","className","maximumLines","textContent","lineHeight","lineCount","maximumHeight","beginningText","endText","adjustedBeginningText","delayRun","exenv","requestAnimationFrame","fn","typeToColorMap","_this$props$size","fileTypeIconStyles","FileIcon","iconUrl","defaultIcon","errorIconWrapperStyles","ErrorIcon","CardActionIconButtonVariant","variant","onMouseDown","CardActionIconButton","triggerColor","_Error","MediaCardError","primaryReason","secondaryError","setPrototypeOf","Error","captureStackTrace","_MediaCardError","LocalPreviewError","_super2","_MediaCardError2","RemotePreviewError","_super3","_this3","_MediaCardError3","SsrPreviewError","_super4","_this4","_MediaCardError4","ImageLoadError","_super5","getImageLoadPrimaryReason","isMediaCardError","err","isUnsupportedLocalPreviewError","isUploadError","error","relevantFlags","newCardExperience","captions","timestampOnVideo","observedWidth","mediaInline","folderUploads","mediaUploadApiV2","LOGGED_FEATURE_FLAGS","LOGGED_FEATURE_FLAG_KEYS","mediaClientReason","message","extractErrorInfo","failReason","errorDetail","fireMediaCardEvent","payload","createAnalyticsEvent","fire","createAndFireEvent","CardActionButtonWithAnalytics","withAnalyticsEvents","eventType","action","actionSubject","actionSubjectId","attributes","index","DropdownItemWithAnalytics","CardActionsDropdownMenu","actions","triggerVariant","PreventClickThrough","stopPropagation","CardActionsView","primaryAction","find","actionWithIcon","otherActions","actionNotEqualTo","renderActionIconButton","renderOtherActionButtons","isPrimary","CardActionIconButtonWithAnalytics","_this$props2","onToggle","firstActionWithIcon","otherAction","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","propertyName","rgba","hex","opacity","hexToRgb","tickBoxStyles","hasError","noHover","getOverlayStyles","colors","errorLineStyles","leftColumnStyles","topRowStyles","bottomRowStyles","rightColumnStyles","errorMessageStyles","altWrapperStyles","themed","dark","subtitleStyles","metadataStyles","CardOverlay","attrs","isMenuExpanded","get","selectable","selected","persistent","cardStatus","mediaName","titleText","resolveTitleText","menuTriggerColor","wrapperClassNames","errorLine","tickBox","bottomLeftColumn","onMenuToggle","_this$props3","Fragment","_this$props4","tick","_this$props5","subtitle","classNames","fileIcon","subtitleEl","disableOverlay","getSelectedBorderStyle","playIconWrapperStyles","playIconBackgroundStyles","progressBarWrapperStyles","titleStyles","bodyStyles","progressWrapperStyles","cardActionsWrapperStyles","mediaItemType","ProgressBar","progress","min","max","progressBarStyle","status","FileCardImageView","fileSize","renderErrorContents","renderFailedContents","isZeroSize","isFileCardImageReadyForDisplay","renderSuccessCardContents","renderLoadingContents","isPersistent","_this$props6","cardPreview","_this$props7","_this$props8","onDisplayImage","wasThumbnailDisplayed","isCropped","isStretched","_this$props9","_this$props10","overlay","renderUploadingCardOverlay","renderSuccessCardOverlay","renderMediaImage","renderProgressBar","renderPlayButton","_this$props11","_this$props12","renderCardContents","_this$props13","resizeMode","isValidPercentageUnit","valueString","slice","getElementDimension","dimension","dimensionValue","attachDetailsToActions","details","messages","failed_to_load","tickboxFixedStyles","_responsiveSettings","Breakpoint","fixedPlayButtonStyles","playButtonWrapperStyles","backgroundStyles","responsiveSettings","SMALL","fontSize","titleBox","verticalPadding","horizontalPadding","LARGE","getTitleBoxHeight","breakpoint","breakpointSizes","wrapperWidth","_ref3","_ref4","limit","cardImageContainerStyles","nativeLazyLoad","resizeModeToMediaImageProps","truncateCommonStyles","TruncateLeft","span","fontSizePX","endFixedChars","fontFaceScaleFactor","startFixedChars","TruncateRight","_ref4$fontSizePX","_ref4$startFixedChars","_ref4$endFixedChars","_calculateTruncation","minAllowedLength","right","splitAt","calculateTruncation","leftStr","rightStr","HEX_REGEX","titleBoxBgColor","test","setting","infoStyles","hasIconOverlap","titleBoxIconStyles","errorMessageWrapperStyles","FormattedDate","injectIntl","_ref2$locale","intl","createdAt","titleBoxIcon","_ref$customMessage","customMessage","primaryColor","smallSizeSettings","marginBottom","largeSizeSettings","positionBottom","showOnTop","multiplier","marginPositionBottom","getNormalizedProgress","_ref$breakpoint","_ref$positionBottom","_ref$showOnTop","fixedBlanketStyles","isFixed","ActionsBar","filled","hasTitleBox","titleBoxHeight","breatheAnimation","animatedStyles","animated","reducedFont","messageDescriptor","_ref$animated","_ref$reducedFont","disableAnimation","creating_preview","preview_unavailable","failed_to_upload","preview_currently_unavailable","cursor","dimensions","displayBackground","isPlayButtonClickable","isTickBoxSelectable","shouldDisplayTooltip","mediaCardCursor","_ref5","_getDefaultCardDimens","defaultWidth","defaultHeight","getCSSUnitValue","withOverlayShadow","shadow","onMouseEnter","innerRef","shouldUsePointerCursor","breakpointSize","CardViewBase","didImageRender","prevCardPreview","divRef","elementWidth","shouldDisplayBackground","shouldRenderPlayButton","Tooltip","renderNewExperienceCard","actionsWithDetails","errorMessage","defaultConfig","renderTypeIcon","renderImageRenderer","renderBlanket","renderTitleBox","renderTickBox","isFixedBlanket","iconMessage","customTitleMessage","baseErrorConfig","renderFailedTitleBox","renderSpinner","_this$getRenderConfig","getRenderConfigByStatus","renderMediaTypeIcon","renderActionsBar","saveElementWidth","_ref7","featureFlags","renderFileNewExperience","wrapperDimensions","renderFile","_ref10","_this$props9$metadata","_this$props9$metadata2","_ref11","CardView","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","isArray","minLen","_arrayLikeToArray","n","_unsupportedIterableToArray","F","done","_e","f","TypeError","normalCompletion","didErr","step","_e2","return","arr","len","arr2","ViewportAnchor","IntersectionObserver","offsetTop","pointerEvents","onVisible","cardEl","preAnchorRef","postAnchorRef","intersectionObserver","entries","observer","_step","_iterator","isIntersecting","disconnect","createIntersectionObserverCallback","observe","containsPixelUnit","retinaFactor","devicePixelRatio","matchMedia","matches","_LRUCache","ExtendedLRUCache","eventEmitter","entry","emit","callback","on","ObjectURLCache","cache","URL","revokeObjectURL","set","removed","remove","getCacheKey","CardPreviewCacheImpl","previewCache","cacheKey","takeSnapshot","blob","snapshooter","dataUri","end","getImageLocalPreview","createObjectURL","getVideoLocalPreview","getCardPreviewFromFilePreview","filePreview","resolvedFilePreview","Blob","t1","getCardPreviewFromBackend","_callee4","mediaClient","params","_context4","getImage","_x4","_x5","_x6","bothPixelEquivalent","bothPercentage","isBigger","nextIsHigher","nextIsWider","fileState","isBannedLocalPreview","hasFilesize","isPreviewable","hasLocalPreview","isSupportedLocalPreview","isMimeTypeSupportedByBrowser","hasRemotePreview","hasPreview","isSupportedByBrowser","getCardPreviewFromCache","removeCardPreviewFromCache","preview","mediaBlobUrlAttrs","getCardPreview","_ref$dimensions","onLocalPreviewError","isRemotePreviewReady","imageUrlParams","cachedPreview","dimensionsAreBigger","localPreview","fetchAndCacheRemotePreview","isSSRServerPreview","isSSRClientPreview","isSSRDataPreview","remotePreview","getProcessingStatusFromFileState","identifier","processingStatus","getPreferredVideoArtifact","artifacts","InlinePlayerBase","fileSrc","collectionName","getFileBinaryURL","setFileSrc","subscription","unsubscribe","downloadBinary","globalMediaEventEmitter","fileId","viewingLevel","_next","revoke","getFileState","subscribe","_yield$fileState$prev","artifactName","_fileSrc","isUploading","indexOf","setBinaryURL","getArtifactURL","originalDimensions","forwardRef","autoplay","onFullscreenChange","isAutoPlay","isHDAvailable","onDownloadClick","onFirstPlay","lastWatchTimeConfig","contentId","showControls","poster","InlinePlayer","fileAttributes","performanceAttributes","ssrReliability","fireEvent","getRenderSucceededEventPayload","getRenderFailedFileStatusPayload","request","getRenderErrorEventPayload","printParams","arg","param","JSON","stringify","getMediaGlobalScope","globalScope","namespace","getMediaCardSSR","globalMedia","dashed","getKey","occurrenceKey","storeDataURI","mediaCardSsr","statements","functionCall","printFunctionCall","dangerouslySetInnerHTML","__html","MediaCardCursor","concurrentExperience","inlineExperience","platform","Experience","performanceType","InlineResult","getInstance","properties","success","packageName","packageVersion","mediaEnvironment","mediaRegion","failure","CardBase","performance","now","wasStatusUploading","wasStatusProcessing","server","client","collection","imageResizeModeToFileImageMode","requestedDimensions","allowAnimated","contextId","_getFileDetails","_this$props2$dimensio","fireLocalPreviewErrorEvent","getImageURLParams","getMediaBlobUrlAttrs","_this$props3$dimensio","catch","_this$props4$dimensio","safeSetState","wrappedError","getCardPreviewParams","timeElapsedTillCommenced","timeElapsedTillEvent","overall","durationSincePageStart","durationSinceCommenced","failedSSRObject","logSSRImageError","currentPreview","isLocal","isSSR","updateState","fileImageMode","previewDidRender","cardRef","getSelection","_selection$containsNo","selection","containsNode","getCopiedFilePayload","fileMediatype","getRenderPreviewableCardPayload","hasBeenMounted","updater","newState","prevState","analyticsEvent","useInlinePlayer","shouldOpenMediaViewer","isVideo","isPlayingFile","shouldAutoplay","mediaViewerSelectedItem","onInlinePlayerError","setRef","payloadPart","isUserCollection","mediaViewerDataSource","dataSource","list","createPortal","mediaClientConfig","config","selectedItem","onMediaViewerClose","body","isLazy","ssr","_this$state2","isCardVisible","_assertThisInitialize4","onCardViewClick","useMediaViewer","isErrorStatus","hasCardPreview","NotReady","Action","card","viewportPreAnchorRef","viewportPostAnchorRef","onCardInViewport","_this$ssrReliability$","_this$state$cardPrevi","mediaItemDetails","_cardPreview","_status","_identifier","_resizeMode","_ssr","_mediaClient","_this$ssrData","_this$ssrData2","ssrData","rawDataURI","getImageUrlSync","fireCommencedEvent","_isCardVisible","_error","_this$ssrData3","_this$state3","updateStateForIdentifier","setCacheSSRPreview","refetchSSRPreview","fireCopiedEvent","prevProps","prevMediaClient","prevIdentifier","prevIsCardVisible","_this$state4","isDifferent","turnedVisible","isNewMediaClient","updateFileStateFlag","fireOperationalEvent","fireScreenEvent","statusIsPreviewable","isPreviewableStatus","resolvePreview","videoAvailableToPlay","subscribeInternalFile","fileStateFlags","fileStatus","getCardStatus","errorReason","_this$state5","_this$state6","_this$state6$fileStat","fileMimetype","_this$state7","getPerformanceAttributes","internalOccurrenceKey","getRenderCommencedEventPayload","start","_this$props14","_this$props14$actions","shouldEnableDownloadButton","_this$state8","innerContent","renderInlinePlayer","renderCard","renderMediaViewer","storeSSRData","Card","withMediaAnalyticsContext","componentName","filterFeatureFlags","enforceContext","Video16Icon","Archive16Icon","Image16Icon","Audio16Icon","Document16Icon","Generic16Icon"],"mappings":"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","file":"@atlaskit-internal_media-card.bundle.js","sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport styled from '@emotion/styled';\nimport ImageIcon from '@atlaskit/icon-file-type/glyph/image/24';\nimport AudioIcon from '@atlaskit/icon-file-type/glyph/audio/24';\nimport VideoIcon from '@atlaskit/icon-file-type/glyph/video/24';\nimport DocIcon from '@atlaskit/icon-file-type/glyph/document/24';\nimport ArchiveIcon from '@atlaskit/icon-file-type/glyph/archive/24';\nimport GenericIcon from '@atlaskit/icon-file-type/glyph/generic/24';\nimport ImageIconSmall from '@atlaskit/icon-file-type/glyph/image/16';\nimport AudioIconSmall from '@atlaskit/icon-file-type/glyph/audio/16';\nimport VideoIconSmall from '@atlaskit/icon-file-type/glyph/video/16';\nimport DocIconSmall from '@atlaskit/icon-file-type/glyph/document/16';\nimport ArchiveIconSmall from '@atlaskit/icon-file-type/glyph/archive/16';\nimport GenericIconSmall from '@atlaskit/icon-file-type/glyph/generic/16';\nexport var IconWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  \", \"\\n\"])), function (_ref) {\n  var size = _ref.size;\n  return size === 'large' ? \"padding: 4px;\" : '';\n});\nIconWrapper.displayName = 'IconWrapper';\nvar largeIcons = {\n  image: ImageIcon,\n  audio: AudioIcon,\n  video: VideoIcon,\n  doc: DocIcon,\n  archive: ArchiveIcon,\n  unknown: GenericIcon\n};\nvar smallIcons = {\n  image: ImageIconSmall,\n  audio: AudioIconSmall,\n  video: VideoIconSmall,\n  doc: DocIconSmall,\n  archive: ArchiveIconSmall,\n  unknown: GenericIconSmall\n};\nvar defaultType = 'unknown';\nexport var MediaTypeIcon = /*#__PURE__*/function (_React$Component) {\n  _inherits(MediaTypeIcon, _React$Component);\n\n  var _super = _createSuper(MediaTypeIcon);\n\n  function MediaTypeIcon() {\n    _classCallCheck(this, MediaTypeIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MediaTypeIcon, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          type = _this$props.type,\n          size = _this$props.size,\n          testId = _this$props.testId;\n      var typeWithDefault = type || defaultType;\n      var icons = size === 'large' ? largeIcons : smallIcons;\n      var Icon = icons[typeWithDefault] || icons[defaultType];\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        \"data-testid\": testId,\n        \"data-type\": type,\n        size: size\n      }, /*#__PURE__*/React.createElement(Icon, {\n        label: \"media-type\"\n      }));\n    }\n  }]);\n\n  return MediaTypeIcon;\n}(React.Component);\n\n_defineProperty(MediaTypeIcon, \"defaultProps\", {\n  type: defaultType,\n  testId: 'file-type-icon',\n  size: 'large'\n});","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _actionMap;\n\nimport { KEY_DOWN, KEY_END, KEY_HOME, KEY_UP } from '@atlaskit/ds-lib/keycodes';\nvar actionMap = (_actionMap = {}, _defineProperty(_actionMap, KEY_DOWN, 'next'), _defineProperty(_actionMap, KEY_UP, 'prev'), _defineProperty(_actionMap, KEY_HOME, 'first'), _defineProperty(_actionMap, KEY_END, 'last'), _actionMap);\nexport default function handleFocus(refs) {\n  return function (e) {\n    var currentFocusedIdx = refs.findIndex(function (el) {\n      var _document$activeEleme;\n\n      return (_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.isSameNode(el);\n    });\n    var action = actionMap[e.key];\n\n    switch (action) {\n      case 'next':\n        if (currentFocusedIdx < refs.length - 1) {\n          e.preventDefault();\n          refs[currentFocusedIdx + 1].focus();\n        }\n\n        break;\n\n      case 'prev':\n        if (currentFocusedIdx > 0) {\n          e.preventDefault();\n          refs[currentFocusedIdx - 1].focus();\n        }\n\n        break;\n\n      case 'first':\n        e.preventDefault();\n        refs[0].focus();\n        break;\n\n      case 'last':\n        e.preventDefault();\n        refs[refs.length - 1].focus();\n        break;\n\n      default:\n        return;\n    }\n  };\n}","import React, { createContext, useCallback, useEffect, useRef } from 'react';\nimport { bind } from 'bind-event-listener';\nimport __noop from '@atlaskit/ds-lib/noop';\nimport handleFocus from '../utils/handle-focus';\n/**\n *\n *\n * Context provider which maintains the list of focusable elements and a method to\n * register new menu items.\n * This list drives the keyboard navgation of the menu.\n *\n */\n\nexport var FocusManagerContext = /*#__PURE__*/createContext({\n  menuItemRefs: [],\n  registerRef: __noop\n});\n/**\n * Focus manager logic\n */\n\nvar FocusManager = function FocusManager(_ref) {\n  var children = _ref.children;\n  var menuItemRefs = useRef([]);\n  var registerRef = useCallback(function (ref) {\n    if (ref && !menuItemRefs.current.includes(ref)) {\n      menuItemRefs.current.push(ref);\n    }\n  }, []); // Intentionally rebinding on each render\n\n  useEffect(function () {\n    return bind(window, {\n      type: 'keydown',\n      listener: handleFocus(menuItemRefs.current)\n    });\n  });\n  var contextValue = {\n    menuItemRefs: menuItemRefs.current,\n    registerRef: registerRef\n  };\n  return /*#__PURE__*/React.createElement(FocusManagerContext.Provider, {\n    value: contextValue\n  }, children);\n};\n\nexport default FocusManager;","export var hideControlsClassName = 'mvng-hide-controls';","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst LockFilledIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z\"/></svg>`\n}, props));\n\nLockFilledIcon.displayName = 'LockFilledIcon';\nvar _default = LockFilledIcon;\nexports.default = _default;","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\n/**\n * Handle controlled & uncontrolled component state\n *\n * ```js\n *  const [uncontrolledState, setUncontrolledState] = useControlled(\n    controlledValue,\n    () => defaultValue,\n  );\n * ```\n *\n * @param propValue\n * @param getDefaultPropValue\n */\n\nexport default function useControlled(propValue) {\n  var getDefaultPropValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n    return propValue;\n  };\n  var isControlled = propValue !== undefined;\n\n  var _useState = useState(getDefaultPropValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      valueState = _useState2[0],\n      setValue = _useState2[1];\n\n  var isControlledRef = useRef(isControlled);\n  useEffect(function () {\n    isControlledRef.current = isControlled;\n  }, [isControlled]);\n  var value = isControlled ? propValue : valueState;\n  var setValueIfUncontrolled = useCallback(function (newValue) {\n    if (!isControlledRef.current) {\n      setValue(newValue);\n    }\n  }, []);\n  return [value, setValueIfUncontrolled];\n}","import React from 'react';\nimport { getMimeIcon } from './util';\nimport { MediaTypeIcon } from './media-type-icon';\nimport { IconWrapper } from './media-type-icon';\n\n/*\n * Renders an icon. First, check if the mimeType corresponds to any of the special mimeType icons (.gif, .sketch, .exe, ect). If so, render that icon.\n * Else, render an icon corresponding to its mediaType (doc/audio/image/video/unknown)\n */\nexport var MimeTypeIcon = function MimeTypeIcon(_ref) {\n  var _ref$mediaType = _ref.mediaType,\n      mediaType = _ref$mediaType === void 0 ? 'unknown' : _ref$mediaType,\n      _ref$mimeType = _ref.mimeType,\n      mimeType = _ref$mimeType === void 0 ? 'unknown' : _ref$mimeType,\n      _ref$name = _ref.name,\n      name = _ref$name === void 0 ? 'unknown' : _ref$name,\n      testId = _ref.testId,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'large' : _ref$size;\n  // retrieve mimetype icon and label\n  var iconInfo = getMimeIcon(mimeType, name); // a corresponding mimetype icon and label was found.\n\n  if (iconInfo) {\n    var Icon = iconInfo.icon;\n    return /*#__PURE__*/React.createElement(IconWrapper, {\n      \"data-testid\": testId,\n      \"data-type\": iconInfo.label,\n      size: size\n    }, /*#__PURE__*/React.createElement(Icon, {\n      label: iconInfo.label\n    }));\n  } // no correponding mimetype icon/label was found.\n  // Hence, return a mediatype (image/doc/audio/video/unknown) icon\n\n\n  return /*#__PURE__*/React.createElement(MediaTypeIcon, {\n    testId: testId,\n    type: mediaType,\n    size: size\n  });\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Image24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#FFAB00\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm7 17l-1.293-1.293a1 1 0 00-1.414 0L4 19h16v-3.6l-3.295-3.624a1 1 0 00-1.447-.034L10 17zm-3.333-6.667a2.667 2.667 0 100-5.333 2.667 2.667 0 000 5.333z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nImage24Icon.displayName = 'Image24Icon';\nvar _default = Image24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Audio24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm16 6.673V5.619c0-.38-.322-.656-.72-.615l-8.56.886c-.41.043-.72.383-.72.764v6.462A2.8 2.8 0 008.2 13h-.4A2.8 2.8 0 005 15.8v.4A2.8 2.8 0 007.8 19h.4a2.8 2.8 0 002.8-2.8V8.863l6-.62v3.873a2.8 2.8 0 00-.8-.116h-.4a2.8 2.8 0 00-2.8 2.8v.4a2.8 2.8 0 002.8 2.8h.4a2.8 2.8 0 002.8-2.8V6.673z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nAudio24Icon.displayName = 'Audio24Icon';\nvar _default = Audio24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Video24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm1 7.995v8.01c0 .54.446.995.995.995h8.01c.54 0 .995-.446.995-.995v-8.01c0-.54-.446-.995-.995-.995h-8.01C4.455 7 4 7.446 4 7.995zm15.16 7.943c.38.185.84-.066.84-.457V8.52c0-.39-.46-.642-.84-.457L16 9.592v4.817l3.16 1.53z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nVideo24Icon.displayName = 'Video24Icon';\nvar _default = Video24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Document24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#2684FF\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm1 18c0 .556.446 1 .995 1h8.01c.54 0 .995-.448.995-1 0-.556-.446-1-.995-1h-8.01c-.54 0-.995.448-.995 1zm0-4c0 .556.448 1 1 1h14c.555 0 1-.448 1-1 0-.556-.448-1-1-1H5c-.555 0-1 .448-1 1zm0-4c0 .556.448 1 1 1h14c.555 0 1-.448 1-1 0-.556-.448-1-1-1H5c-.555 0-1 .448-1 1zm0-4c0 .556.448 1 1 1h14c.555 0 1-.448 1-1 0-.556-.448-1-1-1H5c-.555 0-1 .448-1 1z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nDocument24Icon.displayName = 'Document24Icon';\nvar _default = Document24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Archive24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm6 3v3h3V3H9zm3 3v3h3V6h-3zM9 9v3h3V9H9zm3 3v3h3v-3h-3zm-3 3v3h3v-3H9zm3 3v3h3v-3h-3z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nArchive24Icon.displayName = 'Archive24Icon';\nvar _default = Archive24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Generic24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M12 4H8a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2v-6.995h-2V18H8V6h4v2a2 2 0 002 2h3.5a.5.5 0 00.5-.5V8.213a.5.5 0 00-.145-.352L14.61 4.59A2 2 0 0013.19 4H12zM3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nGeneric24Icon.displayName = 'Generic24Icon';\nvar _default = Generic24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst MoreIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill=\"currentColor\" fill-rule=\"evenodd\"><circle cx=\"5\" cy=\"12\" r=\"2\"/><circle cx=\"12\" cy=\"12\" r=\"2\"/><circle cx=\"19\" cy=\"12\" r=\"2\"/></g></svg>`\n}, props));\n\nMoreIcon.displayName = 'MoreIcon';\nvar _default = MoreIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst CheckIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M6.735 12.322a1 1 0 00-1.47 1.356l3.612 3.919c.537.526 1.337.526 1.834.03l.364-.359a2335.638 2335.638 0 003.939-3.883l.04-.04a492.598 492.598 0 003.658-3.643 1 1 0 00-1.424-1.404 518.42 518.42 0 01-3.64 3.625l-.04.04a2049.114 2049.114 0 01-3.775 3.722l-3.098-3.363z\" fill=\"currentColor\"/></svg>`\n}, props));\n\nCheckIcon.displayName = 'CheckIcon';\nvar _default = CheckIcon;\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nvar _excluded = [\"appearance\", \"buttonRef\"],\n    _excluded2 = [\"buttonStyles\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React from 'react';\nimport Button from '@atlaskit/button/custom-theme-button';\nimport { DN60, B75, DN400, B400, DN100, B100, B200, DN70, DN30 } from '@atlaskit/theme/colors';\nvar buttonTheme = {\n  default: {\n    background: {\n      default: {\n        light: 'transparent'\n      },\n      hover: {\n        light: DN60\n      },\n      active: {\n        light: B75\n      }\n    },\n    boxShadowColor: {\n      focus: {\n        light: B75\n      }\n    },\n    color: {\n      default: {\n        light: DN400\n      },\n      hover: {\n        light: DN400\n      },\n      active: {\n        light: B400\n      },\n      disabled: {\n        light: DN100\n      }\n    }\n  },\n  primary: {\n    background: {\n      default: {\n        light: B100\n      },\n      hover: {\n        light: B75\n      },\n      active: {\n        light: B200\n      },\n      disabled: {\n        light: DN70\n      }\n    },\n    boxShadowColor: {\n      focus: {\n        light: B75\n      }\n    },\n    color: {\n      default: {\n        light: DN30\n      }\n    }\n  }\n};\n\nfunction extract(newTheme, _ref) {\n  var appearance = _ref.appearance,\n      state = _ref.state,\n      mode = _ref.mode;\n\n  // @ts-ignore\n  if (!newTheme[appearance]) {\n    return;\n  } // @ts-ignore\n\n\n  var root = newTheme[appearance];\n  return Object.keys(root).reduce(function (acc, val) {\n    var node = root;\n    [val, state, mode].forEach(function (item) {\n      if (!node[item]) {\n        return;\n      }\n\n      if (_typeof(node[item]) !== 'object') {\n        acc[val] = node[item];\n        return;\n      }\n\n      node = node[item];\n      return;\n    });\n    return acc;\n  }, {});\n}\n\nexport default function MediaButton(_ref2) {\n  var _ref2$appearance = _ref2.appearance,\n      appearance = _ref2$appearance === void 0 ? 'default' : _ref2$appearance,\n      buttonRef = _ref2.buttonRef,\n      rest = _objectWithoutProperties(_ref2, _excluded);\n\n  return /*#__PURE__*/React.createElement(Button, _extends({}, rest, {\n    ref: buttonRef // Giving button the 'default' appearance so it can calculate the base styles\n    ,\n    appearance: appearance,\n    theme: function theme(currentTheme, themeProps) {\n      var _currentTheme = currentTheme(themeProps),\n          buttonStyles = _currentTheme.buttonStyles,\n          rest = _objectWithoutProperties(_currentTheme, _excluded2);\n\n      return _objectSpread({\n        buttonStyles: _objectSpread(_objectSpread({}, buttonStyles), extract(buttonTheme, _objectSpread(_objectSpread({}, themeProps), {}, {\n          appearance: appearance\n        })))\n      }, rest);\n    }\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst VidHdCircleIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill-rule=\"evenodd\"><circle fill=\"currentColor\" cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"M11.359 15V9.004h-1.5v2.352H7.504V9.004H6V15h1.504v-2.418h2.355V15h1.5zm1.393-6v6h2.483C17.013 15 18 13.911 18 11.942 18 10.068 16.996 9 15.235 9h-2.483zm1.503 1.226h.71c.946 0 1.503.627 1.503 1.745 0 1.188-.529 1.803-1.504 1.803h-.709v-3.548z\" fill=\"inherit\"/></g></svg>`\n}, props));\n\nVidHdCircleIcon.displayName = 'VidHdCircleIcon';\nvar _default = VidHdCircleIcon;\nexports.default = _default;","/*!\n * bytes\n * Copyright(c) 2012-2014 TJ Holowaychuk\n * Copyright(c) 2015 Jed Watson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = bytes;\nmodule.exports.format = format;\nmodule.exports.parse = parse;\n\n/**\n * Module variables.\n * @private\n */\n\nvar formatThousandsRegExp = /\\B(?=(\\d{3})+(?!\\d))/g;\n\nvar formatDecimalsRegExp = /(?:\\.0*|(\\.[^0]+)0+)$/;\n\nvar map = {\n  b:  1,\n  kb: 1 << 10,\n  mb: 1 << 20,\n  gb: 1 << 30,\n  tb: Math.pow(1024, 4),\n  pb: Math.pow(1024, 5),\n};\n\nvar parseRegExp = /^((-|\\+)?(\\d+(?:\\.\\d+)?)) *(kb|mb|gb|tb|pb)$/i;\n\n/**\n * Convert the given value in bytes into a string or parse to string to an integer in bytes.\n *\n * @param {string|number} value\n * @param {{\n *  case: [string],\n *  decimalPlaces: [number]\n *  fixedDecimals: [boolean]\n *  thousandsSeparator: [string]\n *  unitSeparator: [string]\n *  }} [options] bytes options.\n *\n * @returns {string|number|null}\n */\n\nfunction bytes(value, options) {\n  if (typeof value === 'string') {\n    return parse(value);\n  }\n\n  if (typeof value === 'number') {\n    return format(value, options);\n  }\n\n  return null;\n}\n\n/**\n * Format the given value in bytes into a string.\n *\n * If the value is negative, it is kept as such. If it is a float,\n * it is rounded.\n *\n * @param {number} value\n * @param {object} [options]\n * @param {number} [options.decimalPlaces=2]\n * @param {number} [options.fixedDecimals=false]\n * @param {string} [options.thousandsSeparator=]\n * @param {string} [options.unit=]\n * @param {string} [options.unitSeparator=]\n *\n * @returns {string|null}\n * @public\n */\n\nfunction format(value, options) {\n  if (!Number.isFinite(value)) {\n    return null;\n  }\n\n  var mag = Math.abs(value);\n  var thousandsSeparator = (options && options.thousandsSeparator) || '';\n  var unitSeparator = (options && options.unitSeparator) || '';\n  var decimalPlaces = (options && options.decimalPlaces !== undefined) ? options.decimalPlaces : 2;\n  var fixedDecimals = Boolean(options && options.fixedDecimals);\n  var unit = (options && options.unit) || '';\n\n  if (!unit || !map[unit.toLowerCase()]) {\n    if (mag >= map.pb) {\n      unit = 'PB';\n    } else if (mag >= map.tb) {\n      unit = 'TB';\n    } else if (mag >= map.gb) {\n      unit = 'GB';\n    } else if (mag >= map.mb) {\n      unit = 'MB';\n    } else if (mag >= map.kb) {\n      unit = 'KB';\n    } else {\n      unit = 'B';\n    }\n  }\n\n  var val = value / map[unit.toLowerCase()];\n  var str = val.toFixed(decimalPlaces);\n\n  if (!fixedDecimals) {\n    str = str.replace(formatDecimalsRegExp, '$1');\n  }\n\n  if (thousandsSeparator) {\n    str = str.split('.').map(function (s, i) {\n      return i === 0\n        ? s.replace(formatThousandsRegExp, thousandsSeparator)\n        : s\n    }).join('.');\n  }\n\n  return str + unitSeparator + unit;\n}\n\n/**\n * Parse the string value into an integer in bytes.\n *\n * If no unit is given, it is assumed the value is in bytes.\n *\n * @param {number|string} val\n *\n * @returns {number|null}\n * @public\n */\n\nfunction parse(val) {\n  if (typeof val === 'number' && !isNaN(val)) {\n    return val;\n  }\n\n  if (typeof val !== 'string') {\n    return null;\n  }\n\n  // Test if the string passed is valid\n  var results = parseRegExp.exec(val);\n  var floatValue;\n  var unit = 'b';\n\n  if (!results) {\n    // Nothing could be extracted from the given string\n    floatValue = parseInt(val, 10);\n    unit = 'b'\n  } else {\n    // Retrieve the value and the unit\n    floatValue = parseFloat(results[1]);\n    unit = results[4].toLowerCase();\n  }\n\n  if (isNaN(floatValue)) {\n    return null;\n  }\n\n  return Math.floor(map[unit] * floatValue);\n}\n","import { createLocalizationProvider } from '@atlaskit/locale';\nexport var formatterOptions = {\n  day: '2-digit',\n  month: 'short',\n  year: 'numeric',\n  hour: '2-digit',\n  minute: '2-digit',\n  hour12: true\n};\nexport var partsFormatter = function partsFormatter(_ref) {\n  var day = _ref.day,\n      month = _ref.month,\n      year = _ref.year,\n      hour = _ref.hour,\n      minute = _ref.minute,\n      _ref$dayPeriod = _ref.dayPeriod,\n      dayPeriod = _ref$dayPeriod === void 0 ? '' : _ref$dayPeriod;\n  var formattedDayPeriod = dayPeriod.replace(/\\./g, '').replace(/\\s/g, '');\n  return \"\".concat(day, \" \").concat(month, \" \").concat(year, \", \").concat(hour, \":\").concat(minute, \" \").concat(formattedDayPeriod);\n};\nexport var formatDate = function formatDate(timestamp) {\n  var locale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'en';\n  var l10n = createLocalizationProvider(locale, formatterOptions);\n  return partsFormatter(l10n.formatToParts(timestamp));\n};","export var ImageType;\n\n(function (ImageType) {\n  ImageType[\"JPEG\"] = \"image/jpeg\";\n  ImageType[\"PNG\"] = \"image/png\";\n})(ImageType || (ImageType = {}));\n\nexport var SupportedImageMetaTag;\n\n(function (SupportedImageMetaTag) {\n  SupportedImageMetaTag[\"XResolution\"] = \"XResolution\";\n  SupportedImageMetaTag[\"YResolution\"] = \"YResolution\";\n  SupportedImageMetaTag[\"Orientation\"] = \"Orientation\";\n})(SupportedImageMetaTag || (SupportedImageMetaTag = {}));\n\n// http://sylvana.net/jpegcrop/exif_orientation.html\nexport var ExifOrientation = {\n  'top-left': 1,\n  // none\n  'top-right': 2,\n  // flip horizontal\n  'bottom-right': 3,\n  // rotate 180\n  'bottom-left': 4,\n  // flip vertical\n  'left-top': 5,\n  // transpose\n  'right-top': 6,\n  // rotate 90\n  'right-bottom': 7,\n  // transverse\n  'left-bottom': 8 // rotate 270\n\n};","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { SupportedImageMetaTag } from './types';\nvar XResolution = SupportedImageMetaTag.XResolution,\n    YResolution = SupportedImageMetaTag.YResolution;\nvar loadImage;\nexport function readJPEGExifMetaData(file) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n      var module;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (loadImage) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return import('blueimp-load-image');\n\n            case 3:\n              module = _context.sent;\n              loadImage = module.default || module;\n\n            case 5:\n              loadImage.parseMetaData(file, function (data) {\n                try {\n                  var tags = data && data.exif ? data.exif.getAll() : {};\n                  Object.keys(tags).forEach(function (key) {\n                    var value = tags[key];\n\n                    if (_typeof(value) === 'object' && (key === XResolution || key === YResolution) && 'numerator' in value) {\n                      // some test images had this structure, so just take the numerator value to simplify returned value\n                      tags[key] = value.numerator;\n                    }\n\n                    if (typeof tags[key] === 'number') {\n                      // in case numbers types were auto-converted, keep everything the same between jpeg & png we keep as strings\n                      tags[key] = \"\".concat(tags[key]);\n                    }\n                  });\n                  resolve(tags);\n                } catch (e) {\n                  reject(e);\n                }\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { fileToArrayBuffer } from '../util';\nvar pngChunksExtract;\nexport function readPNGXMPMetaData(_x) {\n  return _readPNGXMPMetaData.apply(this, arguments);\n}\n\nfunction _readPNGXMPMetaData() {\n  _readPNGXMPMetaData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n    var module, buffer, chunks;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (pngChunksExtract) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 3;\n            return import('png-chunks-extract');\n\n          case 3:\n            module = _context.sent;\n            pngChunksExtract = module.default || module;\n\n          case 5:\n            _context.next = 7;\n            return fileToArrayBuffer(file);\n\n          case 7:\n            buffer = _context.sent;\n            chunks = pngChunksExtract(buffer);\n            _context.next = 11;\n            return parsePNGChunks(chunks);\n\n          case 11:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _readPNGXMPMetaData.apply(this, arguments);\n}\n\nexport function parsePNGChunks(_x2) {\n  return _parsePNGChunks.apply(this, arguments);\n}\n\nfunction _parsePNGChunks() {\n  _parsePNGChunks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(chunks) {\n    var iTXt, pHYs, i, chunk, dv, unitSpecifier, PixelPerUnitX, PixelPerUnitY;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            iTXt = '';\n            pHYs = {};\n            /**\n             * http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.Summary-of-standard-chunks\n             * Order of every chunk is not guaranteed.\n             * And both iTXt and pHYs are Ancillary chunks.\n             */\n\n            i = 0;\n\n          case 3:\n            if (!(i < chunks.length)) {\n              _context2.next = 12;\n              break;\n            }\n\n            chunk = chunks[i]; // Must be last\n\n            if (!(chunk.name === 'IEND')) {\n              _context2.next = 7;\n              break;\n            }\n\n            return _context2.abrupt(\"break\", 12);\n\n          case 7:\n            /**\n             * http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.Anc-text\n             * iTXt contains the useful XMP/XML string data of meta tags\n             */\n            if (chunk.name === 'iTXt') {\n              iTXt = String.fromCharCode.apply(null, Array.from(chunk.data));\n            }\n            /**\n             * http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.pHYs\n             * Pixels per unit, X axis: 4 bytes (unsigned integer)\n             * Pixels per unit, Y axis: 4 bytes (unsigned integer)\n             * Unit specifier:          1 byte  (0: unit is unknown 1: unit is the meter)\n             */\n\n\n            if (chunk.name === 'pHYs') {\n              dv = new DataView(chunk.data.buffer);\n              unitSpecifier = dv.getUint8(8); // meter\n\n              if (unitSpecifier === 1) {\n                PixelPerUnitX = dv.getUint32(0);\n                PixelPerUnitY = dv.getUint32(4);\n                pHYs = {\n                  PixelPerUnitX: PixelPerUnitX,\n                  PixelPerUnitY: PixelPerUnitY\n                };\n              }\n            }\n\n          case 9:\n            ++i;\n            _context2.next = 3;\n            break;\n\n          case 12:\n            return _context2.abrupt(\"return\", {\n              iTXt: iTXt,\n              pHYs: pHYs\n            });\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parsePNGChunks.apply(this, arguments);\n}","export function parseXMPMetaData(xmpMetaData) {\n  var metadata = {};\n  var tags = xmpMetaData.match(/<(tiff|exif):.+>/gi);\n\n  if (tags) {\n    tags.forEach(function (tag) {\n      var match = tag.match(/<(tiff|exif):([^>]+)>([^<]+)/i);\n\n      if (match) {\n        var name = match[2];\n        metadata[name] = match[3];\n      }\n    });\n  }\n\n  return metadata;\n}","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { ImageType } from './types';\nimport { readJPEGExifMetaData } from './parseJPEG';\nimport { readPNGXMPMetaData } from './parsePNG';\nimport { parseXMPMetaData } from './parsePNGXMP';\nexport function readImageMetaTags(_x) {\n  return _readImageMetaTags.apply(this, arguments);\n}\n\nfunction _readImageMetaTags() {\n  _readImageMetaTags = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n    var type, _yield$readPNGXMPMeta, iTXt, pHYs, xmpMetaData;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            type = file.type;\n            _context.prev = 1;\n\n            if (!(type === ImageType.PNG)) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.next = 5;\n            return readPNGXMPMetaData(file);\n\n          case 5:\n            _yield$readPNGXMPMeta = _context.sent;\n            iTXt = _yield$readPNGXMPMeta.iTXt;\n            pHYs = _yield$readPNGXMPMeta.pHYs;\n            xmpMetaData = _objectSpread(_objectSpread({}, parseXMPMetaData(iTXt)), pHYs);\n            return _context.abrupt(\"return\", xmpMetaData);\n\n          case 12:\n            if (!(file.type === ImageType.JPEG)) {\n              _context.next = 16;\n              break;\n            }\n\n            _context.next = 15;\n            return readJPEGExifMetaData(file);\n\n          case 15:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 16:\n            _context.next = 20;\n            break;\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context[\"catch\"](1);\n\n          case 20:\n            return _context.abrupt(\"return\", null);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 18]]);\n  }));\n  return _readImageMetaTags.apply(this, arguments);\n}","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { SupportedImageMetaTag, ExifOrientation } from './types';\nimport { readImageMetaTags } from './metatags';\nimport { loadImage, readImageNaturalOrientationFromDOM } from '../util';\nimport { isRotated } from './imageOrientationUtil';\nvar Orientation = SupportedImageMetaTag.Orientation,\n    XResolution = SupportedImageMetaTag.XResolution; // http://bonfx.com/why-is-the-web-72-dpi-and-print-300-dpi/\n\nvar DPI_WEB_BASELINE = 72;\nexport { ExifOrientation } from './types';\nexport function getImageInfo(_x) {\n  return _getImageInfo.apply(this, arguments);\n}\n\nfunction _getImageInfo() {\n  _getImageInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileInfo) {\n    var metadata, width, height, tags, scaleFactor;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return readImageMetaData(fileInfo);\n\n          case 2:\n            metadata = _context.sent;\n\n            if (metadata) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 5:\n            width = metadata.width, height = metadata.height, tags = metadata.tags;\n            scaleFactor = getScaleFactor(fileInfo.file, tags);\n            return _context.abrupt(\"return\", {\n              scaleFactor: scaleFactor,\n              width: width,\n              height: height\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getImageInfo.apply(this, arguments);\n}\n\nexport function getScaleFactor(file, tags) {\n  var scaleFactorFromFilename = getScaleFactorFromFile(file);\n\n  if (scaleFactorFromFilename !== null) {\n    return scaleFactorFromFilename;\n  } else if (tags) {\n    /**\n     * Scale Factor is actually a 2D thing, but in practice X & Y are same in 99% cases.\n     * So we are only relying on X axis.\n     */\n    if (typeof tags['PixelPerUnitX'] === 'number') {\n      // 1 inch = 0.0254 meters\n      return Math.round(tags['PixelPerUnitX'] * 0.0254) / DPI_WEB_BASELINE;\n    } else {\n      return getMetaTagNumericValue(tags, XResolution, DPI_WEB_BASELINE) / DPI_WEB_BASELINE;\n    }\n  } else {\n    return 1;\n  }\n}\n\nvar getOrientationFromTags = function getOrientationFromTags(tags) {\n  if (tags && tags[Orientation]) {\n    var tagValue = tags[Orientation];\n\n    if (tagValue) {\n      var numericValue = parseInt(tagValue, 10);\n\n      if (isNaN(numericValue)) {\n        return ExifOrientation[tagValue];\n      }\n\n      return numericValue;\n    }\n  }\n\n  return 1;\n};\n\nexport function getOrientation(_x2) {\n  return _getOrientation.apply(this, arguments);\n}\n\nfunction _getOrientation() {\n  _getOrientation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(file) {\n    var tags;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return readImageMetaTags(file);\n\n          case 2:\n            tags = _context2.sent;\n            return _context2.abrupt(\"return\", getOrientationFromTags(tags));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getOrientation.apply(this, arguments);\n}\n\nexport function getMetaTagNumericValue(tags, key, defaultValue) {\n  try {\n    var num = parseFloat(\"\".concat(tags[key]));\n\n    if (!isNaN(num)) {\n      return num;\n    }\n  } catch (e) {//\n  }\n\n  return defaultValue;\n}\nexport function getScaleFactorFromFile(file) {\n  try {\n    // filenames with scale ratio in name take precedence - eg. filename@2x.png\n    var match = file.name.trim().match(/@([0-9\\.]+)x\\.[a-z]{3}$/);\n\n    if (match) {\n      return parseFloat(match[1]);\n    }\n  } catch (e) {// parse problem, return null\n  }\n\n  return null;\n}\nexport function readImageMetaData(_x3) {\n  return _readImageMetaData.apply(this, arguments);\n}\n\nfunction _readImageMetaData() {\n  _readImageMetaData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fileInfo) {\n    var file, src, type, width, height, tags, orientation, isImageRotated, data, img, _readImageNaturalOrie, _width, _height;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            file = fileInfo.file, src = fileInfo.src;\n            type = file.type;\n            width = 0;\n            height = 0;\n            _context3.next = 6;\n            return readImageMetaTags(file);\n\n          case 6:\n            tags = _context3.sent;\n\n            // since we're reading metadata anyway, try to get dimensions from there...\n            if (tags && tags.PixelXDimension) {\n              width = getMetaTagNumericValue(tags, 'PixelXDimension', 0);\n            }\n\n            if (tags && tags.PixelXDimension) {\n              height = getMetaTagNumericValue(tags, 'PixelYDimension', 0);\n            } // otherwise, load the image async (ideally avoid if found above due to being slightly expensive)\n\n\n            orientation = getOrientationFromTags(tags);\n            isImageRotated = isRotated(orientation);\n            data = {\n              type: type,\n              width: width,\n              height: height,\n              naturalWidth: width,\n              naturalHeight: height,\n              tags: tags\n            };\n\n            if (!(isImageRotated || width === 0 && height === 0)) {\n              _context3.next = 27;\n              break;\n            }\n\n            _context3.prev = 13;\n            _context3.next = 16;\n            return loadImage(src);\n\n          case 16:\n            img = _context3.sent;\n            _readImageNaturalOrie = readImageNaturalOrientationFromDOM(img), _width = _readImageNaturalOrie.width, _height = _readImageNaturalOrie.height;\n            data.width = _width;\n            data.height = _height;\n            data.naturalWidth = img.naturalWidth;\n            data.naturalHeight = img.naturalHeight;\n            _context3.next = 27;\n            break;\n\n          case 24:\n            _context3.prev = 24;\n            _context3.t0 = _context3[\"catch\"](13);\n            return _context3.abrupt(\"return\", null);\n\n          case 27:\n            return _context3.abrupt(\"return\", data);\n\n          case 28:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[13, 24]]);\n  }));\n  return _readImageMetaData.apply(this, arguments);\n}\n\nexport { getCssFromImageOrientation, isRotated } from './imageOrientationUtil';","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Component } from 'react';\nexport var keyCodes = {\n  space: 'Space',\n  m: 'KeyM',\n  rightArrow: 'ArrowRight',\n  leftArrow: 'ArrowLeft'\n};\nexport var Shortcut = /*#__PURE__*/function (_Component) {\n  _inherits(Shortcut, _Component);\n\n  var _super = _createSuper(Shortcut);\n\n  function Shortcut() {\n    var _this;\n\n    _classCallCheck(this, Shortcut);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"keyHandler\", function (e) {\n      var _this$props = _this.props,\n          handler = _this$props.handler,\n          code = _this$props.code,\n          keyCode = _this$props.keyCode;\n\n      if (keyCode !== undefined && e.keyCode === keyCode) {\n        handler();\n      }\n\n      if (code !== undefined && e.code === code) {\n        handler();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"init\", function () {\n      document.addEventListener('keydown', _this.keyHandler);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"release\", function () {\n      document.removeEventListener('keydown', _this.keyHandler);\n    });\n\n    return _this;\n  }\n\n  _createClass(Shortcut, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.init();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.release();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Shortcut;\n}(Component);","import * as bytes from 'bytes'; // eslint-disable-next-line no-bitwise\n\nvar ONE_MEGABYTE_IN_BYTES = 1 << 20;\n/**\n * Takes a media (file) size in bytes and returns a human readable string\n */\n\nexport function toHumanReadableMediaSize(size) {\n  // [MS-967]: Api issue might return string for size\n  var parsedSize = parseInt(\"\".concat(size), 10);\n  var decimalPlaces = parsedSize < ONE_MEGABYTE_IN_BYTES ? 0 : 1;\n  return bytes.format(parsedSize, {\n    unitSeparator: ' ',\n    decimalPlaces: decimalPlaces\n  }).toUpperCase();\n}","/**\n * __Section__\n *\n * A dropdown item group includes all the actions or items in a dropdown menu.\n *\n * - [Examples](https://atlassian.design/components/dropdown-menu/dropdown-item-group/examples)\n * - [Code](https://atlassian.design/components/dropdown-menu/dropdown-item-group/code)\n * - [Usage](https://atlassian.design/components/dropdown-menu/dropdown-item-group/usage)\n */\nimport Section from '@atlaskit/menu/section';\nexport default Section;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst ImageIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M3 4.995C3 3.893 3.893 3 4.995 3h14.01C20.107 3 21 3.893 21 4.995v14.01A1.995 1.995 0 0119.005 21H4.995A1.995 1.995 0 013 19.005V4.995zM10.5 16.5L9 15l-3 3h12v-2.7L15 12l-4.5 4.5zM8 10a2 2 0 100-4 2 2 0 000 4z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>`\n}, props));\n\nImageIcon.displayName = 'ImageIcon';\nvar _default = ImageIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst AudioIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M19 6.673V15.2a2.8 2.8 0 01-2.8 2.8h-.4a2.8 2.8 0 01-2.8-2.8v-.4a2.8 2.8 0 012.8-2.8h.4c.278 0 .547.04.8.116V8.242l-6 .621V16.2A2.8 2.8 0 018.2 19h-.4A2.8 2.8 0 015 16.2v-.4A2.8 2.8 0 017.8 13h.4c.278 0 .547.04.8.116V6.654c0-.38.31-.721.72-.764l8.56-.886c.398-.041.72.235.72.615v1.054z\" fill=\"currentColor\"/></svg>`\n}, props));\n\nAudioIcon.displayName = 'AudioIcon';\nvar _default = AudioIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst MediaServicesVideoIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill-rule=\"evenodd\"><rect fill=\"currentColor\" x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"/><path d=\"M16.37 14.954L14 13.807v-3.613l2.37-1.148c.285-.138.63.05.63.343v5.222c0 .293-.345.481-.63.343\" fill=\"inherit\"/><rect fill=\"inherit\" x=\"7\" y=\"9\" width=\"6\" height=\"6\" rx=\"1\"/></g></svg>`\n}, props));\n\nMediaServicesVideoIcon.displayName = 'MediaServicesVideoIcon';\nvar _default = MediaServicesVideoIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DocumentIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M17 10.005V19H7V5h5.99v2.49a1.5 1.5 0 001.5 1.5h4.5v-.522c0-.297-.132-.578-.359-.768l-5.074-4.236c-.36-.3-.813-.464-1.282-.464H7a2 2 0 00-2 2v14a2 2 0 002 2h10a2 2 0 002-2v-8.995h-2z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>`\n}, props));\n\nDocumentIcon.displayName = 'DocumentIcon';\nvar _default = DocumentIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst PageIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill=\"currentColor\" fill-rule=\"evenodd\"><rect x=\"8\" y=\"6\" width=\"8\" height=\"2\" rx=\"1\"/><rect x=\"8\" y=\"9\" width=\"8\" height=\"2\" rx=\"1\"/><rect x=\"8\" y=\"12\" width=\"4\" height=\"2\" rx=\"1\"/><path d=\"M7 4v16h10V4H7zm-2-.01C5 2.892 5.897 2 7.006 2h9.988C18.102 2 19 2.898 19 3.99v16.02c0 1.099-.897 1.99-2.006 1.99H7.006A2.003 2.003 0 015 20.01V3.99z\" fill-rule=\"nonzero\"/></g></svg>`\n}, props));\n\nPageIcon.displayName = 'PageIcon';\nvar _default = PageIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst MediaServicesZipIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill-rule=\"evenodd\"><rect fill=\"currentColor\" x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"/><path d=\"M9 6.999C9 6.447 9.443 6 9.999 6H12v3H9.999A.996.996 0 019 8.001V6.999zM12 9h2.001c.552 0 .999.443.999.999v1.002a.996.996 0 01-.999.999H12V9zm-3 3.999c0-.552.443-.999.999-.999H12v3H9.999A.996.996 0 019 14.001v-1.002zM12 15h2.001c.552 0 .999.443.999.999v1.002a.996.996 0 01-.999.999H12v-3z\" fill=\"inherit\"/></g></svg>`\n}, props));\n\nMediaServicesZipIcon.displayName = 'MediaServicesZipIcon';\nvar _default = MediaServicesZipIcon;\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"onClose\", \"setInitialFocusRef\"];\nimport React, { useContext } from 'react';\nimport MenuGroup from '@atlaskit/menu/menu-group';\nimport { FocusManagerContext } from '../components/focus-manager';\nimport isCheckboxItem from '../utils/is-checkbox-item';\nimport isRadioItem from '../utils/is-radio-item';\n/**\n *\n * MenuWrapper wraps all the menu items.\n * It handles the logic to close the menu when a MenuItem is clicked, but leaves it open\n * if a CheckboxItem or RadioItem is clicked.\n * It also sets focus to the first menu item when opened.\n */\n\nvar MenuWrapper = function MenuWrapper(_ref) {\n  var onClose = _ref.onClose,\n      setInitialFocusRef = _ref.setInitialFocusRef,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _useContext = useContext(FocusManagerContext),\n      menuItemRefs = _useContext.menuItemRefs;\n\n  var closeOnMenuItemClick = function closeOnMenuItemClick(e) {\n    var isTargetMenuItemOrDecendant = menuItemRefs.some(function (menuItem) {\n      var isCheckboxOrRadio = isCheckboxItem(menuItem) || isRadioItem(menuItem);\n      return menuItem.contains(e.target) && !isCheckboxOrRadio;\n    }); // Close menu if the click is triggered from a MenuItem or\n    // its decendant. Don't close the menu if the click is triggered\n    // from a MenuItemRadio or MenuItemCheckbox so that the user can\n    // select multiple items.\n\n    if (isTargetMenuItemOrDecendant && onClose) {\n      onClose();\n    }\n  };\n\n  setInitialFocusRef && setInitialFocusRef(menuItemRefs[0]); // eslint-disable-next-line @repo/internal/react/no-unsafe-spread-props\n\n  return /*#__PURE__*/React.createElement(MenuGroup, _extends({\n    role: \"menu\",\n    onClick: closeOnMenuItemClick\n  }, props));\n};\n\nexport default MenuWrapper;","export default function isCheckboxItem(element) {\n  var role = element.getAttribute('role');\n  return role === 'checkbox' || role === 'menuitemcheckbox';\n}","export default function isCheckboxItem(element) {\n  var role = element.getAttribute('role');\n  return role === 'radio' || role === 'menuitemradio';\n}","import React, { createContext, useMemo, useRef } from 'react';\nimport noop from '@atlaskit/ds-lib/noop';\n\n/**\n *\n * SelectionStoreContext maintains the state of the selected items\n * and getter setters.\n *\n */\nexport var SelectionStoreContext = /*#__PURE__*/createContext({\n  setItemState: noop,\n  getItemState: function getItemState() {\n    return undefined;\n  },\n  setGroupState: noop,\n  getGroupState: function getGroupState() {\n    return {};\n  }\n});\n\n/**\n * Selection store will persist data as long as it remains mounted.\n * It handles the uncontrolled story for dropdown menu when the menu\n * items can be mounted/unmounted depending if the menu is open or closed.\n */\nvar SelectionStore = function SelectionStore(props) {\n  var children = props.children;\n  var store = useRef({});\n  var context = useMemo(function () {\n    return {\n      setItemState: function setItemState(group, id, value) {\n        if (!store.current[group]) {\n          store.current[group] = {};\n        }\n\n        store.current[group][id] = value;\n      },\n      getItemState: function getItemState(group, id) {\n        if (!store.current[group]) {\n          return undefined;\n        }\n\n        return store.current[group][id];\n      },\n      setGroupState: function setGroupState(group, value) {\n        store.current[group] = value;\n      },\n      getGroupState: function getGroupState(group) {\n        return store.current[group] || {};\n      }\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(SelectionStoreContext.Provider, {\n    value: context\n  }, children);\n};\n\nexport default SelectionStore;","import { useRef } from 'react';\nvar PREFIX = 'ds--dropdown--';\n\nvar generateRandomString = function generateRandomString() {\n  return (// This string is used only on client side usually triggered after a user interaction.\n    // Therefore, so there is no risk of mismatch\n    // between server and client generated markup.\n    // eslint-disable-next-line @repo/internal/react/disallow-unstable-values\n    \"\".concat(PREFIX).concat(Math.random().toString(16).substr(2, 8))\n  );\n};\n/**\n * useGeneratedId generates a random string which remains constant across\n * renders when called without any parameter.\n */\n\n\nexport default function useGeneratedId() {\n  var cachedId = useRef(generateRandomString());\n  return cachedId.current;\n}","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"ref\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n/** @jsx jsx */\nimport { useCallback, useEffect, useState } from 'react';\nimport { css, jsx } from '@emotion/core';\nimport { bind } from 'bind-event-listener';\nimport Button from '@atlaskit/button/standard-button';\nimport { KEY_DOWN } from '@atlaskit/ds-lib/keycodes';\nimport noop from '@atlaskit/ds-lib/noop';\nimport useControlledState from '@atlaskit/ds-lib/use-controlled';\nimport useFocus from '@atlaskit/ds-lib/use-focus-event';\nimport ExpandIcon from '@atlaskit/icon/glyph/chevron-down';\nimport Popup from '@atlaskit/popup';\nimport Spinner from '@atlaskit/spinner';\nimport { gridSize as gridSizeFn, layers } from '@atlaskit/theme/constants';\nimport VisuallyHidden from '@atlaskit/visually-hidden';\nimport FocusManager from './internal/components/focus-manager';\nimport MenuWrapper from './internal/components/menu-wrapper';\nimport SelectionStore from './internal/context/selection-store';\nimport useGeneratedId from './internal/utils/use-generated-id';\nvar gridSize = gridSizeFn();\nvar spinnerContainerStyles = css({\n  display: 'flex',\n  minWidth: \"\".concat(gridSize * 20, \"px\"),\n  padding: \"\".concat(gridSize * 2.5, \"px\"),\n  justifyContent: 'center'\n});\nvar MAX_HEIGHT = \"calc(100vh - \".concat(gridSize * 2, \"px)\");\nvar fallbackPlacements = ['bottom', 'bottom-end', 'right-start', 'left-start', 'auto'];\n/**\n * __Dropdown menu__\n *\n * A dropdown menu displays a list of actions or options to a user.\n *\n * - [Examples](https://atlassian.design/components/dropdown-menu/examples)\n * - [Code](https://atlassian.design/components/dropdown-menu/code)\n * - [Usage](https://atlassian.design/components/dropdown-menu/usage)\n */\n\nvar DropdownMenu = function DropdownMenu(props) {\n  var _props$defaultOpen = props.defaultOpen,\n      defaultOpen = _props$defaultOpen === void 0 ? false : _props$defaultOpen,\n      isOpen = props.isOpen,\n      _props$onOpenChange = props.onOpenChange,\n      onOpenChange = _props$onOpenChange === void 0 ? noop : _props$onOpenChange,\n      children = props.children,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottom-start' : _props$placement,\n      _trigger = props.trigger,\n      _props$shouldFlip = props.shouldFlip,\n      shouldFlip = _props$shouldFlip === void 0 ? true : _props$shouldFlip,\n      _props$isLoading = props.isLoading,\n      isLoading = _props$isLoading === void 0 ? false : _props$isLoading,\n      _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      testId = props.testId,\n      _props$statusLabel = props.statusLabel,\n      statusLabel = _props$statusLabel === void 0 ? 'Loading' : _props$statusLabel,\n      _props$zIndex = props.zIndex,\n      zIndex = _props$zIndex === void 0 ? layers.modal() : _props$zIndex;\n\n  var _useControlledState = useControlledState(isOpen, function () {\n    return defaultOpen;\n  }),\n      _useControlledState2 = _slicedToArray(_useControlledState, 2),\n      isLocalOpen = _useControlledState2[0],\n      setLocalIsOpen = _useControlledState2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isTriggeredUsingKeyboard = _useState2[0],\n      setTriggeredUsingKeyboard = _useState2[1];\n\n  var handleTriggerClicked = useCallback( // TODO: event is an `any` and is being cast incorrectly\n  // This means that the public type for `onOpenChange` is incorrect\n  // current: (event: React.MouseEvent | React.KeyboardEvent) => void;\n  // correct: (event: React.MouseEvent | KeyboardEvent) => void;\n  // https://product-fabric.atlassian.net/browse/DSP-4692\n  function (event) {\n    var newValue = !isLocalOpen;\n    var clientX = event.clientX,\n        clientY = event.clientY,\n        type = event.type;\n\n    if (type === 'keydown') {\n      setTriggeredUsingKeyboard(true);\n    } else if (clientX === 0 || clientY === 0) {\n      // Hitting enter/space is registered as a click\n      // with both clientX and clientY === 0\n      setTriggeredUsingKeyboard(true);\n    }\n\n    setLocalIsOpen(newValue);\n    onOpenChange({\n      isOpen: newValue,\n      event: event\n    });\n  }, [onOpenChange, isLocalOpen, setLocalIsOpen]);\n  var handleOnClose = useCallback(function () {\n    var newValue = false;\n    setLocalIsOpen(newValue);\n    onOpenChange({\n      isOpen: newValue\n    });\n  }, [onOpenChange, setLocalIsOpen]);\n\n  var _useFocus = useFocus(),\n      isFocused = _useFocus.isFocused,\n      bindFocus = _useFocus.bindFocus; // When a trigger is focused, we want to open the dropdown if\n  // the user presses the DownArrow\n\n\n  useEffect(function () {\n    // Only need to listen for keydown when focused\n    if (!isFocused) {\n      return noop;\n    } // Being safe: we don't want to open the dropdown if it is already open\n    // Note: This shouldn't happen as the trigger should not be able to get focus\n\n\n    if (isLocalOpen) {\n      return noop;\n    }\n\n    return bind(window, {\n      type: 'keydown',\n      listener: function openOnKeyDown(e) {\n        if (e.key === KEY_DOWN) {\n          // prevent page scroll\n          e.preventDefault();\n          handleTriggerClicked(e);\n        }\n      }\n    });\n  }, [isFocused, isLocalOpen, handleTriggerClicked]);\n  var id = useGeneratedId();\n  return jsx(SelectionStore, null, jsx(Popup, {\n    id: isLocalOpen ? id : undefined,\n    shouldFlip: shouldFlip,\n    isOpen: isLocalOpen,\n    onClose: handleOnClose,\n    zIndex: zIndex,\n    placement: placement,\n    fallbackPlacements: fallbackPlacements,\n    testId: testId && \"\".concat(testId, \"--content\"),\n    shouldUseCaptureOnOutsideClick: true,\n    trigger: function trigger(triggerProps) {\n      if (typeof _trigger === 'function') {\n        var ref = triggerProps.ref,\n            providedProps = _objectWithoutProperties(triggerProps, _excluded);\n\n        return _trigger(_objectSpread(_objectSpread(_objectSpread({}, providedProps), bindFocus), {}, {\n          triggerRef: ref,\n          isSelected: isLocalOpen,\n          onClick: handleTriggerClicked,\n          testId: testId && \"\".concat(testId, \"--trigger\")\n        }));\n      }\n\n      return jsx(Button, _extends({}, bindFocus, {\n        ref: triggerProps.ref,\n        \"aria-controls\": triggerProps['aria-controls'],\n        \"aria-expanded\": triggerProps['aria-expanded'],\n        \"aria-haspopup\": triggerProps['aria-haspopup'],\n        isSelected: isLocalOpen,\n        iconAfter: jsx(ExpandIcon, {\n          size: \"medium\",\n          label: \"expand\"\n        }),\n        onClick: handleTriggerClicked,\n        testId: testId && \"\".concat(testId, \"--trigger\")\n      }), _trigger);\n    },\n    content: function content(_ref) {\n      var setInitialFocusRef = _ref.setInitialFocusRef;\n      return jsx(FocusManager, null, jsx(MenuWrapper, {\n        maxHeight: MAX_HEIGHT,\n        maxWidth: 800,\n        onClose: handleOnClose,\n        setInitialFocusRef: isTriggeredUsingKeyboard || autoFocus ? setInitialFocusRef : undefined\n      }, isLoading ? jsx(\"div\", {\n        css: spinnerContainerStyles\n      }, jsx(Spinner, {\n        size: \"small\"\n      }), jsx(VisuallyHidden, {\n        role: \"status\"\n      }, statusLabel)) : children));\n    }\n  }));\n};\n\nexport default DropdownMenu;","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nexport default function useFocus() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFocused = _useState2[0],\n      setIsFocused = _useState2[1]; // ensure bindFocus has a stable ref\n\n\n  var bindFocus = useRef({\n    onFocus: function onFocus() {\n      return setIsFocused(true);\n    },\n    onBlur: function onBlur() {\n      return setIsFocused(false);\n    }\n  });\n  useEffect(function () {\n    // handle the case where a component might\n    // unmount while being focused.\n    return function () {\n      return setIsFocused(false);\n    };\n  }, []);\n  return {\n    isFocused: isFocused,\n    bindFocus: bindFocus.current\n  };\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from '@emotion/styled';\nimport { hideControlsClassName } from '../classNames';\n\nvar handleControlsVisibility = function handleControlsVisibility(_ref) {\n  var controlsAreVisible = _ref.controlsAreVisible;\n  return \"\\n  transition: opacity .3s;\\n  opacity: \".concat(controlsAreVisible ? '1' : '0', \";\\n\");\n};\n\nexport var InactivityDetectorWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  flex: 1;\\n  overflow: visible;\\n  align-items: center;\\n  justify-content: center;\\n  position: relative;\\n\\n  .\", \" {\\n    \", \";\\n  }\\n\"])), hideControlsClassName, handleControlsVisibility);\nInactivityDetectorWrapper.displayName = 'InactivityDetectorWrapper';","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { hideControlsClassName } from '../classNames';\nimport { findParentByClassname } from '../util';\nimport { InactivityDetectorWrapper } from './styled';\nvar mouseMovementDelay = 2000;\n/**\n * Hides all the child elements with `hideControlsClassName` classname when user is inactive,\n * which means they haven't moved mouse over the component for `mouseMovementDelay` ms.\n * Exception is if user holding mouse over one of the hideable elements (those that have specified classname).\n *\n */\n\nexport var InactivityDetector = /*#__PURE__*/function (_Component) {\n  _inherits(InactivityDetector, _Component);\n\n  var _super = _createSuper(InactivityDetector);\n\n  function InactivityDetector() {\n    var _this;\n\n    _classCallCheck(this, InactivityDetector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"contentWrapperElement\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      controlsAreVisible: true\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearTimeout\", function () {\n      if (_this.checkActivityTimeout) {\n        window.clearTimeout(_this.checkActivityTimeout);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hideControls\", function (element) {\n      return function () {\n        if (element) {\n          var isOverHideableElement = findParentByClassname(element, hideControlsClassName, _this.contentWrapperElement.current || undefined);\n\n          if (!isOverHideableElement) {\n            _this.setState({\n              controlsAreVisible: false\n            });\n          }\n        } else {\n          _this.setState({\n            controlsAreVisible: false\n          });\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"checkMouseMovement\", function (e) {\n      var controlsAreVisible = _this.state.controlsAreVisible;\n\n      _this.clearTimeout(); // This check is needed to not trigger a render call on every movement.\n      // Even if nothing will be re-renderer since the value is the same, it\n      // will go into any children render method for nothing.\n\n\n      if (!controlsAreVisible) {\n        _this.setState({\n          controlsAreVisible: true\n        });\n      }\n\n      _this.checkActivityTimeout = window.setTimeout(_this.hideControls(e && e.target), mouseMovementDelay);\n    });\n\n    return _this;\n  }\n\n  _createClass(InactivityDetector, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.checkMouseMovement();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearTimeout();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var controlsAreVisible = this.state.controlsAreVisible;\n      var children = this.props.children;\n      return /*#__PURE__*/React.createElement(InactivityDetectorWrapper, {\n        ref: this.contentWrapperElement,\n        controlsAreVisible: controlsAreVisible,\n        onMouseMove: this.checkMouseMovement,\n        onMouseOut: function onMouseOut() {\n          return (// Do not pass element, hence forcing elements to be hidden.\n            _this2.checkMouseMovement()\n          );\n        },\n        onClick: this.checkMouseMovement\n      }, children(this.checkMouseMovement));\n    }\n  }]);\n\n  return InactivityDetector;\n}(Component);","import { useContext, useEffect, useRef } from 'react';\nimport { FocusManagerContext } from '../components/focus-manager'; // This function is called whenever a MenuItem mounts.\n// The refs stored in the context are used to programatically\n// control focus on a user navigates using the keyboard.\n\nfunction useRegisterItemWithFocusManager() {\n  var _useContext = useContext(FocusManagerContext),\n      registerRef = _useContext.registerRef;\n\n  var itemRef = useRef(null);\n  useEffect(function () {\n    if (itemRef.current !== null) {\n      registerRef(itemRef.current);\n    }\n  }, [registerRef]);\n  return itemRef;\n}\n\nexport default useRegisterItemWithFocusManager;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"component\", \"elemBefore\", \"elemAfter\", \"shouldTitleWrap\", \"shouldDescriptionWrap\"];\nimport React from 'react';\nimport ButtonItem from '@atlaskit/menu/button-item';\nimport CustomItem from '@atlaskit/menu/custom-item';\nimport LinkItem from '@atlaskit/menu/link-item';\nimport useRegisterItemWithFocusManager from './internal/hooks/use-register-item-with-focus-manager';\n\n/**\n * __Dropdown menu item__\n *\n * A dropdown item populates the dropdown menu with items. Every item should be inside a dropdown item group.\n *\n * - [Examples](https://atlassian.design/components/dropdown-item/examples)\n * - [Code](https://atlassian.design/components/dropdown-item/code)\n * - [Usage](https://atlassian.design/components/dropdown-item/usage)\n */\nvar DropdownMenuItem = function DropdownMenuItem(props) {\n  var component = props.component,\n      elemBefore = props.elemBefore,\n      elemAfter = props.elemAfter,\n      _props$shouldTitleWra = props.shouldTitleWrap,\n      shouldTitleWrap = _props$shouldTitleWra === void 0 ? true : _props$shouldTitleWra,\n      _props$shouldDescript = props.shouldDescriptionWrap,\n      shouldDescriptionWrap = _props$shouldDescript === void 0 ? true : _props$shouldDescript,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var itemRef = useRegisterItemWithFocusManager();\n\n  if (component) {\n    return /*#__PURE__*/React.createElement(CustomItem, _extends({\n      component: component,\n      iconBefore: elemBefore,\n      iconAfter: elemAfter,\n      shouldTitleWrap: shouldTitleWrap,\n      shouldDescriptionWrap: shouldDescriptionWrap\n    }, rest));\n  } else if (props.href) {\n    return /*#__PURE__*/React.createElement(LinkItem, _extends({\n      href: props.href,\n      iconBefore: elemBefore,\n      iconAfter: elemAfter,\n      role: \"menuitem\",\n      ref: itemRef,\n      shouldTitleWrap: shouldTitleWrap,\n      shouldDescriptionWrap: shouldDescriptionWrap\n    }, rest));\n  } else {\n    return /*#__PURE__*/React.createElement(ButtonItem, _extends({\n      role: \"menuitem\",\n      iconBefore: elemBefore,\n      iconAfter: elemAfter,\n      ref: itemRef,\n      shouldTitleWrap: shouldTitleWrap,\n      shouldDescriptionWrap: shouldDescriptionWrap\n    }, rest));\n  }\n};\n\nexport default DropdownMenuItem;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"style\", \"imageRef\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React from 'react';\nvar imgStyle = {\n  position: 'absolute',\n  left: '50%',\n  top: '50%',\n  objectFit: 'contain',\n  imageOrientation: 'none'\n};\nexport var ImageComponent = function ImageComponent(props) {\n  var style = props.style,\n      imageRef = props.imageRef,\n      otherProps = _objectWithoutProperties(props, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"img\", _extends({}, otherProps, {\n    ref: imageRef,\n    style: _objectSpread(_objectSpread({}, imgStyle), style)\n  }));\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Component } from 'react';\nimport { ImageComponent } from './styled';\nimport { getCssFromImageOrientation, isRotated } from '../imageMetaData';\nexport var MediaImage = /*#__PURE__*/function (_Component) {\n  _inherits(MediaImage, _Component);\n\n  var _super = _createSuper(MediaImage);\n\n  function MediaImage(props) {\n    var _this;\n\n    _classCallCheck(this, MediaImage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function (e) {\n      if (!_this.imageRef || !_this.imageRef.current) {\n        return;\n      }\n\n      var onImageLoad = _this.props.onImageLoad;\n\n      _this.setState({\n        isImageLoaded: true,\n        imgWidth: _this.imageRef.current.naturalWidth,\n        imgHeight: _this.imageRef.current.naturalHeight\n      });\n\n      if (onImageLoad) {\n        onImageLoad(e.currentTarget);\n      }\n    });\n\n    _this.imageRef = /*#__PURE__*/React.createRef();\n    _this.state = {\n      isImageLoaded: false,\n      imgWidth: 0,\n      imgHeight: 0,\n      parentWidth: Infinity,\n      parentHeight: Infinity\n    };\n    return _this;\n  } // TODO FIL-4060 we need to check whether the dataURI changes in UNSAFE_componentWillReceiveProps()\n  // and if it does recalculate the image height and width\n\n\n  _createClass(MediaImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var parent = ReactDOM.findDOMNode(this).parentElement;\n\n      if (!parent) {\n        return;\n      }\n\n      var _parent$getBoundingCl = parent.getBoundingClientRect(),\n          width = _parent$getBoundingCl.width,\n          height = _parent$getBoundingCl.height;\n\n      this.setState({\n        parentWidth: width,\n        parentHeight: height\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          crop = _this$props.crop,\n          stretch = _this$props.stretch,\n          dataURI = _this$props.dataURI,\n          previewOrientation = _this$props.previewOrientation,\n          crossOrigin = _this$props.crossOrigin,\n          onImageError = _this$props.onImageError,\n          _this$props$alt = _this$props.alt,\n          alt = _this$props$alt === void 0 ? '' : _this$props$alt,\n          loading = _this$props.loading,\n          forceSyncDisplay = _this$props.forceSyncDisplay;\n      var _this$state = this.state,\n          parentWidth = _this$state.parentWidth,\n          parentHeight = _this$state.parentHeight,\n          imgWidth = _this$state.imgWidth,\n          imgHeight = _this$state.imgHeight,\n          isImageLoaded = _this$state.isImageLoaded;\n      var parentRatio = parentWidth / parentHeight;\n      var imgRatio = imgWidth / imgHeight;\n      var percentSize = '100%';\n      /*\n        Cover strategy means we want to full entire screen with an image. Here is an example:\n            Image           Container   Result ( - is what cropped out)\n               \n                     \n        ->        => \n                     \n               \n       \n      */\n\n      var isCoverStrategy = crop;\n      /*\n        Fit strategy means image is fully inside container even if there is empty space left.\n        Here is an example:\n                Image            Container     Result\n               \n                     \n        ->        => \n                     \n                     \n               \n       */\n\n      var isFitStrategy = !crop;\n      var isImageRotated = isRotated(previewOrientation || 1);\n      /*\n        When photo has orientation of 90deg or 270deg (stored in EXIF meta data)\n        things get very tricky. Let me go through an two examples to explain how we deal with that:\n         Example #1:\n         Image comes in as    ________    But it needs to be     \n        horizontal picture  |        |   displayed as 750x1000        \n        of 1000x750         |        |   because orientation          \n                            |________|   say it must be rotated       \n                                         90 degrees                   \n                                                                \n         Container is smaller, and has dimensions of 100x200.\n        So, input parameters are:\n          parentWidth: 100\n          parentHeight: 200\n          imgWidth: 1000\n          imgHeight: 750\n          crop: true (means we want to cover)\n          stretch: true\n          previewOrientation: 6\n         To see what true value of isImageMoreLandscapyThanContainer is we need to flip imgRatio.\n        Since initial value is 1000/750 = 1.33 we can just do 1/1.3333 = 0.75.\n         In this situation final values will be:\n          imgRatio: 0.75\n          parentRatio: 0.5\n          isCoverStrategy: true\n          isFitStrategy: false\n          isImageRotated: true\n          isImageMoreLandscapyThanContainer: true\n          isStretchingAllowed: true\n         According to this variables state css will become:\n          height: 100%;\n         Now here is what going to happened.\n        FIRST, Browser will put an image with 1000x750 (NB! Not yet rotated) into the box 100x200\n        and apply height: 100%.\n           This will scale an image according to rules of proportions:\n          (https://en.wikipedia.org/wiki/Cross-multiplication#Rule_of_Three)\n          (orig img height) -> (scaled down img height)\n          750px             -> 200px  (is === container height, since `height: 100%`)\n          (orig img width)  -> (scaled down img width)\n                           1000px            -> (200 x 1000) / 750 = 266.66px\n         266x200 image in\n         100x200 container.\n         And only NOW browser will apply rotate: 90deg and turn image around.\n        And we end up with this:\n            Where 200x266 image\n           in the 100x200 container.\n        \n        \n        \n        \n        \n        \n        \n         To combat this we will not make height: 100% but use ratio of an image.\n        In this case imgRatio is now 0.75 (after flipping)\n         New math will look like this:\n        (orig img height) -> (scaled down img height)\n        750px             -> (0.75 x 200px) = 150px (since `height: 75%`)\n        (orig img width)  -> (scaled down img width)\n        1000px            -> (150 x 1000) / 750 = 200px\n           Now 150x200 image\n          is in 100x200 container.\n        \n        \n        \n        \n         Unfortunately this is not over yet.\n           Example #2:\n         Input parameters:\n          parentWidth: 100\n          parentHeight: 200\n          imgWidth: 1000\n          imgHeight: 750\n          crop: false (means we want to fit)  <-- This is only changed parameter\n          stretch: true\n          previewOrientation: 6\n         Final variable values will be:\n          imgRatio: 0.75\n          parentRatio: 0.5\n          isCoverStrategy: false\n          isFitStrategy: true\n          isImageRotated: true\n          isImageMoreLandscapyThanContainer: true\n          isStretchingAllowed: true\n          According to this variables state css will become:\n          width: 100%;\n         FIRST, Browser will put an image with 1000x750 (NB! Not yet rotated) into the box 100x200\n        and apply width: 100%.\n           This will scale an image according to rules of proportions:\n          (https://en.wikipedia.org/wiki/Cross-multiplication#Rule_of_Three)\n          (orig img width)  -> (scaled down img width)\n          1000px            -> 100px (is === container width, since `width: 100%`)\n          (orig img height) -> (scaled down img height)\n          750px             -> (750x100) / 1000 = 75px\n        \n        \n            \n         100x75 image in\n         100x200 container.\n         Now browser will turn image 90degrees and we und up with:\n        \n                    75x100 image in\n            100x200 container\n          \n          \n          \n          \n                  \n        \n         This looks familiar, and you might want to try what we did before and apply 75% not 100%.\n        Unfortunately this will make it even worse. If you do calculation you will find out that\n        final result will be 75x56 image in 100x200 container. For this and one more specific\n        variables state we need to use original imgRatio for percent size. In this case it's 1.333, so\n        134%\n         New math will look like this:\n        (orig img width)  -> (scaled down img width)\n        1000px            -> (100px * 1.34) = 134px (since `width: 134%`)\n        (orig img height) -> (scaled down img height)\n        750px             -> (750x134) / 1000 = 100px\n         So, 100x134 image in 100x200 container.\n       */\n\n      if (isImageRotated) {\n        imgRatio = 1 / imgRatio;\n        percentSize = \"\".concat(Math.ceil(imgRatio * 100), \"%\");\n      }\n      /*\n        Here is an example of when isImageMoreLandscapyThanContainer is true:\n           Image      Container   OR   Image      Container\n         ________      _____          ____           __\n        |        | -> |     |        |    |   ->    |  |\n        |________|    |_____|        |    |         |  |\n                                     |    |         |  |\n                                     |    |         |  |\n                                     |____|         |__|\n         For false just swap \"Image\" and \"Container\" in the example above.\n       */\n\n\n      var isImageMoreLandscapyThanContainer = imgRatio > parentRatio;\n      var isImgLandscape = imgWidth > imgHeight;\n      /*\n      This is two cases we need to cover as described in Example #2 above, but only for rotated landscape images.\n       */\n\n      if (isImageRotated && isImgLandscape) {\n        if (isFitStrategy || isImageMoreLandscapyThanContainer || isCoverStrategy && !isImageMoreLandscapyThanContainer) {\n          percentSize = \"\".concat(Math.ceil(1 / imgRatio * 100), \"%\");\n        }\n      }\n      /*\n        When isStretchingAllowed is false image is as big as it is, but as small as container\n        (according to strategy - cover or fit).\n        isStretchingAllowed is true if image is bigger then container.\n       */\n\n\n      var isStretchingAllowed = stretch;\n      /*\n        We do not want to show image until we finish deciding on sizing strategy.\n        Though if it is a \"fit\" strategy (and image hasn't been rotated) we can display it right away,\n        since it doesn't depend on isImageMoreLandscapyThanContainer nor it will change when isStretchingAllowed\n        changes it's value after imgRatio and parentRatio get defined.\n        The reason for exclude isImageRotated is that we need to calculate percentSize variable\n        and we can do that only when image is loaded (and we have image size)\n       */\n\n      var showImage = forceSyncDisplay || isImageLoaded || isFitStrategy && !isImageRotated;\n      var style = {\n        transform: 'translate(-50%, -50%)'\n      };\n\n      if (isStretchingAllowed) {\n        if (isFitStrategy && isImageMoreLandscapyThanContainer) {\n          /*\n            Image matches its width to container's and height scales accordingly.\n               Image       Container       Result\n                             \n                              \n              ->           => \n                              \n                              \n                             \n           */\n          style.width = percentSize;\n        } else if (isFitStrategy && !isImageMoreLandscapyThanContainer) {\n          /*\n            Image matches its height to container's and width scales accordingly.\n           */\n          style.height = percentSize;\n        } else if (isCoverStrategy && isImageMoreLandscapyThanContainer) {\n          /*\n            In order to cover whole container guaranteed (even in expense of stretching)\n            image matches its height to container's. Width scales accordingly and crops out sides.\n                Image       Container    Result ( - is what cropped out)\n                             \n                              \n              ->           => \n                              \n                              \n                             \n           */\n          style.height = percentSize;\n        } else if (isCoverStrategy && !isImageMoreLandscapyThanContainer) {\n          style.width = percentSize;\n        }\n      } else {\n        if (isFitStrategy) {\n          /*\n            We want image to be as wide and as height as container but not bigger then it's own size.\n               Image       Container       Result\n                     \n                              \n                              \n             ->            => \n                              \n                                           \n                                  \n            And if image is smaller it doesn't change its size\n               Image       Container       Result\n                             \n                                                 \n                                 \n              ->            =>   \n                                 \n                                 \n                                                 \n                             \n           */\n          style.maxWidth = percentSize;\n          style.maxHeight = percentSize;\n        } else if (isCoverStrategy && isImageMoreLandscapyThanContainer) {\n          /*\n            We want to fill container but we can't stretch an image if it's smaller then container.\n               Image            Container       Result\n                     \n                            \n                            \n             ->          => \n                     \n             \n            */\n          style.maxHeight = percentSize;\n        } else if (isCoverStrategy && !isImageMoreLandscapyThanContainer) {\n          style.maxWidth = percentSize;\n        }\n      }\n\n      if (!showImage) {\n        style.display = 'none';\n      }\n\n      if (previewOrientation && previewOrientation > 1) {\n        var transform = getCssFromImageOrientation(previewOrientation);\n        style.transform += \" \".concat(transform);\n      }\n\n      return /*#__PURE__*/React.createElement(ImageComponent, {\n        loading: loading,\n        \"data-testid\": \"media-image\",\n        draggable: false,\n        alt: alt,\n        style: style,\n        onLoad: this.onImageLoad,\n        onError: onImageError,\n        imageRef: this.imageRef,\n        src: dataURI,\n        crossOrigin: crossOrigin\n      });\n    }\n  }]);\n\n  return MediaImage;\n}(Component);\n\n_defineProperty(MediaImage, \"defaultProps\", {\n  crop: true,\n  stretch: false,\n  forceSyncDisplay: false\n});","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport React, { useRef, useEffect } from 'react';\nimport styled from '@emotion/styled';\nimport * as exenv from 'exenv';\nvar Wrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \";\\n\"])), function (_ref) {\n  var inline = _ref.inline;\n  return inline && 'display: inline;' || '';\n});\nWrapper.displayName = 'Ellipsify';\nexport var Ellipsify = function Ellipsify(_ref2) {\n  var text = _ref2.text,\n      lines = _ref2.lines,\n      endLength = _ref2.endLength,\n      inline = _ref2.inline,\n      testId = _ref2.testId;\n  var element = useRef(null);\n  useEffect(function () {\n    if (!element.current) {\n      return;\n    }\n\n    setEllipsis(element.current, {\n      lines: lines,\n      endLength: endLength\n    });\n  }, [element, lines, endLength]);\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    className: \"ellipsed-text\",\n    ref: element,\n    \"aria-label\": text,\n    inline: inline,\n    \"data-testid\": testId\n  }, text);\n};\n\nvar setEllipsis = function setEllipsis(element, props) {\n  var maximumLines = props.lines;\n  var height = element.getBoundingClientRect().height;\n  var text = element.textContent;\n  element.textContent = 'a';\n  var lineHeight = element.getBoundingClientRect().height;\n  var lineCount = height / lineHeight;\n  var maximumHeight = lineHeight * maximumLines;\n\n  if (lineCount <= maximumLines) {\n    element.textContent = text;\n    return;\n  }\n\n  var textContent = text;\n  var endLength = typeof props.endLength === 'number' && props.endLength >= 0 ? props.endLength : 8;\n  var beginningText = text.substr(0, text.length * maximumLines / lineCount - endLength);\n  var endText = text.substr(text.length - endLength, endLength);\n  element.textContent = textContent = \"\".concat(beginningText, \"...\").concat(endText);\n  var finalHeight = element.getBoundingClientRect().height;\n\n  if (finalHeight > maximumHeight) {\n    var adjustedBeginningText = beginningText.substr(0, beginningText.length - beginningText.length / maximumLines * 0.25);\n    textContent = \"\".concat(adjustedBeginningText, \"...\").concat(endText);\n  }\n\n  delayRun(function () {\n    return element.textContent = textContent;\n  });\n};\n\nvar timeout = function timeout(fn) {\n  return setTimeout(fn, 1);\n};\n\nvar delayRun = exenv.canUseDOM && window.requestAnimationFrame ? window.requestAnimationFrame : timeout;\nexport default Ellipsify;","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { Y200, P200, B300 } from '@atlaskit/theme/colors';\nvar typeToColorMap = {\n  image: Y200,\n  audio: P200,\n  video: '#ff7143',\n  doc: B300,\n  unknown: '#3dc7dc',\n  archive: '' // TODO [BMPT-389]: Remove this and use existing MediaTypeIcon in media-ui\n\n};\n\nvar getWrapperColor = function getWrapperColor(_ref) {\n  var type = _ref.type;\n  return typeToColorMap[type] || typeToColorMap.unknown;\n};\n\nexport var iconWrapperStyles = function iconWrapperStyles(props) {\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  color: \", \";\\n\"])), getWrapperColor(props));\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { iconWrapperStyles } from './styles';\nexport var IconWrapper = function IconWrapper(props) {\n  return jsx(\"div\", {\n    id: \"iconWrapper\",\n    css: iconWrapperStyles(props)\n  }, props.children);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport ImageIcon from '@atlaskit/icon/glyph/image';\nimport AudioIcon from '@atlaskit/icon/glyph/audio';\nimport ArchiveIcon from '@atlaskit/icon/glyph/media-services/zip';\nimport VideoIcon from '@atlaskit/icon/glyph/media-services/video';\nimport DocIcon from '@atlaskit/icon/glyph/document';\nimport UnknownIcon from '@atlaskit/icon/glyph/page';\nimport { IconWrapper } from './iconWrapper';\nvar icons = {\n  image: ImageIcon,\n  audio: AudioIcon,\n  video: VideoIcon,\n  doc: DocIcon,\n  unknown: UnknownIcon,\n  archive: ArchiveIcon\n};\nexport var MediaTypeIcon = /*#__PURE__*/function (_React$Component) {\n  _inherits(MediaTypeIcon, _React$Component);\n\n  var _super = _createSuper(MediaTypeIcon);\n\n  function MediaTypeIcon() {\n    _classCallCheck(this, MediaTypeIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MediaTypeIcon, [{\n    key: \"render\",\n    value: // TODO [BMPT-389]: Remove this and use existing MediaTypeIcon in media-ui\n    function render() {\n      var _this$props = this.props,\n          type = _this$props.type,\n          _this$props$size = _this$props.size,\n          size = _this$props$size === void 0 ? 'small' : _this$props$size,\n          className = _this$props.className;\n      var Icon = type && icons[type] || icons.unknown;\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        type: type || 'unknown'\n      }, /*#__PURE__*/React.createElement(Icon, {\n        label: \"media-type\",\n        size: size,\n        className: className\n      }));\n    }\n  }]);\n\n  return MediaTypeIcon;\n}(React.Component);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { size } from '@atlaskit/media-ui';\nexport var fileTypeIconStyles = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  float: left;\\n  margin-right: 6px;\\n  position: relative;\\n  top: 1px;\\n  img {\\n    \", \";\\n  }\\n\"])), size('12px !important'));","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { Component } from 'react';\nimport { MediaTypeIcon } from '../mediaTypeIcon';\nimport { fileTypeIconStyles } from './styles';\nvar fileTypeIconClass = 'file-type-icon';\nexport var FileIcon = /*#__PURE__*/function (_Component) {\n  _inherits(FileIcon, _Component);\n\n  var _super = _createSuper(FileIcon);\n\n  function FileIcon() {\n    _classCallCheck(this, FileIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FileIcon, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          mediaType = _this$props.mediaType,\n          iconUrl = _this$props.iconUrl,\n          style = _this$props.style;\n      var type = mediaType || 'unknown';\n      var defaultIcon = jsx(MediaTypeIcon, {\n        type: mediaType,\n        size: \"small\",\n        className: fileTypeIconClass\n      });\n      var icon = iconUrl ? jsx(\"img\", {\n        src: iconUrl,\n        className: \"custom-icon\",\n        alt: type\n      }) : defaultIcon;\n      return jsx(\"div\", {\n        css: fileTypeIconStyles,\n        style: style,\n        className: fileTypeIconClass\n      }, icon);\n    }\n  }]);\n\n  return FileIcon;\n}(Component);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nexport var errorIconWrapperStyles = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: flex;\\n  color: #ff991f;\\n\"])));","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { Component } from 'react';\nimport WarningIcon from '@atlaskit/icon/glyph/editor/warning';\nimport { errorIconWrapperStyles } from './styles';\nexport var ErrorIcon = /*#__PURE__*/function (_Component) {\n  _inherits(ErrorIcon, _Component);\n\n  var _super = _createSuper(ErrorIcon);\n\n  function ErrorIcon() {\n    _classCallCheck(this, ErrorIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ErrorIcon, [{\n    key: \"render\",\n    value: function render() {\n      var size = this.props.size;\n      return jsx(\"div\", {\n        css: errorIconWrapperStyles\n      }, jsx(WarningIcon, {\n        label: \"Error\",\n        size: size\n      }));\n    }\n  }]);\n\n  return ErrorIcon;\n}(Component);\n\n_defineProperty(ErrorIcon, \"defaultProps\", {\n  size: 'small'\n});","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport { css } from '@emotion/react';\nimport { fontFamily } from '@atlaskit/theme/constants';\nimport { fadeIn } from '@atlaskit/media-ui';\nexport { defaultTransitionDuration } from './config';\nexport { antialiased, borderRadiusLeft, capitalize, centerSelf, centerSelfX, centerSelfY, centerX, hexToRgb, rgba, spaceAround, transition, withAppearance } from './mixins';\nexport { easeOutCubic, easeOutExpo } from './easing';\nexport { spin } from './animations';\nexport var rootStyles = function rootStyles() {\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  box-sizing: border-box;\\n  font-family: \", \";\\n\\n  * {\\n    box-sizing: border-box;\\n  }\\n\"])), fontFamily());\n};\nexport var cardShadow = \"\\n  box-shadow: 0 1px 1px rgba(9, 30, 66, 0.2), 0 0 1px 0 rgba(9, 30, 66, 0.24);\\n\";\nexport var fadeinImageStyles = function fadeinImageStyles() {\n  return css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \";\\n\"])), fadeIn);\n};\nexport default rootStyles;","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport { css } from '@emotion/react';\nimport { N500, N0 } from '@atlaskit/theme/colors';\nimport { borderRadius, size, center } from '@atlaskit/media-ui';\nimport { rootStyles } from '../../styles';\nexport var wrapperStyles = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  display: flex;\\n  position: relative;\\n  line-height: 0;\\n\"])), rootStyles());\nexport var CardActionIconButtonVariant;\n\n(function (CardActionIconButtonVariant) {\n  CardActionIconButtonVariant[\"default\"] = \"default\";\n  CardActionIconButtonVariant[\"filled\"] = \"filled\";\n})(CardActionIconButtonVariant || (CardActionIconButtonVariant = {}));\n\nvar getVariantStyles = function getVariantStyles(variant) {\n  return variant === 'filled' ? \"\\n    background: \".concat(N0, \";\\n    margin-right: 8px;\\n    opacity: 0.8;\\n\\n    &:last-child {\\n      margin-right: 0;\\n    }\\n\\n    &:hover {\\n      opacity: 0.6;\\n    }\\n  \") : \"\\n    &:hover {\\n      background-color: rgba(9, 30, 66, 0.06);\\n    }\\n  \";\n};\n\nexport var cardActionButtonStyles = function cardActionButtonStyles(_ref) {\n  var variant = _ref.variant;\n  return css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n    \", \"\\n    color: \", \";\\n\\n  &:hover {\\n    cursor: pointer;\\n  }\\n\\n  \", \"\\n\"])), center, borderRadius, size(26), N500, getVariantStyles(variant));\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { cardActionButtonStyles } from './styles';\nexport var CardActionButton = function CardActionButton(props) {\n  return jsx(\"div\", {\n    id: \"cardActionButton\",\n    \"data-testid\": \"media-card-primary-action\",\n    css: cardActionButtonStyles(props),\n    style: props.style,\n    onClick: props.onClick,\n    onMouseDown: props.onMouseDown\n  }, props.children);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { CardActionButton } from './cardActionButton';\nexport var CardActionIconButton = /*#__PURE__*/function (_Component) {\n  _inherits(CardActionIconButton, _Component);\n\n  var _super = _createSuper(CardActionIconButton);\n\n  function CardActionIconButton() {\n    var _this;\n\n    _classCallCheck(this, CardActionIconButton);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseDown\", function (event) {\n      event.preventDefault();\n    });\n\n    return _this;\n  }\n\n  _createClass(CardActionIconButton, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          icon = _this$props.icon,\n          triggerColor = _this$props.triggerColor,\n          onClick = _this$props.onClick,\n          variant = _this$props.variant;\n      return /*#__PURE__*/React.createElement(CardActionButton, {\n        onClick: onClick,\n        onMouseDown: this.onMouseDown,\n        style: {\n          color: triggerColor\n        },\n        variant: variant\n      }, icon);\n    } // this is to prevent currently focused text to loose cursor on clicking card action\n    // this does not prevent onclick behavior\n\n  }]);\n\n  return CardActionIconButton;\n}(Component);","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/wrapNativeSuper\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nexport var MediaCardError = /*#__PURE__*/function (_Error) {\n  _inherits(MediaCardError, _Error);\n\n  var _super = _createSuper(MediaCardError);\n\n  function MediaCardError(primaryReason, secondaryError) {\n    var _this;\n\n    _classCallCheck(this, MediaCardError);\n\n    _this = _super.call(this, primaryReason); // https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget\n\n    _this.primaryReason = primaryReason;\n    _this.secondaryError = secondaryError;\n    Object.setPrototypeOf(_assertThisInitialized(_this), (this instanceof MediaCardError ? this.constructor : void 0).prototype); // https://v8.dev/docs/stack-trace-api\n\n    if ('captureStackTrace' in Error) {\n      Error.captureStackTrace(_assertThisInitialized(_this), this instanceof MediaCardError ? this.constructor : void 0);\n    }\n\n    return _this;\n  }\n\n  return _createClass(MediaCardError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var LocalPreviewError = /*#__PURE__*/function (_MediaCardError) {\n  _inherits(LocalPreviewError, _MediaCardError);\n\n  var _super2 = _createSuper(LocalPreviewError);\n\n  function LocalPreviewError(primaryReason, secondaryError) {\n    var _this2;\n\n    _classCallCheck(this, LocalPreviewError);\n\n    _this2 = _super2.call(this, primaryReason, secondaryError);\n    _this2.primaryReason = primaryReason;\n    _this2.secondaryError = secondaryError;\n    return _this2;\n  }\n\n  return _createClass(LocalPreviewError);\n}(MediaCardError);\nexport var RemotePreviewError = /*#__PURE__*/function (_MediaCardError2) {\n  _inherits(RemotePreviewError, _MediaCardError2);\n\n  var _super3 = _createSuper(RemotePreviewError);\n\n  function RemotePreviewError(primaryReason, secondaryError) {\n    var _this3;\n\n    _classCallCheck(this, RemotePreviewError);\n\n    _this3 = _super3.call(this, primaryReason, secondaryError);\n    _this3.primaryReason = primaryReason;\n    _this3.secondaryError = secondaryError;\n    return _this3;\n  }\n\n  return _createClass(RemotePreviewError);\n}(MediaCardError);\nexport var SsrPreviewError = /*#__PURE__*/function (_MediaCardError3) {\n  _inherits(SsrPreviewError, _MediaCardError3);\n\n  var _super4 = _createSuper(SsrPreviewError);\n\n  function SsrPreviewError(primaryReason, secondaryError) {\n    var _this4;\n\n    _classCallCheck(this, SsrPreviewError);\n\n    _this4 = _super4.call(this, primaryReason, secondaryError);\n    _this4.primaryReason = primaryReason;\n    _this4.secondaryError = secondaryError;\n    return _this4;\n  }\n\n  return _createClass(SsrPreviewError);\n}(MediaCardError);\nexport var getImageLoadPrimaryReason = function getImageLoadPrimaryReason(source) {\n  switch (source) {\n    case 'cache-remote':\n      return 'cache-remote-uri';\n\n    case 'cache-local':\n      return 'cache-local-uri';\n\n    case 'external':\n      return 'external-uri';\n\n    case 'local':\n      return 'local-uri';\n\n    case 'remote':\n      return 'remote-uri';\n    // This fail reason will come from a bug, most likely.\n\n    default:\n      return \"unknown-uri\";\n  }\n};\nexport var ImageLoadError = /*#__PURE__*/function (_MediaCardError4) {\n  _inherits(ImageLoadError, _MediaCardError4);\n\n  var _super5 = _createSuper(ImageLoadError);\n\n  function ImageLoadError(source) {\n    _classCallCheck(this, ImageLoadError);\n\n    return _super5.call(this, getImageLoadPrimaryReason(source));\n  }\n\n  return _createClass(ImageLoadError);\n}(MediaCardError);\nexport function isMediaCardError(err) {\n  return err instanceof MediaCardError;\n}\nexport var isLocalPreviewError = function isLocalPreviewError(err) {\n  return err instanceof LocalPreviewError;\n};\nexport var isRemotePreviewError = function isRemotePreviewError(err) {\n  return err instanceof RemotePreviewError;\n};\nexport var isUnsupportedLocalPreviewError = function isUnsupportedLocalPreviewError(err) {\n  return isMediaCardError(err) && err.primaryReason === 'local-preview-unsupported';\n};\nexport function isImageLoadError(err) {\n  return err instanceof ImageLoadError;\n} // In a try/catch statement, the error caught is the type of any.\n// We can use this helper to ensure that the error handled is the type of MediaCardError if unsure\n\nexport var ensureMediaCardError = function ensureMediaCardError(primaryReason, error) {\n  return isMediaCardError(error) ? error : new MediaCardError(primaryReason, error);\n};\nexport var isUploadError = function isUploadError(error) {\n  return error && error.primaryReason === 'upload';\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { getMediaClientErrorReason, isRequestError } from '@atlaskit/media-client';\nimport { ANALYTICS_MEDIA_CHANNEL, filterFeatureFlagNames, filterFeatureFlagKeysAllProducts } from '@atlaskit/media-common';\nimport { createAndFireEvent } from '@atlaskit/analytics-next';\nimport { isMediaCardError } from '../errors';\nvar relevantFlags = {\n  newCardExperience: true,\n  captions: true,\n  timestampOnVideo: true,\n  observedWidth: true,\n  mediaInline: false,\n  folderUploads: false,\n  mediaUploadApiV2: true\n};\nexport var LOGGED_FEATURE_FLAGS = filterFeatureFlagNames(relevantFlags);\nexport var LOGGED_FEATURE_FLAG_KEYS = filterFeatureFlagKeysAllProducts(relevantFlags);\nexport var getFileAttributes = function getFileAttributes(metadata, fileStatus) {\n  return {\n    fileMediatype: metadata.mediaType,\n    fileMimetype: metadata.mimeType,\n    fileId: metadata.id,\n    fileSize: metadata.size,\n    fileStatus: fileStatus\n  };\n};\nexport var getRenderPreviewableCardPayload = function getRenderPreviewableCardPayload(fileAttributes) {\n  return {\n    eventType: 'screen',\n    action: 'viewed',\n    actionSubject: 'mediaCardRenderScreen',\n    name: 'mediaCardRenderScreen',\n    attributes: {\n      type: fileAttributes.fileMediatype,\n      fileAttributes: fileAttributes\n    }\n  };\n};\nexport var getRenderCommencedEventPayload = function getRenderCommencedEventPayload(fileAttributes, performanceAttributes) {\n  return {\n    eventType: 'operational',\n    action: 'commenced',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes\n    }\n  };\n};\nexport var getRenderSucceededEventPayload = function getRenderSucceededEventPayload(fileAttributes, performanceAttributes, ssrReliability) {\n  return {\n    eventType: 'operational',\n    action: 'succeeded',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'success',\n      ssrReliability: ssrReliability\n    }\n  };\n};\nexport var getRenderFailedExternalUriPayload = function getRenderFailedExternalUriPayload(fileAttributes, performanceAttributes) {\n  return {\n    eventType: 'operational',\n    action: 'failed',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'fail',\n      failReason: 'external-uri'\n    }\n  };\n};\nexport var getRenderErrorFailReason = function getRenderErrorFailReason(error) {\n  if (isMediaCardError(error)) {\n    return error.primaryReason;\n  } else {\n    return 'nativeError';\n  }\n};\nexport var getRenderErrorErrorReason = function getRenderErrorErrorReason(error) {\n  if (isMediaCardError(error) && error.secondaryError) {\n    var mediaClientReason = getMediaClientErrorReason(error.secondaryError);\n\n    if (mediaClientReason !== 'unknown') {\n      return mediaClientReason;\n    }\n  }\n\n  return 'nativeError';\n};\nexport var getRenderErrorErrorDetail = function getRenderErrorErrorDetail(error) {\n  if (isMediaCardError(error) && error.secondaryError) {\n    return error.secondaryError.message;\n  } else {\n    return error.message;\n  }\n};\nexport var getRenderErrorRequestMetadata = function getRenderErrorRequestMetadata(error) {\n  if (isMediaCardError(error) && !!error.secondaryError && isRequestError(error.secondaryError)) {\n    return error.secondaryError.metadata;\n  }\n};\nexport var extractErrorInfo = function extractErrorInfo(error) {\n  return {\n    failReason: getRenderErrorFailReason(error),\n    error: getRenderErrorErrorReason(error),\n    errorDetail: getRenderErrorErrorDetail(error)\n  };\n};\nexport var getRenderErrorEventPayload = function getRenderErrorEventPayload(fileAttributes, performanceAttributes, error, ssrReliability) {\n  return {\n    eventType: 'operational',\n    action: 'failed',\n    actionSubject: 'mediaCardRender',\n    attributes: _objectSpread(_objectSpread({\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'fail'\n    }, extractErrorInfo(error)), {}, {\n      request: getRenderErrorRequestMetadata(error),\n      ssrReliability: ssrReliability\n    })\n  };\n};\nexport var getRenderFailedFileStatusPayload = function getRenderFailedFileStatusPayload(fileAttributes, performanceAttributes, ssrReliability) {\n  return {\n    eventType: 'operational',\n    action: 'failed',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'fail',\n      failReason: 'failed-processing',\n      ssrReliability: ssrReliability\n    }\n  };\n};\nexport var getCopiedFilePayload = function getCopiedFilePayload(fileId) {\n  return {\n    eventType: 'ui',\n    action: 'copied',\n    actionSubject: 'file',\n    actionSubjectId: fileId,\n    attributes: {}\n  };\n};\nexport function fireMediaCardEvent(payload, createAnalyticsEvent) {\n  if (createAnalyticsEvent) {\n    var event = createAnalyticsEvent(payload);\n    event.fire(ANALYTICS_MEDIA_CHANNEL);\n  }\n}\nexport var createAndFireMediaCardEvent = function createAndFireMediaCardEvent(payload) {\n  return createAndFireEvent(ANALYTICS_MEDIA_CHANNEL)(payload);\n};","import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nvar _excluded = [\"triggerRef\"];\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport MoreIcon from '@atlaskit/icon/glyph/more';\nimport DropdownMenu, { DropdownItemGroup, DropdownItem } from '@atlaskit/dropdown-menu';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { createAndFireMediaCardEvent } from '../analytics';\nimport { CardActionButton } from './cardActionButton';\n\nvar CardActionButtonWithProps = function CardActionButtonWithProps(props) {\n  return /*#__PURE__*/React.createElement(CardActionButton, props);\n};\n\nvar CardActionButtonWithAnalytics = withAnalyticsEvents({\n  onClick: createAndFireMediaCardEvent({\n    eventType: 'ui',\n    action: 'clicked',\n    actionSubject: 'button',\n    actionSubjectId: 'mediaCardDropDownMenu',\n    attributes: {}\n  })\n})(CardActionButtonWithProps);\n\n// Trick applied due to the lack of props type of DropdownItem\nvar DropdownItemWithProps = function DropdownItemWithProps(props) {\n  return /*#__PURE__*/React.createElement(DropdownItem, _extends({\n    \"data-testid\": \"media-card-actions-menu-item\"\n  }, props));\n};\n\nvar createDropdownItemWithAnalytics = function createDropdownItemWithAnalytics(action, index) {\n  var label = action.label,\n      handler = action.handler;\n  var DropdownItemWithAnalytics = withAnalyticsEvents({\n    onClick: createAndFireMediaCardEvent({\n      eventType: 'ui',\n      action: 'clicked',\n      actionSubject: 'button',\n      actionSubjectId: 'mediaCardDropDownMenuItem',\n      attributes: {\n        label: label\n      }\n    })\n  })(DropdownItemWithProps);\n  return /*#__PURE__*/React.createElement(DropdownItemWithAnalytics, {\n    key: index,\n    onClick: handler\n  }, label);\n};\n\nexport var CardActionsDropdownMenu = /*#__PURE__*/function (_Component) {\n  _inherits(CardActionsDropdownMenu, _Component);\n\n  var _super = _createSuper(CardActionsDropdownMenu);\n\n  function CardActionsDropdownMenu() {\n    _classCallCheck(this, CardActionsDropdownMenu);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CardActionsDropdownMenu, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          actions = _this$props.actions,\n          triggerColor = _this$props.triggerColor,\n          onOpenChange = _this$props.onOpenChange,\n          triggerVariant = _this$props.triggerVariant;\n\n      if (actions.length > 0) {\n        return /*#__PURE__*/React.createElement(DropdownMenu, {\n          testId: \"media-card-actions-menu\",\n          onOpenChange: onOpenChange,\n          trigger: function trigger(_ref) {\n            var triggerRef = _ref.triggerRef,\n                providedProps = _objectWithoutProperties(_ref, _excluded);\n\n            return /*#__PURE__*/React.createElement(CardActionButtonWithAnalytics, _extends({\n              variant: triggerVariant,\n              style: {\n                color: triggerColor\n              },\n              ref: triggerRef\n            }, providedProps), /*#__PURE__*/React.createElement(MoreIcon, {\n              label: \"more\"\n            }));\n          }\n        }, /*#__PURE__*/React.createElement(DropdownItemGroup, null, actions.map(createDropdownItemWithAnalytics)));\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return CardActionsDropdownMenu;\n}(Component);","import React from 'react';\nexport function PreventClickThrough(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(\"span\", {\n    onClick: function onClick(event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }, children);\n}\nexport var createPreventClickThrough = function createPreventClickThrough(onClick) {\n  return function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n    onClick();\n  };\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { Component } from 'react';\nimport { CardActionIconButton } from './cardActionIconButton';\nimport { wrapperStyles } from './styles';\nimport { CardActionsDropdownMenu } from './cardActionsDropdownMenu';\nimport { PreventClickThrough } from '../preventClickThrough';\nimport { createAndFireMediaCardEvent } from '../analytics';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\n\nvar CardActionIconButtonWithProps = function CardActionIconButtonWithProps(props) {\n  return jsx(CardActionIconButton, props);\n};\n\nexport var CardActionsView = /*#__PURE__*/function (_Component) {\n  _inherits(CardActionsView, _Component);\n\n  var _super = _createSuper(CardActionsView);\n\n  function CardActionsView() {\n    _classCallCheck(this, CardActionsView);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CardActionsView, [{\n    key: \"render\",\n    value: function render() {\n      var actions = this.props.actions;\n\n      if (!actions.length) {\n        return null;\n      }\n\n      var primaryAction = actions.find(actionWithIcon);\n      var otherActions = actions.filter(actionNotEqualTo(primaryAction));\n      return jsx(PreventClickThrough, null, jsx(\"div\", {\n        css: wrapperStyles\n      }, primaryAction ? this.renderActionIconButton(primaryAction, true) : null, this.renderOtherActionButtons(otherActions)));\n    }\n  }, {\n    key: \"renderActionIconButton\",\n    value: function renderActionIconButton(action, isPrimary) {\n      var _this$props = this.props,\n          triggerColor = _this$props.triggerColor,\n          variant = _this$props.variant;\n      var icon = action.icon,\n          handler = action.handler,\n          label = action.label;\n      var actionSubjectId = isPrimary ? 'mediaCardPrimaryActionButton' : 'mediaCardSecondaryActionButton';\n      var CardActionIconButtonWithAnalytics = withAnalyticsEvents({\n        onClick: createAndFireMediaCardEvent({\n          eventType: 'ui',\n          action: 'clicked',\n          actionSubject: 'button',\n          actionSubjectId: actionSubjectId,\n          attributes: {\n            label: label\n          }\n        })\n      })(CardActionIconButtonWithProps);\n      return jsx(CardActionIconButtonWithAnalytics, {\n        icon: icon,\n        triggerColor: triggerColor,\n        onClick: function onClick() {\n          return handler();\n        },\n        variant: variant\n      });\n    }\n  }, {\n    key: \"renderOtherActionButtons\",\n    value: function renderOtherActionButtons(actions) {\n      if (actions.length === 0) {\n        return null;\n      } else {\n        var _this$props2 = this.props,\n            triggerColor = _this$props2.triggerColor,\n            onToggle = _this$props2.onToggle,\n            variant = _this$props2.variant;\n        var firstActionWithIcon = actions.find(actionWithIcon);\n        var otherActions = actions.filter(actionNotEqualTo(firstActionWithIcon));\n\n        if (firstActionWithIcon && otherActions.length === 0) {\n          return this.renderActionIconButton(firstActionWithIcon, false);\n        } else {\n          return jsx(CardActionsDropdownMenu, {\n            actions: actions,\n            triggerColor: triggerColor,\n            onOpenChange: onToggle,\n            triggerVariant: variant\n          });\n        }\n      }\n    }\n  }]);\n\n  return CardActionsView;\n}(Component);\n\nfunction actionWithIcon(action) {\n  return !!action.icon;\n}\n\nfunction actionNotEqualTo(otherAction) {\n  return function (action) {\n    return action !== otherAction;\n  };\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12;\n\n/**\n * Everything about this file change is just wrong.\n * Mostly because we do bad things with classes.\n * This is all wrong and hopefully will be removed from existence with card v3,\n * so please dont be too sad about all this!\n */\nimport { css } from '@emotion/react';\nimport { borderRadius, size, ellipsis, absolute } from '@atlaskit/media-ui';\nimport { themed } from '@atlaskit/theme/components';\nimport * as colors from '@atlaskit/theme/colors';\nimport { rgba, centerX, easeOutCubic, transition, antialiased } from '../../../styles';\nexport var tickBoxStyles = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n  background-color: \", \";\\n  position: absolute;\\n  top: 8px;\\n  right: 8px;\\n  border-radius: 20px;\\n  color: #798599; /* TODO FIL-3884: Align color with new design */\\n  display: flex;\\n  opacity: 0;\\n\\n  &.selected {\\n    opacity: 1;\\n    color: white;\\n    background-color: #0052cc; /* TODO FIL-3884: Align with tickbox icons */\\n  }\\n\\n  /* Enforce dimensions of \\\"tick\\\" icon */\\n  svg {\\n    position: absolute;\\n    width: 14px;\\n  }\\n\"])), size(14), transition(), rgba('#ffffff', 0.5));\n\nvar getOverlayStyles = function getOverlayStyles(_ref) {\n  var hasError = _ref.hasError,\n      noHover = _ref.noHover;\n\n  if (hasError || noHover) {\n    return \"\\n        cursor: default;\\n\\n        &:hover {\\n          background: transparent;\\n        }\\n      \";\n  }\n};\n\nexport var overlayStyles = function overlayStyles(props) {\n  return css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n  \", \" display: flex;\\n  justify-content: space-between;\\n  flex-direction: column;\\n  background: transparent;\\n  transition: 0.3s background \", \", 0.3s border-color;\\n  padding: 16px;\\n\\n  \", \"\\n  &:not(.persistent):hover, &.active {\\n    .top-row {\\n      .title {\\n        color: \", \";\\n      }\\n    }\\n\\n    .bottom-row {\\n      .delete-btn {\\n        display: flex;\\n      }\\n    }\\n  }\\n\\n  &.noHover:hover {\\n    .top-row {\\n      .title {\\n        color: \", \";\\n      }\\n    }\\n  }\\n\\n  .file-type-icon {\\n    display: block;\\n  }\\n\\n  &:not(.persistent) {\\n    &:not(.error, .noHover):hover {\\n      background-color: \", \";\\n    }\\n\\n    &.selectable {\\n      &.selected {\\n        background-color: \", \";\\n\\n        &:hover {\\n          /* TODO FIL-3884 add new overlay with rgba(colors.N900, 0.16) */\\n        }\\n\\n        .title,\\n        .bottom-row,\\n        .file-size,\\n        .more-btn {\\n          color: \", \";\\n        }\\n      }\\n    }\\n  }\\n\\n  &.persistent {\\n    &:not(.active) {\\n      overflow: hidden;\\n    }\\n\\n    .top-row {\\n      .title {\\n        transition: opacity 0.3s;\\n        opacity: 0;\\n        color: white;\\n        visibility: hidden;\\n      }\\n    }\\n\\n    .bottom-row {\\n      opacity: 0;\\n      transition: transform 0.2s, opacity 0.5s;\\n      /* This is the height of the overlay footer, needs to be present now since the parent uses flex and 100% doesn't look right anymore */\\n      transform: translateY(35px);\\n\\n      .file-type-icon {\\n        display: none;\\n      }\\n\\n      .file-size {\\n        color: white;\\n        display: none;\\n      }\\n\\n      .more-btn {\\n        color: \", \";\\n        display: none;\\n\\n        &:hover {\\n          background-color: rgba(9, 30, 66, 0.2);\\n        }\\n      }\\n\\n      .delete-btn {\\n        display: none;\\n\\n        &:hover {\\n          background-color: rgba(9, 30, 66, 0.2);\\n        }\\n      }\\n    }\\n\\n    &:hover,\\n    &.active {\\n      background-color: \", \";\\n\\n      .title {\\n        opacity: 1;\\n        visibility: visible;\\n      }\\n\\n      .file-type-icon,\\n      .file-size {\\n        display: block;\\n      }\\n\\n      .more-btn {\\n        \", \" color: \", \";\\n      }\\n\\n      .delete-btn {\\n        display: flex;\\n      }\\n\\n      .bottom-row {\\n        opacity: 1;\\n        transform: translateY(0);\\n      }\\n    }\\n\\n    /* Selectable */\\n    &.selectable {\\n      &:hover {\\n        .tickbox {\\n          opacity: 1;\\n        }\\n      }\\n\\n      &.selected {\\n        .tickbox {\\n          background-color: \", \" !important;\\n          border-color: \", \" !important;\\n          color: white;\\n        }\\n      }\\n    }\\n  }\\n\\n  &.error {\\n    .top-row {\\n      overflow: visible;\\n    }\\n    &:hover,\\n    &.active {\\n      .top-row {\\n        .title {\\n          color: \", \";\\n        }\\n      }\\n    }\\n  }\\n\"])), size(), absolute(), borderRadius, easeOutCubic, getOverlayStyles(props), colors.B400, colors.N800, rgba(colors.N900, 0.06), colors.B200, colors.N0, colors.N0, rgba(colors.N900, 0.5), centerX, colors.N0, colors.B200, colors.B200, colors.N800);\n};\nexport var errorLineStyles = css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  height: 24px;\\n  display: flex;\\n  align-items: center;\\n\"])));\nexport var leftColumnStyles = css(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  position: relative;\\n  box-sizing: border-box;\\n  vertical-align: middle;\\n\"])));\nexport var topRowStyles = css(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\"])));\nexport var bottomRowStyles = css(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  height: 16px;\\n\"])));\nexport var rightColumnStyles = css(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\"])));\nexport var errorMessageStyles = css(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  \", \" display: inline-block;\\n  vertical-align: middle;\\n  font-weight: bold;\\n  color: \", \";\\n  font-size: 12px;\\n  line-height: 15px;\\n  overflow: hidden;\\n  max-width: 'calc(100% - 24px)';\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  margin: auto 3px;\\n\"])), antialiased, colors.N70);\nexport var altWrapperStyles = css(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  \", \"\\n  font-weight: normal;\\n\"])), errorMessageStyles);\nexport var titleWrapperStyles = function titleWrapperStyles(theme) {\n  return css(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n  box-sizing: border-box;\\n  word-wrap: break-word;\\n  color: \", \";\\n  font-size: 12px;\\n  line-height: 18px;\\n\"])), themed({\n    light: colors.N800,\n    dark: colors.DN900\n  })({\n    theme: theme\n  }));\n};\nexport var subtitleStyles = css(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n  \", \" font-size: 12px;\\n  color: #5e6c84;\\n\"])), ellipsis('100px'));\nexport var metadataStyles = css(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n\"])));","import { borderRadius } from '@atlaskit/theme/constants';\nimport { defaultTransitionDuration } from './config';\nexport var centerX = \"\\n  display: flex;\\n  justify-content: center;\\n\";\nexport var antialiased = \"\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n\";\nexport var centerSelfY = \"\\n  position: absolute;\\n  top: 50%;\\n  transform: translateY(-50%);\\n\";\nexport var centerSelfX = \"\\n  position: absolute;\\n  left: 50%;\\n  transform: translateX(-50%);\\n\";\nexport var centerSelf = \"\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n\";\nexport var borderRadiusLeft = \"\\n  border-top-left-radius: \".concat(borderRadius(), \";\\n  border-bottom-left-radius: \").concat(borderRadius(), \";\\n\");\nexport var spaceAround = \"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-around;\\n\";\nexport var transition = function transition() {\n  var propertyName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n  return \"\\n  transition: \".concat(propertyName, \" \").concat(defaultTransitionDuration, \";\\n\");\n};\nexport var hexToRgb = function hexToRgb(hex) {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? \"\".concat(parseInt(result[1], 16), \",\").concat(parseInt(result[2], 16), \",\").concat(parseInt(result[3], 16)) : null;\n};\nexport var rgba = function rgba(hex, opacity) {\n  return \"rgba(\".concat(hexToRgb(hex), \", \").concat(opacity, \")\");\n};\nexport var capitalize = \"\\n  &::first-letter {\\n    text-transform: uppercase;\\n  }\\n\";\nexport var withAppearance = function withAppearance(styleMap) {\n  return function (_ref) {\n    var appearance = _ref.appearance;\n    return appearance && styleMap[appearance] || '';\n  };\n};","export var defaultTransitionDuration = '.3s';","export var easeOutCubic = 'cubic-bezier(0.215, 0.61, 0.355, 1)';\nexport var easeOutExpo = 'cubic-bezier(0.19, 1, 0.22, 1)';","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { useGlobalTheme } from '@atlaskit/theme/components';\nimport { altWrapperStyles, errorMessageStyles, metadataStyles, overlayStyles, titleWrapperStyles } from './styles';\nexport var Overlay = function Overlay(props) {\n  var hasError = props.hasError,\n      noHover = props.noHover,\n      className = props.className;\n  return jsx(\"div\", {\n    css: overlayStyles({\n      hasError: hasError,\n      noHover: noHover\n    }),\n    className: className\n  }, props.children);\n};\nexport var ErrorMessage = function ErrorMessage(props) {\n  return jsx(\"div\", {\n    css: errorMessageStyles\n  }, props.children);\n};\nexport var AltWrapper = function AltWrapper(props) {\n  return jsx(\"div\", {\n    css: altWrapperStyles\n  }, props.children);\n};\nexport var TitleWrapper = function TitleWrapper(props) {\n  var theme = useGlobalTheme();\n  return jsx(\"div\", {\n    css: titleWrapperStyles(theme),\n    className: 'title'\n  }, props.children);\n};\nexport var Metadata = function Metadata(props) {\n  return jsx(\"div\", {\n    css: metadataStyles,\n    className: props.className\n  }, props.children);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport React from 'react';\nimport { Component } from 'react';\nimport cx from 'classnames';\nimport TickIcon from '@atlaskit/icon/glyph/check';\nimport { Ellipsify } from '@atlaskit/media-ui'; // We dont require things directly from \"utils\" to avoid circular dependencies\n\nimport { FileIcon } from '../../../utils/fileIcon';\nimport { ErrorIcon } from '../../../utils/errorIcon';\nimport CardActions from '../../../utils/cardActions';\nimport { tickBoxStyles, errorLineStyles, leftColumnStyles, topRowStyles, bottomRowStyles, rightColumnStyles, subtitleStyles } from './styles';\nimport { Metadata, AltWrapper, ErrorMessage, TitleWrapper, Overlay } from './cardOverlayComponents';\n\nvar resolveTitleText = function resolveTitleText(cardStatus, mediaName, error, selected) {\n  // don't show title if error\n  // also when card is uploading + selected, title is already showing outside of the overlay\n  if (error || !mediaName || cardStatus === 'uploading' && !selected) {\n    return '';\n  }\n\n  return mediaName;\n};\n\nexport var CardOverlay = /*#__PURE__*/function (_Component) {\n  _inherits(CardOverlay, _Component);\n\n  var _super = _createSuper(CardOverlay);\n\n  function CardOverlay(props) {\n    var _this;\n\n    _classCallCheck(this, CardOverlay);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onMenuToggle\", function (attrs) {\n      _this.setState({\n        isMenuExpanded: attrs.isOpen\n      });\n    });\n\n    _this.state = {\n      isMenuExpanded: false\n    };\n    return _this;\n  }\n\n  _createClass(CardOverlay, [{\n    key: \"wrapperClassNames\",\n    get: function get() {\n      var _this$props = this.props,\n          error = _this$props.error,\n          noHover = _this$props.noHover,\n          selectable = _this$props.selectable,\n          selected = _this$props.selected,\n          mediaType = _this$props.mediaType,\n          persistent = _this$props.persistent;\n      var isMenuExpanded = this.state.isMenuExpanded;\n      return error ? cx('overlay', {\n        error: error,\n        active: isMenuExpanded\n      }) : cx('overlay', mediaType, {\n        active: isMenuExpanded,\n        selectable: selectable,\n        selected: selected,\n        // Yes, you right. We put \"persistent\" class when it is NOT persistent. \n        persistent: !persistent,\n        noHover: noHover\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          cardStatus = _this$props2.cardStatus,\n          error = _this$props2.error,\n          noHover = _this$props2.noHover,\n          mediaName = _this$props2.mediaName,\n          persistent = _this$props2.persistent,\n          selected = _this$props2.selected,\n          actions = _this$props2.actions;\n      var titleText = resolveTitleText(cardStatus, mediaName, error, selected);\n      var menuTriggerColor = !persistent ? 'white' : undefined;\n      return jsx(Overlay, {\n        hasError: !!error,\n        noHover: noHover,\n        className: this.wrapperClassNames\n      }, jsx(\"div\", {\n        css: topRowStyles,\n        className: 'top-row'\n      }, this.errorLine(), jsx(TitleWrapper, null, titleText ? jsx(Ellipsify, {\n        testId: \"media-card-file-name\",\n        text: titleText,\n        lines: 2\n      }) : null), this.tickBox()), jsx(\"div\", {\n        css: bottomRowStyles,\n        className: 'bottom-row'\n      }, jsx(\"div\", {\n        css: leftColumnStyles\n      }, this.bottomLeftColumn()), jsx(\"div\", {\n        css: rightColumnStyles\n      }, actions ? jsx(CardActions, {\n        actions: actions,\n        onToggle: this.onMenuToggle,\n        triggerColor: menuTriggerColor\n      }) : null)));\n    }\n  }, {\n    key: \"errorLine\",\n    value: function errorLine() {\n      var _this$props3 = this.props,\n          error = _this$props3.error,\n          alt = _this$props3.alt;\n      return error && jsx(React.Fragment, null, jsx(\"div\", {\n        css: errorLineStyles\n      }, jsx(ErrorIcon, null), jsx(ErrorMessage, null, error)), alt && jsx(\"div\", {\n        css: errorLineStyles\n      }, jsx(AltWrapper, null, alt)));\n    }\n  }, {\n    key: \"tickBox\",\n    value: function tickBox() {\n      var _this$props4 = this.props,\n          selected = _this$props4.selected,\n          selectable = _this$props4.selectable;\n      var tick = jsx(TickIcon, {\n        label: \"tick\"\n      });\n      var className = cx('tickbox', {\n        selected: selected\n      });\n      return selectable && jsx(\"div\", {\n        css: tickBoxStyles,\n        className: className\n      }, tick);\n    }\n  }, {\n    key: \"bottomLeftColumn\",\n    value: function bottomLeftColumn() {\n      var error = this.props.error;\n\n      if (!error) {\n        var _this$props5 = this.props,\n            mediaType = _this$props5.mediaType,\n            subtitle = _this$props5.subtitle,\n            icon = _this$props5.icon;\n        var classNames = cx('metadata');\n        var fileIcon = mediaType || icon ? jsx(FileIcon, {\n          mediaType: mediaType,\n          iconUrl: icon\n        }) : null;\n        var subtitleEl = subtitle ? jsx(\"div\", {\n          css: subtitleStyles,\n          className: \"file-size\"\n        }, subtitle) : null;\n        return jsx(\"div\", null, jsx(Metadata, {\n          className: classNames\n        }, fileIcon, subtitleEl));\n      }\n    }\n  }, {\n    key: \"removeBtnClick\",\n    value: function removeBtnClick(handler) {\n      return function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        handler();\n      };\n    }\n  }]);\n\n  return CardOverlay;\n}(Component);\n\n_defineProperty(CardOverlay, \"defaultProps\", {\n  actions: [],\n  mediaName: ''\n});","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9;\n\nimport { css } from '@emotion/react';\nimport { absolute, borderRadius, size } from '@atlaskit/media-ui';\nimport { themed } from '@atlaskit/theme/components';\nimport { N20, DN50, N0 } from '@atlaskit/theme/colors';\nimport { rootStyles, cardShadow } from '../../styles';\nimport { getSelectedBorderStyle } from '../../styles/getSelectedBorderStyle';\n\nvar getShadowAttribute = function getShadowAttribute(props) {\n  var disableOverlay = props.disableOverlay;\n  return disableOverlay ? '' : cardShadow;\n};\n\nvar getBackgroundColor = function getBackgroundColor(props) {\n  var mediaType = props.mediaType;\n  return \"background: \".concat(mediaType === 'image' ? 'transparent' : themed({\n    light: N20,\n    dark: DN50\n  })(props), \";\");\n};\n\nexport var wrapperStyles = function wrapperStyles(props) {\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n  \", \"\\n  \", \"\\n\\n  line-height: normal;\\n  position: relative;\\n\\n  \", \"\\n\\n  \", \" .wrapper {\\n    \", \";\\n    display: block;\\n    height: inherit;\\n    position: relative;\\n\\n    .img-wrapper {\\n      position: relative;\\n      width: inherit;\\n      height: inherit;\\n      overflow: hidden;\\n      display: block;\\n      \", \"\\n    }\\n  }\\n\"])), rootStyles(), getShadowAttribute(props), borderRadius, getBackgroundColor(props), getSelectedBorderStyle(props), size(), borderRadius, borderRadius);\n};\nexport var playIconWrapperStyles = css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: white;\\n\\n  /* we want to override default icon size and hover state */\\n  &:hover > * {\\n    width: 64px;\\n    height: 64px;\\n  }\\n\"])));\nexport var playIconBackgroundStyles = css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  background: rgba(23, 43, 77, 0.7);\\n  border-radius: 100%;\\n  padding: 10px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition-property: width, height;\\n  transition-duration: 0.1s;\\n  width: 56px;\\n  height: 56px;\\n\"])));\nvar bodyHeight = 26;\nexport var progressBarWrapperStyles = css(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n\"])));\nexport var overlayStyles = css(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n  border-radius: inherit;\\n  background-color: rgba(9, 30, 66, 0.5);\\n\"])), absolute(), size());\nexport var titleStyles = css(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  \", \" width: 100%;\\n  padding: 8px;\\n  color: \", \";\\n  font-size: 12px;\\n  line-height: 18px;\\n  word-wrap: break-word;\\n\"])), absolute(), N0);\nexport var bodyStyles = css(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  padding: 8px;\\n  color: \", \";\\n\"])), N0);\nexport var progressWrapperStyles = css(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n\\n  /*\\n    force the height to always be 20px (the height of the cancel icon),\\n    so that the height of the progress bar doesn't jump when cards with\\n    and without a cancel icon are rendered side-by-side.\\n  */\\n  height: \", \"px;\\n\\n  /*\\n    vertically center the progress bar within the 20px, keeping the progress bar full width\\n  */\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n\"])), bodyHeight);\nexport var cardActionsWrapperStyles = css(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  margin-left: 4px;\\n  /*\\n    button must appear above overlay\\n   */\\n  z-index: 2;\\n\"])));","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { borderRadius } from '@atlaskit/media-ui';\nexport var progressWrapperStyles = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \" z-index: 30;\\n  overflow: hidden;\\n  background-color: rgba(255, 255, 255, 0.3);\\n\\n  .progressBar {\\n    width: 0%;\\n    height: 3px;\\n    transition: width 0.25s ease-in;\\n    background-color: white;\\n  }\\n\"])), borderRadius);","import { isMimeTypeSupportedByBrowser } from '@atlaskit/media-client';\nexport var shouldDisplayImageThumbnail = function shouldDisplayImageThumbnail(cardStatus, mediaItemType, dataURI, mediaType, mimeType) {\n  if (mediaType === 'doc' || !mimeType && mediaItemType === 'file') {\n    return false;\n  }\n\n  if (dataURI) {\n    return mediaItemType === 'external-image' || mimeType && isMimeTypeSupportedByBrowser(mimeType) || cardStatus === 'complete' || cardStatus === 'loading-preview';\n  }\n\n  return false;\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { Component } from 'react';\nimport { progressWrapperStyles } from './styles';\nexport var ProgressBar = /*#__PURE__*/function (_Component) {\n  _inherits(ProgressBar, _Component);\n\n  var _super = _createSuper(ProgressBar);\n\n  function ProgressBar() {\n    _classCallCheck(this, ProgressBar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ProgressBar, [{\n    key: \"render\",\n    value: function render() {\n      if (typeof this.props.progress !== 'number') {\n        return null;\n      }\n\n      var progress = Math.min(1, Math.max(0, this.props.progress));\n      var progressBarStyle = {\n        width: \"\".concat(progress * 100, \"%\")\n      };\n      return jsx(\"div\", {\n        css: progressWrapperStyles\n      }, jsx(\"div\", {\n        className: 'progressBar',\n        style: progressBarStyle\n      }));\n    }\n  }]);\n\n  return ProgressBar;\n}(Component);","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { useGlobalTheme } from '@atlaskit/theme/components';\nimport { fileCardImageViewSelectedSelector, fileCardImageViewSelector } from './classnames';\nimport { playIconWrapperStyles, progressBarWrapperStyles, wrapperStyles } from './styles';\nexport var CardImageViewWrapper = function CardImageViewWrapper(props) {\n  var disableOverlay = props.disableOverlay,\n      selectable = props.selectable,\n      selected = props.selected,\n      mediaType = props.mediaType,\n      mediaName = props.mediaName,\n      status = props.status,\n      progress = props.progress;\n  var theme = useGlobalTheme();\n  return jsx(\"div\", {\n    id: \"cardImageViewWrapper\",\n    \"data-testid\": \"media-file-card-view\",\n    \"data-test-media-name\": mediaName,\n    \"data-test-status\": status,\n    \"data-test-progress\": progress,\n    \"data-test-selected\": selected ? true : undefined,\n    css: wrapperStyles({\n      theme: theme,\n      disableOverlay: disableOverlay,\n      selectable: selectable,\n      selected: selected,\n      mediaType: mediaType\n    }),\n    className: \"\".concat(fileCardImageViewSelector, \" \").concat(selected ? fileCardImageViewSelectedSelector : '')\n  }, props.children);\n};\nexport var PlayIconWrapper = function PlayIconWrapper(props) {\n  return jsx(\"div\", {\n    css: playIconWrapperStyles\n  }, props.children);\n};\nexport var ProgressBarWrapper = function ProgressBarWrapper(props) {\n  return jsx(\"div\", {\n    css: progressBarWrapperStyles\n  }, props.children);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport React from 'react';\nimport { Component } from 'react';\nimport { Ellipsify, MediaImage } from '@atlaskit/media-ui';\nimport VidPlayIcon from '@atlaskit/icon/glyph/vid-play';\nimport { CardOverlay } from './cardOverlay';\nimport { bodyStyles, cardActionsWrapperStyles, overlayStyles, progressWrapperStyles, titleStyles, playIconBackgroundStyles } from './styles';\nimport { CardLoading } from '../../utils/lightCards/cardLoading';\nimport { shouldDisplayImageThumbnail } from '../../utils/shouldDisplayImageThumbnail';\nimport { ProgressBar } from '../../utils/progressBar';\nimport CardActions from '../../utils/cardActions';\nimport { CardImageViewWrapper, PlayIconWrapper, ProgressBarWrapper } from './cardImageViewWrapper';\nexport var FileCardImageView = /*#__PURE__*/function (_Component) {\n  _inherits(FileCardImageView, _Component);\n\n  var _super = _createSuper(FileCardImageView);\n\n  function FileCardImageView() {\n    var _this;\n\n    _classCallCheck(this, FileCardImageView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"wasThumbnailDisplayed\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCardContents\", function () {\n      var _this$props = _this.props,\n          status = _this$props.status,\n          mediaType = _this$props.mediaType,\n          fileSize = _this$props.fileSize;\n\n      if (status === 'error') {\n        return _this.renderErrorContents();\n      } else if (status === 'failed-processing') {\n        return _this.renderFailedContents();\n      } // If a video has no errors/failed processing, we want to be able to play it\n      // immediately, even if there's no image preview\n\n\n      var isZeroSize = fileSize === '' && ['processing', 'loading-preview'].includes(status);\n\n      if (mediaType !== 'video' && !_this.isFileCardImageReadyForDisplay && !isZeroSize) {\n        return _this.renderLoadingContents();\n      }\n\n      return _this.renderSuccessCardContents();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderLoadingContents\", function () {\n      return jsx(\"div\", {\n        className: \"wrapper\"\n      }, jsx(\"div\", {\n        className: \"img-wrapper\"\n      }, jsx(CardLoading, null)));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderErrorContents\", function () {\n      var _this$props2 = _this.props,\n          status = _this$props2.status,\n          error = _this$props2.error,\n          alt = _this$props2.alt,\n          mediaName = _this$props2.mediaName,\n          mediaType = _this$props2.mediaType,\n          actions = _this$props2.actions,\n          fileSize = _this$props2.fileSize;\n      return jsx(React.Fragment, null, jsx(\"div\", {\n        className: \"wrapper\"\n      }), jsx(CardOverlay, {\n        cardStatus: status,\n        error: error,\n        persistent: true,\n        mediaName: mediaName,\n        mediaType: mediaType,\n        alt: alt,\n        subtitle: fileSize,\n        actions: actions\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFailedContents\", function () {\n      var _this$props3 = _this.props,\n          status = _this$props3.status,\n          mediaName = _this$props3.mediaName,\n          mediaType = _this$props3.mediaType,\n          actions = _this$props3.actions,\n          fileSize = _this$props3.fileSize;\n      return jsx(React.Fragment, null, jsx(\"div\", {\n        className: \"wrapper\"\n      }), jsx(CardOverlay, {\n        cardStatus: status,\n        noHover: true,\n        persistent: true,\n        mediaName: mediaName,\n        mediaType: mediaType,\n        subtitle: fileSize,\n        actions: actions\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderUploadingCardOverlay\", function () {\n      var _this$props4 = _this.props,\n          status = _this$props4.status,\n          mediaName = _this$props4.mediaName,\n          mediaType = _this$props4.mediaType,\n          dataURI = _this$props4.dataURI,\n          selectable = _this$props4.selectable,\n          selected = _this$props4.selected;\n      var isPersistent = mediaType === 'doc' || !dataURI;\n      return jsx(CardOverlay, {\n        cardStatus: status,\n        persistent: isPersistent,\n        mediaName: mediaName,\n        selectable: selectable,\n        selected: selected\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderPlayButton\", function () {\n      var _this$props5 = _this.props,\n          status = _this$props5.status,\n          mediaItemType = _this$props5.mediaItemType,\n          mediaType = _this$props5.mediaType,\n          mimeType = _this$props5.mimeType,\n          selectable = _this$props5.selectable,\n          dataURI = _this$props5.dataURI;\n\n      if (mediaType !== 'video') {\n        return null;\n      }\n\n      if (selectable && !shouldDisplayImageThumbnail(status, mediaItemType, dataURI, mediaType, mimeType)) {\n        return null;\n      }\n\n      return jsx(PlayIconWrapper, null, jsx(\"div\", {\n        css: playIconBackgroundStyles\n      }, jsx(VidPlayIcon, {\n        testId: \"media-card-play-button\",\n        label: \"play\",\n        size: \"large\"\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function () {\n      var _this$props6 = _this.props,\n          onImageLoad = _this$props6.onImageLoad,\n          cardPreview = _this$props6.cardPreview;\n      onImageLoad && onImageLoad(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function () {\n      var _this$props7 = _this.props,\n          onImageError = _this$props7.onImageError,\n          cardPreview = _this$props7.cardPreview;\n      onImageError && onImageError(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMediaImage\", function () {\n      var _this$props8 = _this.props,\n          status = _this$props8.status,\n          mediaItemType = _this$props8.mediaItemType,\n          dataURI = _this$props8.dataURI,\n          mediaType = _this$props8.mediaType,\n          mimeType = _this$props8.mimeType,\n          previewOrientation = _this$props8.previewOrientation,\n          onDisplayImage = _this$props8.onDisplayImage,\n          alt = _this$props8.alt;\n\n      if (!shouldDisplayImageThumbnail(status, mediaItemType, dataURI, mediaType, mimeType)) {\n        return null;\n      }\n\n      if (!_this.wasThumbnailDisplayed && onDisplayImage && mediaType === 'image') {\n        onDisplayImage();\n        _this.wasThumbnailDisplayed = true;\n      }\n\n      return jsx(MediaImage, {\n        dataURI: dataURI,\n        alt: alt,\n        crop: _this.isCropped,\n        stretch: _this.isStretched,\n        previewOrientation: previewOrientation,\n        onImageLoad: _this.onImageLoad,\n        onImageError: _this.onImageError\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderProgressBar\", function () {\n      var _this$props9 = _this.props,\n          mediaName = _this$props9.mediaName,\n          progress = _this$props9.progress,\n          actions = _this$props9.actions,\n          status = _this$props9.status;\n\n      if (status !== 'uploading') {\n        return null;\n      }\n\n      return jsx(ProgressBarWrapper, null, jsx(\"div\", {\n        css: overlayStyles\n      }, jsx(\"div\", {\n        css: titleStyles\n      }, jsx(Ellipsify, {\n        testId: \"media-card-file-name\",\n        text: mediaName || '',\n        lines: 2\n      })), jsx(\"div\", {\n        css: bodyStyles\n      }, jsx(\"div\", {\n        css: progressWrapperStyles\n      }, jsx(ProgressBar, {\n        progress: progress\n      })), jsx(\"div\", {\n        css: cardActionsWrapperStyles\n      }, actions ? jsx(CardActions, {\n        actions: actions,\n        triggerColor: \"white\"\n      }) : null))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSuccessCardContents\", function () {\n      var _this$props10 = _this.props,\n          disableOverlay = _this$props10.disableOverlay,\n          selectable = _this$props10.selectable,\n          status = _this$props10.status;\n      var overlay = null;\n\n      if (!disableOverlay) {\n        if (status === 'uploading') {\n          if (selectable) {\n            overlay = _this.renderUploadingCardOverlay();\n          }\n        } else {\n          overlay = _this.renderSuccessCardOverlay();\n        }\n      }\n\n      return jsx(\"div\", {\n        className: \"wrapper\"\n      }, jsx(\"div\", {\n        className: \"img-wrapper\"\n      }, _this.renderMediaImage(), _this.renderProgressBar(), _this.renderPlayButton()), overlay);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSuccessCardOverlay\", function () {\n      var _this$props11 = _this.props,\n          status = _this$props11.status,\n          mediaName = _this$props11.mediaName,\n          mediaType = _this$props11.mediaType,\n          fileSize = _this$props11.fileSize,\n          dataURI = _this$props11.dataURI,\n          selectable = _this$props11.selectable,\n          selected = _this$props11.selected,\n          actions = _this$props11.actions;\n      var isPersistent = mediaType === 'doc' || !dataURI;\n      return jsx(CardOverlay, {\n        cardStatus: status,\n        persistent: isPersistent,\n        mediaName: mediaName,\n        mediaType: mediaType,\n        selectable: selectable,\n        selected: selected,\n        subtitle: fileSize,\n        actions: actions\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(FileCardImageView, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props12 = this.props,\n          disableOverlay = _this$props12.disableOverlay,\n          selectable = _this$props12.selectable,\n          selected = _this$props12.selected,\n          mediaType = _this$props12.mediaType,\n          progress = _this$props12.progress,\n          status = _this$props12.status,\n          mediaName = _this$props12.mediaName;\n      return jsx(CardImageViewWrapper, {\n        mediaName: mediaName,\n        status: status,\n        progress: progress,\n        disableOverlay: disableOverlay,\n        selectable: selectable,\n        selected: selected,\n        mediaType: mediaType\n      }, this.renderCardContents());\n    }\n  }, {\n    key: \"isFileCardImageReadyForDisplay\",\n    get: function get() {\n      var _this$props13 = this.props,\n          dataURI = _this$props13.dataURI,\n          status = _this$props13.status;\n      return !!dataURI || !['loading', 'processing', 'loading-preview'].includes(status);\n    }\n  }, {\n    key: \"isCropped\",\n    get: function get() {\n      var resizeMode = this.props.resizeMode;\n      return resizeMode === 'crop';\n    }\n  }, {\n    key: \"isStretched\",\n    get: function get() {\n      var resizeMode = this.props.resizeMode;\n      return resizeMode === 'stretchy-fit';\n    }\n  }]);\n\n  return FileCardImageView;\n}(Component);\n\n_defineProperty(FileCardImageView, \"defaultProps\", {\n  resizeMode: 'crop',\n  disableOverlay: false\n});","// Utility used to know if the integrator is using percentage values\nexport var isValidPercentageUnit = function isValidPercentageUnit(value) {\n  var valueString = \"\".concat(value);\n  return valueString[valueString.length - 1] === '%' && !isNaN(+valueString.slice(0, -1));\n};","export var getElementDimension = function getElementDimension(element, dimension) {\n  var dimensionValue = element.getBoundingClientRect()[dimension];\n  return Math.round(dimensionValue);\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nexport function attachDetailsToActions(actions, details) {\n  return actions.map(function (action) {\n    return _objectSpread(_objectSpread({}, action), {}, {\n      handler: function handler() {\n        action.handler({\n          type: 'file',\n          details: details\n        });\n      }\n    });\n  });\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { transition } from '../../../styles';\nimport { B200, N0, N100 } from '@atlaskit/theme/colors';\nexport var tickBoxClassName = 'media-card-tickbox';\nexport var tickboxFixedStyles = \"\\n  background-color: \".concat(N0, \";\\n  color: \").concat(N100, \";\\n\");\nexport var getSelectedStyles = function getSelectedStyles(selected) {\n  return selected ? \"background-color: \".concat(B200, \";\\n      color: white;\") : \"\";\n};\nexport var wrapperStyles = function wrapperStyles(selected) {\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  font-size: 14px;\\n  width: 14px;\\n  height: 14px;\\n  position: absolute;\\n  top: 7px;\\n  left: 7px;\\n  border-radius: 20px;\\n  color: transparent;\\n  /* Enforce dimensions and position of \\\"tick\\\" icon */\\n  span {\\n    display: block;\\n    svg {\\n      height: 14px;\\n    }\\n  }\\n  \", \"\\n\"])), transition(), getSelectedStyles(selected));\n};\nwrapperStyles.displayName = 'TickBoxWrapper';","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport { css } from '@emotion/react';\nimport { N0, N90A } from '@atlaskit/theme/colors';\nexport var playButtonClassName = 'media-card-play-button';\nexport var bkgClassName = 'play-icon-background';\nvar discSize = 48;\nvar discSizeHover = 56;\nexport var fixedPlayButtonStyles = \"\\n  .\".concat(bkgClassName, \" {\\n    width: \").concat(discSizeHover, \"px;\\n    height: \").concat(discSizeHover, \"px;\\n  }\\n\");\nexport var playButtonWrapperStyles = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: \", \";\\n  span {\\n    position: absolute;\\n  }\\n\"])), N0);\nexport var backgroundStyles = css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  transition-property: width, height;\\n  transition-duration: 0.1s;\\n  position: absolute;\\n  width: \", \"px;\\n  height: \", \"px;\\n  background: \", \";\\n  border-radius: 100%;\\n\"])), discSize, discSize, N90A);","import React from 'react';\nimport { FormattedMessage } from 'react-intl-next';\nimport { messages } from '@atlaskit/media-ui';\nexport var getErrorMessage = function getErrorMessage(status) {\n  return status === 'error' && /*#__PURE__*/React.createElement(FormattedMessage, messages.failed_to_load);\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _responsiveSettings;\n\nexport var Breakpoint;\n\n(function (Breakpoint) {\n  Breakpoint[\"SMALL\"] = \"small\";\n  Breakpoint[\"LARGE\"] = \"large\";\n})(Breakpoint || (Breakpoint = {}));\n\nexport var responsiveSettings = (_responsiveSettings = {}, _defineProperty(_responsiveSettings, Breakpoint.SMALL, {\n  fontSize: 11,\n  lineHeight: 14,\n  titleBox: {\n    verticalPadding: 4,\n    horizontalPadding: 8\n  }\n}), _defineProperty(_responsiveSettings, Breakpoint.LARGE, {\n  fontSize: 14,\n  lineHeight: 22,\n  titleBox: {\n    verticalPadding: 8,\n    horizontalPadding: 12\n  }\n}), _responsiveSettings);\nexport var getTitleBoxHeight = function getTitleBoxHeight(breakpoint) {\n  return (responsiveSettings[breakpoint].lineHeight + responsiveSettings[breakpoint].titleBox.verticalPadding) * 2;\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { borderRadius } from '@atlaskit/media-ui';\nimport { N60A } from '@atlaskit/theme/colors';\nimport { akEditorSelectedBoxShadow } from '@atlaskit/editor-shared-styles/consts';\nimport { getCSSUnitValue } from '../../utils/getCSSUnitValue';\nimport { getDefaultCardDimensions } from '../../utils/cardDimensions';\nimport { tickBoxClassName, tickboxFixedStyles } from './tickBox/styles';\nimport { fixedPlayButtonStyles, playButtonClassName } from './playButton/styles';\nimport { Breakpoint, responsiveSettings } from './common';\nvar breakpointSizes = [[Breakpoint.SMALL, 599], [Breakpoint.LARGE, Infinity]];\nexport var calcBreakpointSize = function calcBreakpointSize() {\n  var wrapperWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  var _ref = breakpointSizes.find(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        _breakpoint = _ref4[0],\n        limit = _ref4[1];\n\n    return wrapperWidth <= limit;\n  }) || [Breakpoint.SMALL],\n      _ref2 = _slicedToArray(_ref, 1),\n      breakpoint = _ref2[0];\n\n  return breakpoint;\n};\nexport var generateResponsiveStyles = function generateResponsiveStyles() {\n  var breakpoint = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Breakpoint.SMALL;\n  var setting = responsiveSettings[breakpoint];\n  return \"\\n    font-size: \".concat(setting.fontSize, \"px;\\n    line-height: \").concat(setting.lineHeight, \"px;\\n  \");\n};\nexport var getWrapperDimensions = function getWrapperDimensions(dimensions, appearance) {\n  var _ref5 = dimensions || {},\n      width = _ref5.width,\n      height = _ref5.height;\n\n  var _getDefaultCardDimens = getDefaultCardDimensions(appearance),\n      defaultWidth = _getDefaultCardDimens.width,\n      defaultHeight = _getDefaultCardDimens.height;\n\n  return \"\\n    width: \".concat(getCSSUnitValue(width || defaultWidth), \";\\n    max-width: 100%;\\n    height: \").concat(getCSSUnitValue(height || defaultHeight), \";\\n    max-height: 100%;\\n  \");\n}; // This is a trick to simulate the blue border without affecting the dimensions.\n// CSS outline has no 'radius', therefore we can't achieve the same effect with it\n\nexport var getWrapperShadow = function getWrapperShadow(disableOverlay, selected) {\n  var withOverlayShadow = !disableOverlay ? \"0 1px 1px \".concat(N60A, \", 0 0 1px 0 \").concat(N60A) : '';\n  var selectedShadow = selected ? akEditorSelectedBoxShadow : '';\n  var shadow = [selectedShadow, withOverlayShadow].filter(Boolean).join(', ');\n  return shadow ? \"box-shadow: \".concat(shadow, \";\") : '';\n};\nexport var getCursorStyle = function getCursorStyle(cursor) {\n  return !!cursor ? \"cursor: \".concat(cursor, \";\") : '';\n};\nexport var getClickablePlayButtonStyles = function getClickablePlayButtonStyles(isPlayButtonClickable) {\n  if (!isPlayButtonClickable) {\n    return '';\n  }\n\n  return \"\\n    &:hover .\".concat(playButtonClassName, \" {\\n      \").concat(fixedPlayButtonStyles, \"\\n    }\\n  \");\n};\nexport var getSelectableTickBoxStyles = function getSelectableTickBoxStyles(isTickBoxSelectable) {\n  if (!isTickBoxSelectable) {\n    return '';\n  }\n\n  return \"\\n    &:hover .\".concat(tickBoxClassName, \" {\\n      \").concat(tickboxFixedStyles, \"\\n    }\\n  \");\n};\nexport var cardImageContainerStyles = css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: flex;\\n  position: relative;\\n  max-width: 100%;\\n  width: 100%;\\n  height: 100%;\\n  max-height: 100%;\\n  overflow: hidden;\\n  \", \"\\n\"])), borderRadius);","import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { useEffect } from 'react';\nimport { MediaImage } from '@atlaskit/media-ui';\nimport { resizeModeToMediaImageProps } from '../../../utils/resizeModeToMediaImageProps';\nexport var ImageRenderer = function ImageRenderer(_ref) {\n  var cardPreview = _ref.cardPreview,\n      alt = _ref.alt,\n      resizeMode = _ref.resizeMode,\n      onImageLoad = _ref.onImageLoad,\n      onImageError = _ref.onImageError,\n      onDisplayImage = _ref.onDisplayImage,\n      mediaType = _ref.mediaType,\n      nativeLazyLoad = _ref.nativeLazyLoad,\n      forceSyncDisplay = _ref.forceSyncDisplay;\n  useEffect(function () {\n    // TODO: trigger accordingly with the succeeded event. This could be a breaking change\n    if (mediaType === 'image' && onDisplayImage) {\n      onDisplayImage();\n    }\n  }, [mediaType, onDisplayImage]);\n\n  var onLoad = function onLoad() {\n    onImageLoad && onImageLoad(cardPreview);\n  };\n\n  var onError = function onError() {\n    onImageError && onImageError(cardPreview);\n  };\n\n  return /*#__PURE__*/React.createElement(MediaImage, _extends({\n    dataURI: cardPreview.dataURI,\n    alt: alt,\n    previewOrientation: cardPreview.orientation,\n    onImageLoad: onLoad,\n    onImageError: onError,\n    loading: nativeLazyLoad ? 'lazy' : undefined,\n    forceSyncDisplay: forceSyncDisplay\n  }, resizeModeToMediaImageProps(resizeMode)));\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport React from 'react';\nimport styled from '@emotion/styled';\nvar truncateCommonStyles = \"\\n  display: inline-block;\\n  vertical-align: bottom;\\n  white-space: nowrap;\\n  overflow: hidden;\\n\";\nexport var TruncateLeft = styled.span(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  max-width: calc(100% - \", \"em);\\n  min-width: \", \";\\n  text-overflow: ellipsis;\\n\"])), truncateCommonStyles, function (_ref) {\n  var fontSizePX = _ref.fontSizePX,\n      endFixedChars = _ref.endFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * endFixedChars + 1;\n}, function (_ref2) {\n  var fontSizePX = _ref2.fontSizePX,\n      startFixedChars = _ref2.startFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * startFixedChars;\n});\nexport var TruncateRight = styled.span(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n  max-width: calc(100% - \", \");\\n  position: relative;\\n\"])), truncateCommonStyles, function (_ref3) {\n  var fontSizePX = _ref3.fontSizePX,\n      startFixedChars = _ref3.startFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * startFixedChars;\n});\nexport var calculateTruncation = function calculateTruncation(text, startFixedChars, endFixedChars) {\n  var minAllowedLength = endFixedChars + startFixedChars;\n\n  if (text.length <= minAllowedLength) {\n    // if no truncation return same value for left and right\n    return {\n      left: text,\n      right: text\n    };\n  }\n\n  var splitAt = text.length - endFixedChars;\n  var left = text.substr(0, splitAt);\n  var right = text.substr(splitAt);\n  return {\n    left: left,\n    right: right\n  };\n};\n\nvar fontFaceScaleFactor = function fontFaceScaleFactor(fontSizePX) {\n  return fontSizePX / 11 * 0.46;\n};\n/* factor for fontSize of 11px */\n\n\nexport var Truncate = function Truncate(_ref4) {\n  var text = _ref4.text,\n      _ref4$fontSizePX = _ref4.fontSizePX,\n      fontSizePX = _ref4$fontSizePX === void 0 ? 11 : _ref4$fontSizePX,\n      _ref4$startFixedChars = _ref4.startFixedChars,\n      startFixedChars = _ref4$startFixedChars === void 0 ? 4 : _ref4$startFixedChars,\n      _ref4$endFixedChars = _ref4.endFixedChars,\n      endFixedChars = _ref4$endFixedChars === void 0 ? 7 : _ref4$endFixedChars;\n\n  var _calculateTruncation = calculateTruncation(text, startFixedChars, endFixedChars),\n      leftStr = _calculateTruncation.left,\n      rightStr = _calculateTruncation.right;\n\n  if (leftStr === rightStr) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, text);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TruncateLeft, {\n    fontSizePX: fontSizePX,\n    startFixedChars: startFixedChars,\n    endFixedChars: endFixedChars\n  }, leftStr), /*#__PURE__*/React.createElement(TruncateRight, {\n    fontSizePX: fontSizePX,\n    startFixedChars: startFixedChars,\n    endFixedChars: endFixedChars\n  }, rightStr));\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\nimport { css } from '@emotion/react';\nimport { responsiveSettings, getTitleBoxHeight, Breakpoint } from '../common';\nimport { N0 } from '@atlaskit/theme/colors';\nimport { rgba } from '../../../styles/mixins';\n\nvar generateResponsiveStyles = function generateResponsiveStyles() {\n  var breakpoint = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Breakpoint.SMALL;\n  var setting = responsiveSettings[breakpoint];\n  var verticalPadding = setting.titleBox.verticalPadding;\n  var horizontalPadding = setting.titleBox.horizontalPadding;\n  var height = getTitleBoxHeight(breakpoint);\n  return \"height: \".concat(height, \"px;\\n    padding: \").concat(verticalPadding, \"px \").concat(horizontalPadding, \"px;\");\n};\n\nvar HEX_REGEX = /^#[0-9A-F]{6}$/i;\nexport var titleBoxWrapperStyles = function titleBoxWrapperStyles(_ref) {\n  var breakpoint = _ref.breakpoint,\n      titleBoxBgColor = _ref.titleBoxBgColor;\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  background-color: \", \";\\n  color: inherit;\\n  cursor: inherit;\\n  pointer-events: none;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  \", \"\\n\"])), rgba(titleBoxBgColor && HEX_REGEX.test(titleBoxBgColor) ? titleBoxBgColor : N0, 0.8), generateResponsiveStyles(breakpoint));\n};\ntitleBoxWrapperStyles.displayName = 'TitleBoxWrapper';\nvar infoStyles = \"white-space: nowrap;\\n  overflow: hidden;\";\nvar iconOverlapStyles = \"padding-right: 10px;\";\nexport var titleBoxHeaderStyles = function titleBoxHeaderStyles(_ref2) {\n  var hasIconOverlap = _ref2.hasIconOverlap;\n  return css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  font-weight: 600;\\n  \", \"\\n  \", \"\\n\"])), infoStyles, hasIconOverlap && iconOverlapStyles);\n};\ntitleBoxHeaderStyles.displayName = 'FailedTitleBoxHeader';\nexport var titleBoxFooterStyles = function titleBoxFooterStyles(_ref3) {\n  var hasIconOverlap = _ref3.hasIconOverlap;\n  return css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  text-overflow: ellipsis;\\n  \", \"\\n  \", \"\\n\"])), infoStyles, hasIconOverlap && iconOverlapStyles);\n};\ntitleBoxFooterStyles.displayName = 'TitleBoxFooter';\nexport var titleBoxIconStyles = css(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 4px;\\n  bottom: 0px;\\n\"])));\nexport var errorMessageWrapperStyles = css(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  span {\\n    vertical-align: middle;\\n    :nth-child(2) {\\n      margin-left: 4px;\\n      margin-right: 4px;\\n    }\\n  }\\n\"])));","export function resizeModeToMediaImageProps(resizeMode) {\n  return {\n    crop: resizeMode === 'crop',\n    stretch: resizeMode === 'stretchy-fit'\n  };\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { borderRadius } from '@atlaskit/media-ui';\nimport { rgba } from '../../../styles/mixins';\nimport { N0, N400 } from '@atlaskit/theme/colors';\nimport { Breakpoint, getTitleBoxHeight, responsiveSettings } from '../common';\nvar height = 3;\nvar padding = 1;\nvar width = 95; // %\n\nvar left = (100 - width) / 2; // %\n\nvar smallSizeSettings = {\n  marginBottom: 4\n};\nvar largeSizeSettings = {\n  marginBottom: 12\n};\nexport function generateResponsiveStyles(breakpoint, positionBottom, showOnTop) {\n  var multiplier = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  var setting = breakpoint === Breakpoint.SMALL ? smallSizeSettings : largeSizeSettings;\n  var marginPositionBottom = responsiveSettings[breakpoint].titleBox.verticalPadding;\n  var marginBottom = setting.marginBottom * multiplier + (positionBottom ? marginPositionBottom : getTitleBoxHeight(breakpoint));\n  return \"\\n    \".concat(showOnTop ? 'top' : 'bottom', \": \").concat(marginBottom, \"px\\n  \");\n}\n\nvar getStyledBarStylesBasedOnProps = function getStyledBarStylesBasedOnProps(_ref) {\n  var progress = _ref.progress,\n      breakpoint = _ref.breakpoint,\n      positionBottom = _ref.positionBottom,\n      showOnTop = _ref.showOnTop;\n  return \"\\n\".concat(borderRadius, \"\\noverflow: hidden;\\nposition: absolute;\\nwidth: \").concat(width, \"%;\\nleft: \").concat(left, \"%;\\nbackground-color: \").concat(rgba(N0, 0.8), \";\\nheight: \").concat(height + padding * 2, \"px;\\npadding: \").concat(padding, \"px;\\nbox-sizing: border-box;\\n\\n::before {\\n  content: '';\\n  width: \").concat(progress, \"%;\\n  height: 100%;\\n  background-color: \").concat(N400, \";\\n  \").concat(borderRadius, \"\\n  display: block;\\n}\\n\").concat(generateResponsiveStyles(breakpoint, positionBottom, showOnTop), \"\\n\");\n};\n\nexport var styledBarStyles = function styledBarStyles(props) {\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    \", \"\\n  \"])), getStyledBarStylesBasedOnProps(props));\n};\nstyledBarStyles.displayName = 'StyledProgressBar';","/** @jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { errorMessageWrapperStyles, titleBoxFooterStyles, titleBoxHeaderStyles, titleBoxIconStyles, titleBoxWrapperStyles } from './styles';\nexport var TitleBoxWrapper = function TitleBoxWrapper(props) {\n  var breakpoint = props.breakpoint,\n      titleBoxBgColor = props.titleBoxBgColor;\n  return jsx(\"div\", {\n    id: \"titleBoxWrapper\",\n    css: titleBoxWrapperStyles({\n      breakpoint: breakpoint,\n      titleBoxBgColor: titleBoxBgColor\n    })\n  }, props.children);\n};\nexport var TitleBoxHeader = function TitleBoxHeader(props) {\n  var hasIconOverlap = props.hasIconOverlap;\n  return jsx(\"div\", {\n    id: \"titleBoxHeader\",\n    css: titleBoxHeaderStyles({\n      hasIconOverlap: hasIconOverlap\n    })\n  }, props.children);\n};\nexport var TitleBoxFooter = function TitleBoxFooter(props) {\n  var hasIconOverlap = props.hasIconOverlap;\n  return jsx(\"div\", {\n    id: \"titleBoxFooter\",\n    css: titleBoxFooterStyles({\n      hasIconOverlap: hasIconOverlap\n    })\n  }, props.children);\n};\nexport var TitleBoxIcon = function TitleBoxIcon(props) {\n  return jsx(\"div\", {\n    id: \"titleBoxIcon\",\n    css: titleBoxIconStyles\n  }, props.children);\n};\nexport var ErrorMessageWrapper = function ErrorMessageWrapper(props) {\n  return jsx(\"div\", {\n    css: errorMessageWrapperStyles\n  }, props.children);\n};","import React from 'react';\nimport { injectIntl } from 'react-intl-next';\nimport LockFilledIcon from '@atlaskit/icon/glyph/lock-filled';\nimport { Truncate } from '@atlaskit/media-ui/truncateText';\nimport { formatDate } from '@atlaskit/media-ui/formatDate';\nimport { TitleBoxWrapper, TitleBoxFooter, TitleBoxHeader, TitleBoxIcon } from './titleBoxComponents';\nexport var FormattedDate = injectIntl(function (_ref) {\n  var timestamp = _ref.timestamp,\n      intl = _ref.intl;\n\n  var _ref2 = intl || {\n    locale: 'en'\n  },\n      _ref2$locale = _ref2.locale,\n      locale = _ref2$locale === void 0 ? 'en' : _ref2$locale;\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, formatDate(timestamp, locale));\n});\nexport var TitleBox = function TitleBox(_ref3) {\n  var name = _ref3.name,\n      createdAt = _ref3.createdAt,\n      breakpoint = _ref3.breakpoint,\n      titleBoxBgColor = _ref3.titleBoxBgColor,\n      titleBoxIcon = _ref3.titleBoxIcon;\n  return /*#__PURE__*/React.createElement(TitleBoxWrapper, {\n    breakpoint: breakpoint,\n    titleBoxBgColor: titleBoxBgColor\n  }, /*#__PURE__*/React.createElement(TitleBoxHeader, {\n    hasIconOverlap: !!titleBoxIcon && !createdAt\n  }, /*#__PURE__*/React.createElement(Truncate, {\n    text: name\n  })), createdAt ? /*#__PURE__*/React.createElement(TitleBoxFooter, {\n    hasIconOverlap: !!titleBoxIcon\n  }, /*#__PURE__*/React.createElement(FormattedDate, {\n    timestamp: createdAt\n  })) : null, titleBoxIcon === 'LockFilledIcon' && /*#__PURE__*/React.createElement(TitleBoxIcon, null, /*#__PURE__*/React.createElement(LockFilledIcon, {\n    label: \"\",\n    size: \"small\"\n  })));\n};","import React from 'react';\nimport { FormattedMessage } from 'react-intl-next';\nimport EditorWarningIcon from '@atlaskit/icon/glyph/editor/warning';\nimport { messages } from '@atlaskit/media-ui';\nimport { R300 } from '@atlaskit/theme/colors';\nimport { ErrorMessageWrapper, TitleBoxWrapper } from './titleBoxComponents';\nexport var FailedTitleBox = function FailedTitleBox(_ref) {\n  var breakpoint = _ref.breakpoint,\n      _ref$customMessage = _ref.customMessage,\n      customMessage = _ref$customMessage === void 0 ? messages.failed_to_load : _ref$customMessage;\n  return /*#__PURE__*/React.createElement(TitleBoxWrapper, {\n    breakpoint: breakpoint\n  }, /*#__PURE__*/React.createElement(ErrorMessageWrapper, null, /*#__PURE__*/React.createElement(EditorWarningIcon, {\n    label: 'Warning',\n    size: 'small',\n    primaryColor: R300\n  }), /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(FormattedMessage, customMessage))));\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { styledBarStyles } from './styles';\nexport var StyledBar = function StyledBar(props) {\n  var progress = props.progress,\n      breakpoint = props.breakpoint,\n      positionBottom = props.positionBottom,\n      showOnTop = props.showOnTop;\n  return jsx(\"div\", {\n    id: \"styledBar\",\n    css: styledBarStyles({\n      progress: progress,\n      breakpoint: breakpoint,\n      positionBottom: positionBottom,\n      showOnTop: showOnTop\n    })\n  });\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { transition } from '../../../styles';\nimport { N90A } from '@atlaskit/theme/colors';\nexport var blanketClassName = 'media-card-blanket';\nexport var fixedBlanketStyles = \"background-color: \".concat(N90A, \";\");\nexport var blanketStyles = function blanketStyles(isFixed) {\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  max-height: 100%;\\n  max-width: 100%;\\n  left: 0;\\n  top: 0;\\n  \", \"\\n\"])), transition(), isFixed ? fixedBlanketStyles : '');\n};\nblanketStyles.displayName = 'Blanket';","import React from 'react';\nimport { StyledBar } from './styledBar';\nimport { Breakpoint } from '../common';\nexport var getNormalizedProgress = function getNormalizedProgress(progress) {\n  return Math.min(1, Math.max(0, progress || 0)) * 100;\n};\nexport var ProgressBar = function ProgressBar(_ref) {\n  var progress = _ref.progress,\n      _ref$breakpoint = _ref.breakpoint,\n      breakpoint = _ref$breakpoint === void 0 ? Breakpoint.SMALL : _ref$breakpoint,\n      _ref$positionBottom = _ref.positionBottom,\n      positionBottom = _ref$positionBottom === void 0 ? false : _ref$positionBottom,\n      _ref$showOnTop = _ref.showOnTop,\n      showOnTop = _ref$showOnTop === void 0 ? false : _ref$showOnTop;\n  return /*#__PURE__*/React.createElement(StyledBar, {\n    progress: getNormalizedProgress(progress),\n    breakpoint: breakpoint,\n    positionBottom: positionBottom,\n    showOnTop: showOnTop\n  });\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { playButtonClassName, playButtonWrapperStyles } from './styles';\nexport var PlayButtonWrapper = function PlayButtonWrapper(props) {\n  return jsx(\"div\", {\n    css: playButtonWrapperStyles,\n    className: playButtonClassName\n  }, props.children);\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { backgroundStyles, bkgClassName } from './styles';\nexport var PlayButtonBackground = function PlayButtonBackground() {\n  return jsx(\"div\", {\n    css: backgroundStyles,\n    className: bkgClassName\n  });\n};","import React from 'react';\nimport VidPlayIcon from '@atlaskit/icon/glyph/vid-play';\nimport { PlayButtonWrapper } from './playButtonWrapper';\nimport { PlayButtonBackground } from './playButtonBackground';\nexport var PlayButton = function PlayButton() {\n  return /*#__PURE__*/React.createElement(PlayButtonWrapper, null, /*#__PURE__*/React.createElement(PlayButtonBackground, null), /*#__PURE__*/React.createElement(VidPlayIcon, {\n    label: \"play\",\n    size: \"large\"\n  }));\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { wrapperStyles, tickBoxClassName } from './styles';\nexport var TickBoxWrapper = function TickBoxWrapper(props) {\n  return jsx(\"div\", {\n    id: \"tickBoxWrapper\",\n    css: wrapperStyles(props.selected),\n    className: tickBoxClassName\n  }, props.children);\n};","import React from 'react';\nimport TickIcon from '@atlaskit/icon/glyph/check';\nimport { TickBoxWrapper } from './tickBoxWrapper';\nexport var TickBox = function TickBox(_ref) {\n  var selected = _ref.selected;\n  return /*#__PURE__*/React.createElement(TickBoxWrapper, {\n    selected: selected\n  }, /*#__PURE__*/React.createElement(TickIcon, {\n    label: \"tick\"\n  }));\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { blanketStyles, blanketClassName } from './styles';\nexport var Blanket = function Blanket(props) {\n  var isFixed = props.isFixed;\n  return jsx(\"div\", {\n    css: blanketStyles(isFixed),\n    className: blanketClassName\n  });\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { transition } from '../../../styles';\nexport var actionsBarClassName = 'media-card-actions-bar';\nexport var fixedActionBarStyles = \"opacity: 1;\";\nexport var wrapperStyles = function wrapperStyles(isFixed) {\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n  position: absolute;\\n  top: 8px;\\n  right: 8px;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  align-items: center;\\n\"])), isFixed ? fixedActionBarStyles : 'opacity: 0;', transition());\n};\nwrapperStyles.displayName = 'ActionsBarWrapper';","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { wrapperStyles, actionsBarClassName } from './styles';\nexport var ActionsBarWrapper = function ActionsBarWrapper(props) {\n  return jsx(\"div\", {\n    id: \"actionsBarWrapper\",\n    css: wrapperStyles(props.isFixed),\n    className: actionsBarClassName\n  }, props.children);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { CardActionIconButtonVariant, CardActionsView } from '../../../utils/cardActions';\nimport { ActionsBarWrapper } from './actionsBarWrapper';\nexport var ActionsBar = /*#__PURE__*/function (_React$Component) {\n  _inherits(ActionsBar, _React$Component);\n\n  var _super = _createSuper(ActionsBar);\n\n  function ActionsBar() {\n    _classCallCheck(this, ActionsBar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ActionsBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isFixed = _this$props.isFixed,\n          actions = _this$props.actions;\n\n      if (actions.length === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(ActionsBarWrapper, {\n        isFixed: isFixed\n      }, /*#__PURE__*/React.createElement(CardActionsView, {\n        actions: actions,\n        variant: CardActionIconButtonVariant.filled\n      }));\n    }\n  }]);\n\n  return ActionsBar;\n}(React.Component);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { getTitleBoxHeight } from '../common';\nexport function titleBoxHeight(hasTitleBox, breakpoint) {\n  // there is no titlebox\n  if (!hasTitleBox) {\n    return \"0px\";\n  } // calculate height of the titlebox\n\n\n  var marginBottom = getTitleBoxHeight(breakpoint);\n  return \"\".concat(marginBottom, \"px\");\n}\nexport var iconWrapperStyles = function iconWrapperStyles(_ref) {\n  var hasTitleBox = _ref.hasTitleBox,\n      breakpoint = _ref.breakpoint;\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  width: 100%;\\n  height: calc(100% - \", \");\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n\"])), titleBoxHeight(hasTitleBox, breakpoint));\n};\niconWrapperStyles.displayName = 'MediaIconWrapper';","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { iconWrapperStyles } from './styles';\nexport var IconWrapper = function IconWrapper(props) {\n  var breakpoint = props.breakpoint,\n      hasTitleBox = props.hasTitleBox;\n  return jsx(\"div\", {\n    id: \"iconWrapper\",\n    css: iconWrapperStyles({\n      breakpoint: breakpoint,\n      hasTitleBox: hasTitleBox\n    })\n  }, props.children);\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\n\nimport { css, keyframes } from '@emotion/react';\nimport { N300 } from '@atlaskit/theme/colors';\nvar breatheAnimation = keyframes(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n 0% { opacity: 1}\\n 50% { opacity: 0.3 }\\n 100% { opacity: 1; }\"])));\nvar animatedStyles = css(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  animation-name: \", \";\\n  animation-duration: 3.5s;\\n  animation-timing-function: ease-in-out;\\n  animation-iteration-count: infinite;\\n\"])), breatheAnimation);\n\nvar getStylesBasedOnProps = function getStylesBasedOnProps(_ref) {\n  var animated = _ref.animated,\n      reducedFont = _ref.reducedFont;\n  return css(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  overflow: hidden;\\n  opacity: 1;\\n  font-weight: 450;\\n  \", \"\\n  color: \", \";\\n  text-align: center;\\n  \", \"\\n  margin-bottom: -1em;\\n  padding: 3px 10px;\\n\"])), reducedFont ? 'font-size: 0.7em;' : '', N300, animated ? animatedStyles : '');\n};\n\nexport var iconMessageWrapperStyles = function iconMessageWrapperStyles(props) {\n  return css(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), getStylesBasedOnProps(props));\n};\niconMessageWrapperStyles.displayName = 'IconMessageWrapper';","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { iconMessageWrapperStyles } from './styles';\nexport var IconMessageWrapper = function IconMessageWrapper(props) {\n  var animated = props.animated,\n      reducedFont = props.reducedFont;\n  return jsx(\"div\", {\n    id: \"iconMessageWrapper\",\n    css: iconMessageWrapperStyles({\n      animated: animated,\n      reducedFont: reducedFont\n    })\n  }, props.children);\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport { css } from '@emotion/react';\nimport { fontFamily } from '@atlaskit/theme/constants';\nimport { borderRadius } from '@atlaskit/media-ui';\nimport { N20 } from '@atlaskit/theme/colors';\nimport { hideNativeBrowserTextSelectionStyles } from '@atlaskit/editor-shared-styles/selection';\nimport { transition } from '../../../styles';\nimport { fixedBlanketStyles, blanketClassName } from '.././blanket/styles';\nimport { fixedActionBarStyles, actionsBarClassName } from '.././actionsBar/styles';\nimport { generateResponsiveStyles, getClickablePlayButtonStyles, getCursorStyle, getSelectableTickBoxStyles, getWrapperDimensions, getWrapperShadow } from '../styles';\nexport var newFileExperienceWrapperStyles = function newFileExperienceWrapperStyles(_ref) {\n  var breakpoint = _ref.breakpoint,\n      dimensions = _ref.dimensions,\n      appearance = _ref.appearance,\n      disableOverlay = _ref.disableOverlay,\n      displayBackground = _ref.displayBackground,\n      selected = _ref.selected,\n      isPlayButtonClickable = _ref.isPlayButtonClickable,\n      isTickBoxSelectable = _ref.isTickBoxSelectable,\n      shouldDisplayTooltip = _ref.shouldDisplayTooltip,\n      mediaCardCursor = _ref.mediaCardCursor;\n  return css(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  box-sizing: border-box;\\n  * {\\n    box-sizing: border-box;\\n  }\\n  position: relative;\\n  font-family: \", \";\\n  \", \"\\n  \", \"\\n    \", \"\\n    \", \"\\n    \", \"\\n  \", \";\\n  \", \"\\n\\n  /* We use classnames from here exceptionally to be able to handle styles when the Card is on hover */\\n    \", \"\\n    \", \"\\n    &:hover .\", \" {\\n    \", \"\\n  }\\n  &:hover .\", \" {\\n    \", \"\\n  }\\n\\n  /* Tooltip does not support percentage dimensions. We enforce them here */\\n  \", \"\\n\"])), transition(), fontFamily(), getWrapperDimensions(dimensions, appearance), displayBackground ? \"background-color: \".concat(N20, \";\") : '', borderRadius, getCursorStyle(mediaCardCursor), getWrapperShadow(disableOverlay, selected), generateResponsiveStyles(breakpoint), hideNativeBrowserTextSelectionStyles, getClickablePlayButtonStyles(isPlayButtonClickable), getSelectableTickBoxStyles(isTickBoxSelectable), blanketClassName, fixedBlanketStyles, actionsBarClassName, fixedActionBarStyles, shouldDisplayTooltip ? \"> div { width: 100%; height: 100% }\" : '');\n};\nnewFileExperienceWrapperStyles.displayName = 'NewFileExperienceWrapper';","import _extends from \"@babel/runtime/helpers/extends\";\nimport React from 'react';\nimport { IconMessageWrapper } from './iconMessageWrapper';\nimport { messages } from '@atlaskit/media-ui';\nimport { FormattedMessage } from 'react-intl-next';\nexport var IconMessage = function IconMessage(_ref) {\n  var messageDescriptor = _ref.messageDescriptor,\n      _ref$animated = _ref.animated,\n      animated = _ref$animated === void 0 ? false : _ref$animated,\n      _ref$reducedFont = _ref.reducedFont,\n      reducedFont = _ref$reducedFont === void 0 ? false : _ref$reducedFont;\n  return /*#__PURE__*/React.createElement(IconMessageWrapper, {\n    animated: animated,\n    reducedFont: reducedFont\n  }, /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(FormattedMessage, messageDescriptor)));\n};\nexport var CreatingPreview = function CreatingPreview(_ref2) {\n  var disableAnimation = _ref2.disableAnimation;\n  return /*#__PURE__*/React.createElement(IconMessage, {\n    messageDescriptor: messages.creating_preview,\n    animated: !disableAnimation\n  });\n};\nexport var PreviewUnavailable = function PreviewUnavailable(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.preview_unavailable\n  }));\n};\nexport var FailedToLoad = function FailedToLoad(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.failed_to_load\n  }));\n};\nexport var FailedToUpload = function FailedToUpload(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.failed_to_upload\n  }));\n};\nexport var PreviewCurrentlyUnavailable = function PreviewCurrentlyUnavailable(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.preview_currently_unavailable,\n    reducedFont: true\n  }));\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { newFileExperienceClassName } from '../../../root/card/cardConstants';\nimport { newFileExperienceWrapperStyles } from './styles';\nexport var NewFileExperienceWrapper = function NewFileExperienceWrapper(props) {\n  var testId = props.testId,\n      dimensions = props.dimensions,\n      appearance = props.appearance,\n      onClick = props.onClick,\n      onMouseEnter = props.onMouseEnter,\n      innerRef = props.innerRef,\n      breakpoint = props.breakpoint,\n      mediaCardCursor = props.mediaCardCursor,\n      disableOverlay = props.disableOverlay,\n      selected = props.selected,\n      displayBackground = props.displayBackground,\n      isPlayButtonClickable = props.isPlayButtonClickable,\n      isTickBoxSelectable = props.isTickBoxSelectable,\n      shouldDisplayTooltip = props.shouldDisplayTooltip;\n  return jsx(\"div\", {\n    id: \"newFileExperienceWrapper\",\n    className: newFileExperienceClassName,\n    \"data-testid\": testId,\n    css: newFileExperienceWrapperStyles({\n      breakpoint: breakpoint,\n      dimensions: dimensions,\n      appearance: appearance,\n      disableOverlay: disableOverlay,\n      displayBackground: displayBackground,\n      selected: selected,\n      isPlayButtonClickable: isPlayButtonClickable,\n      isTickBoxSelectable: isTickBoxSelectable,\n      shouldDisplayTooltip: shouldDisplayTooltip,\n      mediaCardCursor: mediaCardCursor\n    }),\n    ref: innerRef,\n    onClick: onClick,\n    onMouseEnter: onMouseEnter\n  }, props.children);\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { wrapperStyles } from './styles';\nexport var Wrapper = function Wrapper(props) {\n  var testId = props.testId,\n      shouldUsePointerCursor = props.shouldUsePointerCursor,\n      breakpointSize = props.breakpointSize,\n      dimensions = props.dimensions,\n      onClick = props.onClick,\n      onMouseEnter = props.onMouseEnter,\n      innerRef = props.innerRef;\n  return jsx(\"div\", {\n    id: \"cardViewWrapper\",\n    \"data-testid\": testId,\n    css: wrapperStyles({\n      shouldUsePointerCursor: shouldUsePointerCursor,\n      breakpointSize: breakpointSize,\n      dimensions: dimensions\n    }),\n    onClick: onClick,\n    onMouseEnter: onMouseEnter,\n    ref: innerRef\n  }, props.children);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/react';\nimport React from 'react';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { getMediaFeatureFlag } from '@atlaskit/media-common';\nimport { MimeTypeIcon } from '@atlaskit/media-ui/mime-type-icon';\nimport SpinnerIcon from '@atlaskit/spinner';\nimport Tooltip from '@atlaskit/tooltip';\nimport { toHumanReadableMediaSize, messages } from '@atlaskit/media-ui';\nimport { isRateLimitedError, isPollingError } from '@atlaskit/media-client';\nimport { FileCardImageView } from '../files';\nimport { breakpointSize } from '../utils/breakpoint';\nimport { defaultImageCardDimensions, getDefaultCardDimensions } from '../utils/cardDimensions';\nimport { isValidPercentageUnit } from '../utils/isValidPercentageUnit';\nimport { getCSSUnitValue } from '../utils/getCSSUnitValue';\nimport { getElementDimension } from '../utils/getElementDimension';\nimport { createAndFireMediaCardEvent } from '../utils/analytics';\nimport { attachDetailsToActions } from '../actions';\nimport { getErrorMessage } from '../utils/getErrorMessage';\nimport { cardImageContainerStyles, calcBreakpointSize } from './ui/styles';\nimport { ImageRenderer } from './ui/imageRenderer/imageRenderer';\nimport { TitleBox } from './ui/titleBox/titleBox';\nimport { FailedTitleBox } from './ui/titleBox/failedTitleBox';\nimport { ProgressBar } from './ui/progressBar/progressBar';\nimport { PlayButton } from './ui/playButton/playButton';\nimport { TickBox } from './ui/tickBox/tickBox';\nimport { Blanket } from './ui/blanket/blanket';\nimport { ActionsBar } from './ui/actionsBar/actionsBar';\nimport { IconWrapper } from './ui/iconWrapper/iconWrapper';\nimport { PreviewUnavailable, CreatingPreview, FailedToUpload, PreviewCurrentlyUnavailable, FailedToLoad } from './ui/iconMessage';\nimport { isUploadError } from '../errors';\nimport { NewFileExperienceWrapper } from './ui/newFileExperience/newFileExperienceWrapper';\nimport { Wrapper } from './cardViewWrapper';\n\n/**\n * This is classic vanilla CardView class. To create an instance of class one would need to supply\n * `createAnalyticsEvent` prop to satisfy it's Analytics Events needs.\n */\nexport var CardViewBase = /*#__PURE__*/function (_React$Component) {\n  _inherits(CardViewBase, _React$Component);\n\n  var _super = _createSuper(CardViewBase);\n\n  function CardViewBase() {\n    var _this;\n\n    _classCallCheck(this, CardViewBase);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      didImageRender: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"divRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function (prevCardPreview) {\n      var _this$props = _this.props,\n          onImageLoad = _this$props.onImageLoad,\n          cardPreview = _this$props.cardPreview;\n\n      if (prevCardPreview.dataURI !== (cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dataURI)) {\n        return;\n      } // We render the icon & icon message always, even if there is cardPreview available.\n      // If the image fails to load/render, the icon will remain, i.e. the user won't see a change until\n      // the root card decides to chage status to error.\n      // If the image renders successfully, we switch this variable to hide the icon & icon message\n      // behind the thumbnail in case the image has transparency.\n      // It is less likely that root component replaces a suceeded cardPreview for a failed one\n      // than the opposite case. Therefore we prefer to hide the icon instead show when the image fails,\n      // for a smoother transition\n\n\n      _this.setState({\n        didImageRender: true\n      });\n\n      onImageLoad && onImageLoad(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function (cardPreview) {\n      var onImageError = _this.props.onImageError;\n\n      _this.setState({\n        didImageRender: false\n      });\n\n      onImageError && onImageError(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveElementWidth\", function () {\n      var dimensions = _this.props.dimensions;\n\n      if (!dimensions) {\n        return;\n      }\n\n      var width = dimensions.width;\n\n      if (width && isValidPercentageUnit(width) && !!_this.divRef.current) {\n        var elementWidth = getElementDimension(_this.divRef.current, 'width');\n\n        _this.setState({\n          elementWidth: elementWidth\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFileNewExperience\", function () {\n      var _this$props2 = _this.props,\n          dimensions = _this$props2.dimensions,\n          appearance = _this$props2.appearance,\n          onClick = _this$props2.onClick,\n          onMouseEnter = _this$props2.onMouseEnter,\n          testId = _this$props2.testId,\n          metadata = _this$props2.metadata,\n          status = _this$props2.status,\n          selected = _this$props2.selected,\n          selectable = _this$props2.selectable,\n          disableOverlay = _this$props2.disableOverlay,\n          cardPreview = _this$props2.cardPreview,\n          mediaCardCursor = _this$props2.mediaCardCursor;\n\n      var _ref = metadata || {},\n          name = _ref.name;\n\n      var shouldDisplayBackground = !cardPreview || !disableOverlay || status === 'error' || status === 'failed-processing';\n      var isPlayButtonClickable = !!(_this.shouldRenderPlayButton() && disableOverlay);\n      var isTickBoxSelectable = !disableOverlay && !!selectable && !selected; // Disable tooltip for Media Single\n\n      var shouldDisplayTooltip = !disableOverlay;\n      return jsx(NewFileExperienceWrapper, {\n        testId: testId || 'media-card-view',\n        dimensions: dimensions,\n        appearance: appearance,\n        onClick: onClick,\n        onMouseEnter: onMouseEnter,\n        innerRef: _this.divRef,\n        breakpoint: _this.breakpoint,\n        mediaCardCursor: mediaCardCursor,\n        disableOverlay: !!disableOverlay,\n        selected: !!selected,\n        displayBackground: shouldDisplayBackground,\n        isPlayButtonClickable: isPlayButtonClickable,\n        isTickBoxSelectable: isTickBoxSelectable,\n        shouldDisplayTooltip: shouldDisplayTooltip\n      }, shouldDisplayTooltip ? jsx(Tooltip, {\n        content: name,\n        position: \"bottom\",\n        tag: 'div'\n      }, _this.renderNewExperienceCard()) : _this.renderNewExperienceCard());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFile\", function () {\n      var _this$props3 = _this.props,\n          cardPreview = _this$props3.cardPreview,\n          status = _this$props3.status,\n          mediaItemType = _this$props3.mediaItemType,\n          metadata = _this$props3.metadata,\n          progress = _this$props3.progress,\n          resizeMode = _this$props3.resizeMode,\n          dimensions = _this$props3.dimensions,\n          selectable = _this$props3.selectable,\n          selected = _this$props3.selected,\n          disableOverlay = _this$props3.disableOverlay,\n          alt = _this$props3.alt,\n          onDisplayImage = _this$props3.onDisplayImage,\n          actions = _this$props3.actions;\n\n      var _ref2 = cardPreview || {},\n          dataURI = _ref2.dataURI,\n          orientation = _ref2.orientation;\n\n      var _ref3 = metadata || {},\n          name = _ref3.name,\n          mediaType = _ref3.mediaType,\n          mimeType = _ref3.mimeType,\n          size = _ref3.size;\n\n      var actionsWithDetails = metadata && actions ? attachDetailsToActions(actions, metadata) : [];\n      var errorMessage = getErrorMessage(status);\n      var fileSize = !size ? '' : toHumanReadableMediaSize(size);\n      return jsx(FileCardImageView, {\n        error: errorMessage,\n        dimensions: dimensions,\n        selectable: selectable,\n        selected: selected,\n        dataURI: dataURI,\n        mediaName: name,\n        mediaType: mediaType,\n        mimeType: mimeType,\n        fileSize: fileSize,\n        status: status,\n        mediaItemType: mediaItemType,\n        progress: progress,\n        resizeMode: resizeMode,\n        onDisplayImage: onDisplayImage,\n        actions: actionsWithDetails,\n        disableOverlay: disableOverlay,\n        previewOrientation: orientation,\n        alt: alt,\n        onImageLoad: _this.onImageLoad,\n        onImageError: _this.onImageError,\n        cardPreview: cardPreview\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRenderConfigByStatus\", function () {\n      var _this$props4 = _this.props,\n          cardPreview = _this$props4.cardPreview,\n          status = _this$props4.status,\n          metadata = _this$props4.metadata,\n          disableOverlay = _this$props4.disableOverlay,\n          error = _this$props4.error,\n          selectable = _this$props4.selectable,\n          disableAnimation = _this$props4.disableAnimation;\n\n      var _ref4 = metadata || {},\n          name = _ref4.name,\n          mediaType = _ref4.mediaType;\n\n      var didImageRender = _this.state.didImageRender;\n      var isZeroSize = !!(metadata && metadata.size === 0);\n      var defaultConfig = {\n        renderTypeIcon: !didImageRender,\n        renderImageRenderer: !!cardPreview,\n        renderPlayButton: !!cardPreview && mediaType === 'video',\n        renderBlanket: !disableOverlay,\n        renderTitleBox: !disableOverlay && !!name,\n        renderTickBox: !disableOverlay && !!selectable\n      };\n\n      switch (status) {\n        case 'uploading':\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderBlanket: !disableOverlay || mediaType !== 'video',\n            isFixedBlanket: true,\n            renderProgressBar: true\n          });\n\n        case 'processing':\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            iconMessage: !didImageRender && !isZeroSize ? jsx(CreatingPreview, {\n              disableAnimation: disableAnimation\n            }) : undefined\n          });\n\n        case 'complete':\n          return defaultConfig;\n\n        case 'error':\n        case 'failed-processing':\n          var baseErrorConfig = _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderTypeIcon: true,\n            renderImageRenderer: false,\n            renderTitleBox: false,\n            renderPlayButton: false\n          });\n\n          var iconMessage;\n          var customTitleMessage;\n\n          var _ref5 = error || {},\n              secondaryError = _ref5.secondaryError;\n\n          if (isRateLimitedError(secondaryError) || isPollingError(secondaryError)) {\n            iconMessage = jsx(PreviewCurrentlyUnavailable, null);\n          } else if (isUploadError(error)) {\n            iconMessage = jsx(FailedToUpload, null);\n            customTitleMessage = messages.failed_to_upload;\n          } else if (!metadata) {\n            iconMessage = jsx(FailedToLoad, null);\n          } else {\n            iconMessage = jsx(PreviewUnavailable, null);\n          }\n\n          if (!disableOverlay) {\n            var renderFailedTitleBox = !name || !!customTitleMessage;\n            return _objectSpread(_objectSpread({}, baseErrorConfig), {}, {\n              renderTitleBox: !!name && !customTitleMessage,\n              renderFailedTitleBox: renderFailedTitleBox,\n              iconMessage: !renderFailedTitleBox ? iconMessage : undefined,\n              customTitleMessage: customTitleMessage\n            });\n          }\n\n          return _objectSpread(_objectSpread({}, baseErrorConfig), {}, {\n            iconMessage: iconMessage\n          });\n\n        case 'loading-preview':\n        case 'loading':\n        default:\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderPlayButton: false,\n            renderTypeIcon: false,\n            renderSpinner: !didImageRender\n          });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderNewExperienceCard\", function () {\n      var _this$getRenderConfig = _this.getRenderConfigByStatus(),\n          renderTypeIcon = _this$getRenderConfig.renderTypeIcon,\n          iconMessage = _this$getRenderConfig.iconMessage,\n          renderImageRenderer = _this$getRenderConfig.renderImageRenderer,\n          renderSpinner = _this$getRenderConfig.renderSpinner,\n          renderPlayButton = _this$getRenderConfig.renderPlayButton,\n          renderBlanket = _this$getRenderConfig.renderBlanket,\n          renderProgressBar = _this$getRenderConfig.renderProgressBar,\n          renderTitleBox = _this$getRenderConfig.renderTitleBox,\n          renderFailedTitleBox = _this$getRenderConfig.renderFailedTitleBox,\n          renderTickBox = _this$getRenderConfig.renderTickBox,\n          isFixedBlanket = _this$getRenderConfig.isFixedBlanket,\n          customTitleMessage = _this$getRenderConfig.customTitleMessage;\n\n      var _this$props5 = _this.props,\n          progress = _this$props5.progress,\n          selected = _this$props5.selected,\n          status = _this$props5.status,\n          metadata = _this$props5.metadata;\n\n      var _ref6 = metadata || {},\n          name = _ref6.name;\n\n      var hasTitleBox = !!renderTitleBox || !!renderFailedTitleBox;\n      return jsx(React.Fragment, null, jsx(\"div\", {\n        css: cardImageContainerStyles,\n        className: \"media-file-card-view\",\n        \"data-testid\": \"media-file-card-view\",\n        \"data-test-media-name\": name,\n        \"data-test-status\": status,\n        \"data-test-progress\": progress,\n        \"data-test-selected\": selected ? true : undefined\n      }, renderTypeIcon && _this.renderMediaTypeIcon(hasTitleBox, iconMessage), renderSpinner && _this.renderSpinner(hasTitleBox), renderImageRenderer && _this.renderImageRenderer(), renderPlayButton && _this.renderPlayButton(hasTitleBox), renderBlanket && _this.renderBlanket(!!isFixedBlanket), renderTitleBox && _this.renderTitleBox(), renderFailedTitleBox && _this.renderFailedTitleBox(customTitleMessage), renderProgressBar && _this.renderProgressBar(!hasTitleBox), renderTickBox && _this.renderTickBox()), _this.renderActionsBar());\n    });\n\n    return _this;\n  }\n\n  _createClass(CardViewBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.saveElementWidth();\n      var innerRef = this.props.innerRef;\n      !!innerRef && !!this.divRef.current && innerRef(this.divRef.current);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref7) {\n      var prevCardPreview = _ref7.cardPreview;\n      var cardPreview = this.props.cardPreview; // We should only switch didImageRender to false\n      // when cardPreview goes undefined, not when it is updated.\n      // as this method could be triggered after onImageLoad callback,\n      // falling on a race condition\n\n      !!prevCardPreview && !cardPreview && this.setState({\n        didImageRender: false\n      });\n    }\n  }, {\n    key: \"width\",\n    get: // This width is only used to calculate breakpoints, dimensions are passed down as\n    // integrator pass it to the root component\n    function get() {\n      var elementWidth = this.state.elementWidth;\n\n      if (elementWidth) {\n        return elementWidth;\n      }\n\n      var _ref8 = this.props.dimensions || {\n        width: undefined\n      },\n          width = _ref8.width;\n\n      if (!width) {\n        return defaultImageCardDimensions.width;\n      }\n\n      return getCSSUnitValue(width);\n    }\n  }, {\n    key: \"breakpoint\",\n    get: function get() {\n      var width = this.state.elementWidth || (this.props.dimensions ? this.props.dimensions.width : '') || defaultImageCardDimensions.width;\n      return calcBreakpointSize(parseInt(\"\".concat(width), 10));\n    } // If the dimensions.width is a percentage, we need to transform it\n    // into a pixel value in order to get the right breakpoints applied.\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var featureFlags = this.props.featureFlags;\n\n      if (getMediaFeatureFlag('newCardExperience', featureFlags)) {\n        return this.renderFileNewExperience();\n      }\n\n      var _this$props6 = this.props,\n          dimensions = _this$props6.dimensions,\n          appearance = _this$props6.appearance,\n          onClick = _this$props6.onClick,\n          onMouseEnter = _this$props6.onMouseEnter,\n          testId = _this$props6.testId;\n      var wrapperDimensions = dimensions ? dimensions : getDefaultCardDimensions(appearance);\n      return jsx(Wrapper, {\n        testId: testId || 'media-card-view',\n        shouldUsePointerCursor: true,\n        breakpointSize: breakpointSize(this.width),\n        dimensions: wrapperDimensions,\n        onClick: onClick,\n        onMouseEnter: onMouseEnter,\n        innerRef: this.divRef\n      }, this.renderFile());\n    }\n  }, {\n    key: \"renderSpinner\",\n    value: function renderSpinner(hasTitleBox) {\n      return jsx(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, jsx(SpinnerIcon, null));\n    }\n  }, {\n    key: \"shouldRenderPlayButton\",\n    value: function shouldRenderPlayButton() {\n      var _this$props7 = this.props,\n          metadata = _this$props7.metadata,\n          cardPreview = _this$props7.cardPreview;\n\n      var _ref9 = metadata || {},\n          mediaType = _ref9.mediaType;\n\n      if (mediaType !== 'video' || !cardPreview) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"renderPlayButton\",\n    value: function renderPlayButton(hasTitleBox) {\n      return jsx(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, jsx(PlayButton, null));\n    } //This Blanket will provide a shadow backround for uploading status by\n    //setting isFixed.\n\n  }, {\n    key: \"renderBlanket\",\n    value: function renderBlanket(isFixed) {\n      return jsx(Blanket, {\n        isFixed: isFixed\n      });\n    }\n  }, {\n    key: \"renderTitleBox\",\n    value: function renderTitleBox() {\n      var _this$props8 = this.props,\n          metadata = _this$props8.metadata,\n          titleBoxBgColor = _this$props8.titleBoxBgColor,\n          titleBoxIcon = _this$props8.titleBoxIcon;\n\n      var _ref10 = metadata || {},\n          name = _ref10.name,\n          createdAt = _ref10.createdAt;\n\n      return !!name && jsx(TitleBox, {\n        name: name,\n        createdAt: createdAt,\n        breakpoint: this.breakpoint,\n        titleBoxIcon: titleBoxIcon,\n        titleBoxBgColor: titleBoxBgColor\n      });\n    }\n  }, {\n    key: \"renderFailedTitleBox\",\n    value: function renderFailedTitleBox(customMessage) {\n      return jsx(FailedTitleBox, {\n        breakpoint: this.breakpoint,\n        customMessage: customMessage\n      });\n    }\n  }, {\n    key: \"renderProgressBar\",\n    value: function renderProgressBar(positionBottom) {\n      var progress = this.props.progress;\n      return jsx(ProgressBar, {\n        progress: progress,\n        breakpoint: this.breakpoint,\n        positionBottom: positionBottom\n      });\n    }\n  }, {\n    key: \"renderImageRenderer\",\n    value: function renderImageRenderer() {\n      var _this$props9 = this.props,\n          cardPreview = _this$props9.cardPreview,\n          _this$props9$metadata = _this$props9.metadata;\n      _this$props9$metadata = _this$props9$metadata === void 0 ? {} : _this$props9$metadata;\n      var _this$props9$metadata2 = _this$props9$metadata.mediaType,\n          mediaType = _this$props9$metadata2 === void 0 ? 'unknown' : _this$props9$metadata2,\n          alt = _this$props9.alt,\n          resizeMode = _this$props9.resizeMode,\n          onDisplayImage = _this$props9.onDisplayImage,\n          nativeLazyLoad = _this$props9.nativeLazyLoad,\n          forceSyncDisplay = _this$props9.forceSyncDisplay;\n      return !!cardPreview && jsx(ImageRenderer, {\n        cardPreview: cardPreview,\n        mediaType: mediaType,\n        alt: alt,\n        resizeMode: resizeMode,\n        onDisplayImage: onDisplayImage,\n        onImageLoad: this.onImageLoad,\n        onImageError: this.onImageError,\n        nativeLazyLoad: nativeLazyLoad,\n        forceSyncDisplay: forceSyncDisplay\n      });\n    }\n  }, {\n    key: \"renderTickBox\",\n    value: function renderTickBox() {\n      var selected = this.props.selected;\n      return jsx(TickBox, {\n        selected: selected\n      });\n    }\n  }, {\n    key: \"renderMediaTypeIcon\",\n    value: function renderMediaTypeIcon(hasTitleBox, iconMessage) {\n      var metadata = this.props.metadata;\n\n      var _ref11 = metadata || {},\n          mediaType = _ref11.mediaType,\n          mimeType = _ref11.mimeType,\n          name = _ref11.name;\n\n      return jsx(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, jsx(MimeTypeIcon, {\n        testId: 'media-card-file-type-icon',\n        mediaType: mediaType,\n        mimeType: mimeType,\n        name: name\n      }), iconMessage);\n    }\n  }, {\n    key: \"renderActionsBar\",\n    value: function renderActionsBar() {\n      var _this$props10 = this.props,\n          disableOverlay = _this$props10.disableOverlay,\n          actions = _this$props10.actions,\n          metadata = _this$props10.metadata;\n      var actionsWithDetails = metadata && actions ? attachDetailsToActions(actions, metadata) : [];\n\n      if (disableOverlay || !actions || actions.length === 0) {\n        return null;\n      }\n\n      return jsx(ActionsBar, {\n        actions: actionsWithDetails\n      });\n    }\n  }]);\n\n  return CardViewBase;\n}(React.Component);\n\n_defineProperty(CardViewBase, \"defaultProps\", {\n  appearance: 'auto'\n});\n\nexport var CardView = withAnalyticsEvents({\n  onClick: createAndFireMediaCardEvent({\n    eventType: 'ui',\n    action: 'clicked',\n    actionSubject: 'mediaCard',\n    attributes: {}\n  })\n})(CardViewBase);","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useEffect, forwardRef } from 'react';\n/**\n * As IntersectionObserver::rootMargin doesn't work within IFrames, we use an empty div + dynamic offsetTop to eagerly detect cards entering viewport.\n * Using this approach, we can lazy load cards ABS_VIEWPORT_ANCHOR_OFFSET_TOP px before they enter viewport.\n */\n\nexport var ABS_VIEWPORT_ANCHOR_OFFSET_TOP = 900; //px\n\nexport var ViewportAnchor = /*#__PURE__*/forwardRef(function (props, ref) {\n  if (typeof IntersectionObserver === 'undefined') {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: \"media-card-viewport-anchor\",\n    style: {\n      position: 'absolute',\n      top: \"\".concat(props.offsetTop, \"px\"),\n      maxHeight: 0,\n      pointerEvents: 'none'\n    }\n  });\n});\n\nvar createIntersectionObserverCallback = function createIntersectionObserverCallback(onVisible) {\n  return function (entries, observer) {\n    var _iterator = _createForOfIteratorHelper(entries),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          onVisible();\n          observer.disconnect();\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n};\n\nvar ViewportObserver = function ViewportObserver(_ref) {\n  var onVisible = _ref.onVisible,\n      cardEl = _ref.cardEl,\n      children = _ref.children,\n      preAnchorRef = _ref.preAnchorRef,\n      postAnchorRef = _ref.postAnchorRef;\n  useEffect(function () {\n    // IntersectionObserver uses root and target elements to detect intersections, defaulting root to the viewport\n    var intersectionObserver = new IntersectionObserver(createIntersectionObserverCallback(onVisible));\n    (preAnchorRef === null || preAnchorRef === void 0 ? void 0 : preAnchorRef.current) && intersectionObserver.observe(preAnchorRef.current);\n    (postAnchorRef === null || postAnchorRef === void 0 ? void 0 : postAnchorRef.current) && intersectionObserver.observe(postAnchorRef.current);\n    cardEl && intersectionObserver.observe(cardEl);\n    return function () {\n      intersectionObserver.disconnect();\n    };\n  }, [cardEl, preAnchorRef, postAnchorRef, onVisible]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\n\nexport var ViewportDetector = function ViewportDetector(_ref2) {\n  var cardEl = _ref2.cardEl,\n      preAnchorRef = _ref2.preAnchorRef,\n      postAnchorRef = _ref2.postAnchorRef,\n      onVisible = _ref2.onVisible,\n      children = _ref2.children;\n\n  if (typeof IntersectionObserver === 'undefined') {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }\n\n  return /*#__PURE__*/React.createElement(ViewportObserver, {\n    cardEl: cardEl,\n    preAnchorRef: preAnchorRef,\n    postAnchorRef: postAnchorRef,\n    onVisible: onVisible\n  }, children);\n};","export var containsPixelUnit = function containsPixelUnit(value) {\n  return value.substr(-2) === 'px' && !isNaN(+value.slice(0, -2));\n};","import { isRetina } from './isRetina';\nimport { getElementDimension } from './getElementDimension';\nimport { defaultImageCardDimensions } from './cardDimensions';\nimport { isValidPercentageUnit } from './isValidPercentageUnit';\nimport { containsPixelUnit } from './containsPixelUnit';\nexport var getDataURIDimension = function getDataURIDimension(dimension, options) {\n  var retinaFactor = isRetina() ? 2 : 1;\n  var dimensionValue = options.dimensions && options.dimensions[dimension] || '';\n\n  if (isValidPercentageUnit(dimensionValue) && options.element) {\n    return getElementDimension(options.element, dimension) * retinaFactor;\n  }\n\n  if (typeof dimensionValue === 'number') {\n    return dimensionValue * retinaFactor;\n  }\n\n  if (containsPixelUnit(\"\".concat(dimensionValue))) {\n    return parseInt(\"\".concat(dimensionValue), 10) * retinaFactor;\n  }\n\n  return defaultImageCardDimensions[dimension] * retinaFactor;\n};\nexport var getRequestedDimensions = function getRequestedDimensions(options) {\n  var width = getDataURIDimension('width', options);\n  var height = getDataURIDimension('height', options);\n  return {\n    width: width,\n    height: height\n  };\n};","export function isRetina() {\n  var mediaQuery = '(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)';\n  return window.devicePixelRatio > 1 || window.matchMedia && window.matchMedia(mediaQuery).matches;\n}","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { LRUCache } from 'lru-fast';\nimport { EventEmitter2 } from 'eventemitter2';\nexport var PREVIEW_CACHE_LRU_SIZE = 50;\n\nvar ExtendedLRUCache = /*#__PURE__*/function (_LRUCache) {\n  _inherits(ExtendedLRUCache, _LRUCache);\n\n  var _super = _createSuper(ExtendedLRUCache);\n\n  function ExtendedLRUCache(limit) {\n    var _this;\n\n    _classCallCheck(this, ExtendedLRUCache);\n\n    _this = _super.call(this, limit);\n    _this.eventEmitter = new EventEmitter2();\n    return _this;\n  }\n\n  _createClass(ExtendedLRUCache, [{\n    key: \"shift\",\n    value: function shift() {\n      var entry = _get(_getPrototypeOf(ExtendedLRUCache.prototype), \"shift\", this).call(this);\n\n      this.eventEmitter.emit('shift', entry);\n      return entry;\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      this.eventEmitter.on(event, callback);\n    }\n  }]);\n\n  return ExtendedLRUCache;\n}(LRUCache);\n\nexport var ObjectURLCache = /*#__PURE__*/function () {\n  function ObjectURLCache(size) {\n    _classCallCheck(this, ObjectURLCache);\n\n    this.cache = new ExtendedLRUCache(size);\n    this.cache.on('shift', function (entry) {\n      if (entry && entry.value.dataURI) {\n        URL.revokeObjectURL(entry.value.dataURI);\n      }\n    });\n  }\n\n  _createClass(ObjectURLCache, [{\n    key: \"has\",\n    value: function has(key) {\n      return !!this.cache.find(key);\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return this.cache.get(key);\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      this.cache.set(key, value);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var removed = this.cache.remove(key);\n      removed && URL.revokeObjectURL(removed.dataURI);\n    }\n  }]);\n\n  return ObjectURLCache;\n}();\nexport var createObjectURLCache = function createObjectURLCache() {\n  return new ObjectURLCache(PREVIEW_CACHE_LRU_SIZE);\n};","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { createObjectURLCache } from '../../../utils/objectURLCache';\nexport var getCacheKey = function getCacheKey(id, mode) {\n  var resizeMode = mode || 'crop';\n  return [id, resizeMode].join('-');\n};\nexport var CardPreviewCacheImpl = /*#__PURE__*/_createClass(function CardPreviewCacheImpl(previewCache) {\n  var _this = this;\n\n  _classCallCheck(this, CardPreviewCacheImpl);\n\n  _defineProperty(this, \"get\", function (id, mode) {\n    var cacheKey = getCacheKey(id, mode);\n    return _this.previewCache.get(cacheKey);\n  });\n\n  _defineProperty(this, \"set\", function (id, mode, cardPreview) {\n    var cacheKey = getCacheKey(id, mode);\n\n    _this.previewCache.set(cacheKey, cardPreview);\n  });\n\n  _defineProperty(this, \"remove\", function (id, mode) {\n    var cacheKey = getCacheKey(id, mode);\n\n    _this.previewCache.remove(cacheKey);\n  });\n\n  this.previewCache = previewCache;\n});\nexport default new CardPreviewCacheImpl(createObjectURLCache());","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport VideoSnapshot from 'video-snapshot';\nexport var takeSnapshot = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(blob) {\n    var snapshooter, dataUri;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            snapshooter = new VideoSnapshot(blob);\n            _context.next = 3;\n            return snapshooter.takeSnapshot();\n\n          case 3:\n            dataUri = _context.sent;\n            snapshooter.end();\n            return _context.abrupt(\"return\", dataUri);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function takeSnapshot(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { takeSnapshot } from '../../../utils/videoSnapshot';\nimport { getMediaTypeFromMimeType } from '@atlaskit/media-common';\nimport { getOrientation } from '@atlaskit/media-ui';\nimport { LocalPreviewError, RemotePreviewError } from '../../../errors';\n\n/**\n * This method tells the support for the media\n * types covered in getCardPreviewFromFilePreview\n */\nexport var isSupportedLocalPreview = function isSupportedLocalPreview(mediaType) {\n  return mediaType === 'image' || mediaType === 'video';\n};\n\nvar getImageLocalPreview = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n    var orientation, dataURI;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return getOrientation(value);\n\n          case 3:\n            orientation = _context.sent;\n            dataURI = URL.createObjectURL(value);\n            return _context.abrupt(\"return\", {\n              dataURI: dataURI,\n              orientation: orientation,\n              source: 'local'\n            });\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-image', _context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n\n  return function getImageLocalPreview(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getVideoLocalPreview = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value) {\n    var dataURI;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return takeSnapshot(value);\n\n          case 3:\n            dataURI = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              dataURI: dataURI,\n              orientation: 1,\n              source: 'local'\n            });\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-video', _context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n\n  return function getVideoLocalPreview(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport var getCardPreviewFromFilePreview = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(filePreview) {\n    var value, resolvedFilePreview, _value, type, mediaType;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return filePreview;\n\n          case 3:\n            resolvedFilePreview = _context3.sent;\n            value = resolvedFilePreview.value;\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-rejected', _context3.t0);\n\n          case 10:\n            if (!(typeof value === 'string')) {\n              _context3.next = 14;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", {\n              dataURI: value,\n              orientation: 1,\n              source: 'local'\n            });\n\n          case 14:\n            if (!(value instanceof Blob)) {\n              _context3.next = 22;\n              break;\n            }\n\n            _value = value, type = _value.type;\n            mediaType = getMediaTypeFromMimeType(type);\n            _context3.t1 = mediaType;\n            _context3.next = _context3.t1 === 'image' ? 20 : _context3.t1 === 'video' ? 21 : 22;\n            break;\n\n          case 20:\n            return _context3.abrupt(\"return\", getImageLocalPreview(value));\n\n          case 21:\n            return _context3.abrupt(\"return\", getVideoLocalPreview(value));\n\n          case 22:\n            throw new LocalPreviewError('local-preview-unsupported');\n\n          case 23:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n\n  return function getCardPreviewFromFilePreview(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getCardPreviewFromBackend = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(mediaClient, id, params) {\n    var blob;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return mediaClient.getImage(id, params);\n\n          case 3:\n            blob = _context4.sent;\n            return _context4.abrupt(\"return\", {\n              dataURI: URL.createObjectURL(blob),\n              orientation: 1,\n              source: 'remote'\n            });\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            throw new RemotePreviewError('remote-preview-fetch', _context4.t0);\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n\n  return function getCardPreviewFromBackend(_x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();","import { isValidPercentageUnit } from './isValidPercentageUnit';\nimport { containsPixelUnit } from './containsPixelUnit';\n\nvar isPixelEquivalent = function isPixelEquivalent(dimension) {\n  return typeof dimension === 'number' || containsPixelUnit(\"\".concat(dimension));\n};\n\nexport var canCompareDimension = function canCompareDimension(current, next) {\n  if (!current || !next) {\n    return false;\n  }\n\n  var bothPixelEquivalent = isPixelEquivalent(current) && isPixelEquivalent(next);\n  var bothPercentage = isValidPercentageUnit(current) && isValidPercentageUnit(next);\n  return bothPixelEquivalent || bothPercentage;\n};\nexport var isBigger = function isBigger(current, next) {\n  if (!!current && !!next && canCompareDimension(current.width, next.width) && canCompareDimension(current.height, next.height)) {\n    var nextIsHigher = parseInt(\"\".concat(current.width), 10) < parseInt(\"\".concat(next.width), 10);\n    var nextIsWider = parseInt(\"\".concat(current.height), 10) < parseInt(\"\".concat(next.height), 10);\n    return nextIsHigher || nextIsWider;\n  } else {\n    return false;\n  }\n};","import { isMimeTypeSupportedByBrowser } from '@atlaskit/media-common';\nimport { isPreviewableFileState, isPreviewableType, isImageRepresentationReady } from '@atlaskit/media-client';\nimport { isSupportedLocalPreview } from './helpers'; // TODO: align these checks with helpers from Media Client\n// https://product-fabric.atlassian.net/browse/BMPT-1300\n\nexport var extractFilePreviewStatus = function extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags) {\n  var hasFilesize = 'size' in fileState && !!fileState.size;\n\n  var _ref = 'mediaType' in fileState && fileState || {},\n      mediaType = _ref.mediaType;\n\n  var _ref2 = 'mimeType' in fileState && fileState || {},\n      mimeType = _ref2.mimeType;\n\n  var isPreviewable = !!mediaType && isPreviewableType(mediaType, featureFlags); // Local preview is available only if it's supported by browser and supported by Media Card (isSupportedLocalPreview)\n  // For example, SVGs are mime type NOT supported by browser but media type supported by Media Card (image)\n  // Then, local Preview NOT available\n\n  var hasLocalPreview = !isBannedLocalPreview && isPreviewableFileState(fileState) && isSupportedLocalPreview(mediaType) && !!mimeType && isMimeTypeSupportedByBrowser(mimeType);\n  var hasRemotePreview = isImageRepresentationReady(fileState);\n  var hasPreview = hasLocalPreview || hasRemotePreview;\n  var isSupportedByBrowser = !!mimeType && isMimeTypeSupportedByBrowser(mimeType);\n  return {\n    hasFilesize: hasFilesize,\n    isPreviewable: isPreviewable,\n    hasPreview: hasPreview,\n    isSupportedByBrowser: isSupportedByBrowser\n  };\n};\nexport var isPreviewableStatus = function isPreviewableStatus(cardStatus, _ref3) {\n  var isPreviewable = _ref3.isPreviewable,\n      hasPreview = _ref3.hasPreview,\n      isSupportedByBrowser = _ref3.isSupportedByBrowser;\n  return hasPreview && isPreviewable && (cardStatus === 'complete' || cardStatus === 'loading-preview' || cardStatus === 'uploading' || // For Video, we can have local or remote preview while processing.\n  // Then, we only want to show the thumbnail if the file is supported by the browser,\n  // this way we prevent playing unsupported videos that are not procesed\n  cardStatus === 'processing' && isSupportedByBrowser);\n};","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { isPreviewableFileState, addFileAttrsToUrl } from '@atlaskit/media-client';\nimport { isMimeTypeSupportedByBrowser } from '@atlaskit/media-common';\nimport cardPreviewCache from './cache';\nimport { getCardPreviewFromFilePreview, getCardPreviewFromBackend } from './helpers';\nimport { MediaCardError, SsrPreviewError, isUnsupportedLocalPreviewError } from '../../../errors';\nimport { isBigger } from '../../../utils/dimensionComparer';\nimport { extractFilePreviewStatus, isPreviewableStatus } from './filePreviewStatus';\nexport { getCardPreviewFromFilePreview, getCardPreviewFromBackend, isSupportedLocalPreview } from './helpers';\nexport { extractFilePreviewStatus } from './filePreviewStatus';\nexport var getCardPreviewFromCache = cardPreviewCache.get;\nexport var removeCardPreviewFromCache = cardPreviewCache.remove;\n/**\n * Will return the preview if available and supported by the browser\n * See extractFilePreviewStatus \"hasLocalPreview\" logic\n */\n\nexport var getFilePreviewFromFileState = function getFilePreviewFromFileState(fileState) {\n  return 'mimeType' in fileState && isMimeTypeSupportedByBrowser(fileState.mimeType) && isPreviewableFileState(fileState) ? fileState.preview : undefined;\n};\n\nvar extendAndCachePreview = function extendAndCachePreview(id, mode, preview, mediaBlobUrlAttrs) {\n  var source;\n\n  switch (preview.source) {\n    case 'local':\n      source = 'cache-local';\n      break;\n\n    case 'remote':\n      source = 'cache-remote';\n      break;\n\n    case 'ssr-server':\n      source = 'cache-ssr-server';\n      break;\n\n    case 'ssr-client':\n      source = 'cache-ssr-client';\n      break;\n\n    default:\n      source = preview.source;\n  } // We want to embed some meta context into dataURI for Copy/Paste to work.\n\n\n  var dataURI = mediaBlobUrlAttrs ? addFileAttrsToUrl(preview.dataURI, mediaBlobUrlAttrs) : preview.dataURI; // We store new cardPreview into cache\n\n  cardPreviewCache.set(id, mode, _objectSpread(_objectSpread({}, preview), {}, {\n    source: source,\n    dataURI: dataURI\n  }));\n  return _objectSpread(_objectSpread({}, preview), {}, {\n    dataURI: dataURI\n  });\n};\n/**\n * This function will try to return a Card preview, either from cache, local preview or remote preview.\n * It should only be called if there is a chance to get either a remote or a local preview, or both.\n * This, in order to ensure there is always going to be a valid return value OR throw an error if the process fails.\n * It is worth noting that local preview failures break the process if there is no remote preview available.\n * In that case we throw an error immediately.\n * Otherwise, if the local preview fails but there is a remote preview available, the failure does not break the process.\n * In that case, we still want to report the local preview error to the caller, for feature realiability track.\n * hence the use of the optional callback onLocalPreviewError\n */\n\n\nexport var getCardPreview = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var mediaClient, id, _ref$dimensions, dimensions, filePreview, onLocalPreviewError, isRemotePreviewReady, imageUrlParams, mediaBlobUrlAttrs, mode, cachedPreview, dimensionsAreBigger, localPreview;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            mediaClient = _ref.mediaClient, id = _ref.id, _ref$dimensions = _ref.dimensions, dimensions = _ref$dimensions === void 0 ? {} : _ref$dimensions, filePreview = _ref.filePreview, onLocalPreviewError = _ref.onLocalPreviewError, isRemotePreviewReady = _ref.isRemotePreviewReady, imageUrlParams = _ref.imageUrlParams, mediaBlobUrlAttrs = _ref.mediaBlobUrlAttrs;\n            mode = imageUrlParams.mode;\n            cachedPreview = cardPreviewCache.get(id, mode);\n            dimensionsAreBigger = isBigger(cachedPreview === null || cachedPreview === void 0 ? void 0 : cachedPreview.dimensions, dimensions);\n\n            if (!(cachedPreview && !dimensionsAreBigger)) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", cachedPreview);\n\n          case 6:\n            _context.prev = 6;\n\n            if (!filePreview) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.next = 10;\n            return getCardPreviewFromFilePreview(filePreview);\n\n          case 10:\n            localPreview = _context.sent;\n            return _context.abrupt(\"return\", extendAndCachePreview(id, mode, _objectSpread(_objectSpread({}, localPreview), {}, {\n              dimensions: dimensions\n            }), mediaBlobUrlAttrs));\n\n          case 12:\n            _context.next = 19;\n            break;\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](6);\n\n            /**\n             * We report the error if:\n             * - local preview is supported and fails\n             * - local preview is unsupported and remote preview is NOT READY\n             *   i.e. the function was called for \"no reason\".\n             * We DON'T report the error if:\n             * - local preview is unsupported and remote preview IS READY\n             *   i.e. local preview is available and not supported,\n             *   but we are after the remote preview instead.\n             */\n            if (!isUnsupportedLocalPreviewError(_context.t0) || isUnsupportedLocalPreviewError(_context.t0) && !isRemotePreviewReady) {\n              onLocalPreviewError && onLocalPreviewError(_context.t0);\n            }\n            /**\n             * No matter the reason why the local preview failed, we break the process\n             * if there is no remote preview available\n             */\n\n\n            if (isRemotePreviewReady) {\n              _context.next = 19;\n              break;\n            }\n\n            throw _context.t0;\n\n          case 19:\n            if (isRemotePreviewReady) {\n              _context.next = 21;\n              break;\n            }\n\n            throw new MediaCardError('remote-preview-not-ready');\n\n          case 21:\n            return _context.abrupt(\"return\", fetchAndCacheRemotePreview(mediaClient, id, dimensions, imageUrlParams, mediaBlobUrlAttrs));\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 14]]);\n  }));\n\n  return function getCardPreview(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var shouldResolvePreview = function shouldResolvePreview(_ref3) {\n  var status = _ref3.status,\n      fileState = _ref3.fileState,\n      dimensions = _ref3.dimensions,\n      identifier = _ref3.identifier,\n      fileImageMode = _ref3.fileImageMode,\n      hasCardPreview = _ref3.hasCardPreview,\n      isBannedLocalPreview = _ref3.isBannedLocalPreview,\n      featureFlags = _ref3.featureFlags;\n  var statusIsPreviewable = isPreviewableStatus(status, extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags));\n  var cardPreview = cardPreviewCache.get(identifier.id, fileImageMode);\n  var dimensionsAreBigger = isBigger(cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dimensions, dimensions);\n  return statusIsPreviewable && (!hasCardPreview || dimensionsAreBigger);\n};\nexport var getSSRCardPreview = function getSSRCardPreview(ssr, mediaClient, id, params, mediaBlobUrlAttrs) {\n  var dataURI;\n\n  try {\n    var rawDataURI = mediaClient.getImageUrlSync(id, params); // We want to embed some meta context into dataURI for Copy/Paste to work.\n\n    dataURI = mediaBlobUrlAttrs ? addFileAttrsToUrl(rawDataURI, mediaBlobUrlAttrs) : rawDataURI;\n    var source = ssr === 'client' ? 'ssr-client' : 'ssr-server';\n    return {\n      dataURI: dataURI,\n      source: source,\n      orientation: 1\n    };\n  } catch (e) {\n    var reason = ssr === 'server' ? 'ssr-server-uri' : 'ssr-client-uri';\n    throw new SsrPreviewError(reason, e);\n  }\n};\nexport var isLocalPreview = function isLocalPreview(preview) {\n  var localSources = ['local', 'cache-local'];\n  return localSources.includes(preview.source);\n};\nexport var isSSRPreview = function isSSRPreview(preview) {\n  return isSSRClientPreview(preview) || isSSRServerPreview(preview);\n};\nexport var isSSRServerPreview = function isSSRServerPreview(preview) {\n  var ssrClientSources = ['ssr-server', 'cache-ssr-server'];\n  return ssrClientSources.includes(preview.source);\n};\nexport var isSSRClientPreview = function isSSRClientPreview(preview) {\n  var ssrClientSources = ['ssr-client', 'cache-ssr-client'];\n  return ssrClientSources.includes(preview.source);\n};\nexport var isSSRDataPreview = function isSSRDataPreview(preview) {\n  return preview.source === 'ssr-data';\n};\nexport var fetchAndCacheRemotePreview = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(mediaClient, id, dimensions, params, mediaBlobUrlAttrs) {\n    var remotePreview;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return getCardPreviewFromBackend(mediaClient, id, params);\n\n          case 2:\n            remotePreview = _context2.sent;\n            return _context2.abrupt(\"return\", extendAndCachePreview(id, params.mode, _objectSpread(_objectSpread({}, remotePreview), {}, {\n              dimensions: dimensions\n            }), mediaBlobUrlAttrs));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fetchAndCacheRemotePreview(_x2, _x3, _x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();","import { isErrorFileState, isFileIdentifier } from '@atlaskit/media-client';\n\nvar getProcessingStatusFromFileState = function getProcessingStatusFromFileState(status) {\n  switch (status) {\n    case 'processed':\n      return 'succeeded';\n\n    case 'processing':\n      return 'running';\n\n    case 'failed-processing':\n      return 'failed';\n  }\n};\n\nvar getFileDetailsFromFileState = function getFileDetailsFromFileState(state) {\n  return {\n    id: state.id,\n    name: state.name,\n    size: state.size,\n    mimeType: state.mimeType,\n    createdAt: state.createdAt,\n    mediaType: state.mediaType,\n    processingStatus: getProcessingStatusFromFileState(state.status)\n  };\n};\n\nexport var getFileDetails = function getFileDetails(identifier, fileState) {\n  return isFileIdentifier(identifier) ? fileState && !isErrorFileState(fileState) ? getFileDetailsFromFileState(fileState) : {\n    id: identifier.id\n  } : {\n    id: identifier.mediaItemType,\n    name: identifier.name || identifier.dataURI,\n    mediaType: 'image'\n  };\n};","/**@jsx jsx */\nimport { jsx } from '@emotion/react';\nimport { inlinePlayerWrapperStyles, inlinePlayerClassName } from './styles';\nexport var InlinePlayerWrapper = function InlinePlayerWrapper(props) {\n  var testId = props.testId,\n      selected = props.selected,\n      dimensions = props.dimensions,\n      onClick = props.onClick,\n      innerRef = props.innerRef;\n  return jsx(\"div\", {\n    id: \"inlinePlayerWrapper\",\n    \"data-testid\": testId,\n    className: inlinePlayerClassName,\n    css: inlinePlayerWrapperStyles({\n      selected: selected,\n      dimensions: dimensions\n    }),\n    onClick: onClick,\n    ref: innerRef\n  }, props.children);\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { globalMediaEventEmitter } from '@atlaskit/media-client';\nimport { CustomMediaPlayer, InactivityDetector } from '@atlaskit/media-ui';\nimport { defaultImageCardDimensions } from '..';\nimport { CardLoading } from '../utils/lightCards/cardLoading';\nimport { ProgressBar } from './ui/progressBar/progressBar';\nimport { calcBreakpointSize } from './ui/styles';\nimport { isValidPercentageUnit } from '../utils/isValidPercentageUnit';\nimport { getElementDimension } from '../utils/getElementDimension';\nimport { InlinePlayerWrapper } from './inlinePlayerWrapper';\nexport var getPreferredVideoArtifact = function getPreferredVideoArtifact(fileState) {\n  if (fileState.status === 'processed' || fileState.status === 'processing') {\n    var artifacts = fileState.artifacts;\n\n    if (!artifacts) {\n      return undefined;\n    }\n\n    return artifacts['video_1280.mp4'] ? 'video_1280.mp4' : artifacts['video_640.mp4'] ? 'video_640.mp4' : undefined;\n  }\n\n  return undefined;\n};\nexport var InlinePlayerBase = /*#__PURE__*/function (_Component) {\n  _inherits(InlinePlayerBase, _Component);\n\n  var _super = _createSuper(InlinePlayerBase);\n\n  function InlinePlayerBase() {\n    var _this;\n\n    _classCallCheck(this, InlinePlayerBase);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"divRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"setFileSrc\", function (fileSrc) {\n      _this.setState({\n        fileSrc: fileSrc\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setBinaryURL\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this$props, mediaClient, identifier, onError, id, collectionName, fileSrc;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, mediaClient = _this$props.mediaClient, identifier = _this$props.identifier, onError = _this$props.onError;\n              id = identifier.id, collectionName = identifier.collectionName;\n              _context.prev = 2;\n              _context.next = 5;\n              return mediaClient.file.getFileBinaryURL(id, collectionName);\n\n            case 5:\n              fileSrc = _context.sent;\n\n              _this.setFileSrc(fileSrc);\n\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n\n              if (onError) {\n                onError(_context.t0);\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 9]]);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", function () {\n      if (_this.subscription) {\n        _this.subscription.unsubscribe();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"revoke\", function () {\n      var fileSrc = _this.state.fileSrc;\n\n      if (fileSrc) {\n        URL.revokeObjectURL(fileSrc);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDownloadClick\", function () {\n      var _this$props2 = _this.props,\n          mediaClient = _this$props2.mediaClient,\n          identifier = _this$props2.identifier;\n      var id = identifier.id,\n          collectionName = identifier.collectionName;\n      mediaClient.file.downloadBinary(id, undefined, collectionName);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFirstPlay\", function () {\n      var identifier = _this.props.identifier;\n      globalMediaEventEmitter.emit('media-viewed', {\n        fileId: identifier.id,\n        viewingLevel: 'full'\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveElementWidth\", function () {\n      var dimensions = _this.props.dimensions;\n\n      if (!dimensions) {\n        return;\n      }\n\n      var width = dimensions.width;\n\n      if (width && isValidPercentageUnit(width) && !!_this.divRef.current) {\n        var elementWidth = getElementDimension(_this.divRef.current, 'width');\n\n        _this.setState({\n          elementWidth: elementWidth\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(InlinePlayerBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.saveElementWidth();\n      var _this$props3 = this.props,\n          mediaClient = _this$props3.mediaClient,\n          identifier = _this$props3.identifier;\n      var id = identifier.id,\n          collectionName = identifier.collectionName;\n      this.revoke();\n      this.unsubscribe();\n      this.subscription = mediaClient.file.getFileState(id, {\n        collectionName: collectionName\n      }).subscribe({\n        next: function () {\n          var _next = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fileState) {\n            var existingFileSrc, _yield$fileState$prev, value, fileSrc, artifactName, artifacts, _fileSrc, onError;\n\n            return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    if (fileState.status === 'uploading') {\n                      _this2.setState({\n                        isUploading: true,\n                        progress: fileState.progress\n                      });\n                    } else {\n                      _this2.setState({\n                        isUploading: false\n                      });\n                    }\n\n                    existingFileSrc = _this2.state.fileSrc; // we want to reuse the existing fileSrc to prevent re renders\n\n                    if (!existingFileSrc) {\n                      _context2.next = 4;\n                      break;\n                    }\n\n                    return _context2.abrupt(\"return\");\n\n                  case 4:\n                    if (!(fileState.status !== 'error' && fileState.preview)) {\n                      _context2.next = 13;\n                      break;\n                    }\n\n                    _context2.next = 7;\n                    return fileState.preview;\n\n                  case 7:\n                    _yield$fileState$prev = _context2.sent;\n                    value = _yield$fileState$prev.value;\n\n                    if (!(value instanceof Blob && value.type.indexOf('video/') === 0)) {\n                      _context2.next = 13;\n                      break;\n                    }\n\n                    fileSrc = URL.createObjectURL(value);\n\n                    _this2.setFileSrc(fileSrc);\n\n                    return _context2.abrupt(\"return\");\n\n                  case 13:\n                    if (!(fileState.status === 'processed' || fileState.status === 'processing')) {\n                      _context2.next = 30;\n                      break;\n                    }\n\n                    artifactName = getPreferredVideoArtifact(fileState);\n                    artifacts = fileState.artifacts;\n\n                    if (!(!artifactName || !artifacts)) {\n                      _context2.next = 19;\n                      break;\n                    }\n\n                    _this2.setBinaryURL();\n\n                    return _context2.abrupt(\"return\");\n\n                  case 19:\n                    _context2.prev = 19;\n                    _context2.next = 22;\n                    return mediaClient.file.getArtifactURL(artifacts, artifactName, collectionName);\n\n                  case 22:\n                    _fileSrc = _context2.sent;\n\n                    _this2.setFileSrc(_fileSrc);\n\n                    _context2.next = 30;\n                    break;\n\n                  case 26:\n                    _context2.prev = 26;\n                    _context2.t0 = _context2[\"catch\"](19);\n                    onError = _this2.props.onError;\n\n                    if (onError) {\n                      onError(_context2.t0);\n                    }\n\n                  case 30:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee2, null, [[19, 26]]);\n          }));\n\n          function next(_x) {\n            return _next.apply(this, arguments);\n          }\n\n          return next;\n        }()\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe();\n      this.revoke();\n    }\n  }, {\n    key: \"breakpoint\",\n    get: function get() {\n      var width = this.state.elementWidth || (this.props.dimensions ? this.props.dimensions.width : '') || defaultImageCardDimensions.width;\n      return calcBreakpointSize(parseInt(\"\".concat(width), 10));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props4 = this.props,\n          onClick = _this$props4.onClick,\n          dimensions = _this$props4.dimensions,\n          originalDimensions = _this$props4.originalDimensions,\n          selected = _this$props4.selected,\n          testId = _this$props4.testId,\n          identifier = _this$props4.identifier,\n          forwardRef = _this$props4.forwardRef,\n          autoplay = _this$props4.autoplay,\n          cardPreview = _this$props4.cardPreview,\n          onFullscreenChange = _this$props4.onFullscreenChange;\n      var _this$state = this.state,\n          fileSrc = _this$state.fileSrc,\n          isUploading = _this$state.isUploading,\n          progress = _this$state.progress;\n\n      if (!fileSrc) {\n        return /*#__PURE__*/React.createElement(CardLoading, {\n          testId: testId,\n          dimensions: dimensions\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(InlinePlayerWrapper, {\n        testId: testId || 'media-card-inline-player',\n        selected: {\n          selected: selected\n        },\n        onClick: onClick,\n        innerRef: forwardRef || undefined,\n        dimensions: dimensions\n      }, /*#__PURE__*/React.createElement(InactivityDetector, null, function (checkMouseMovement) {\n        return /*#__PURE__*/React.createElement(CustomMediaPlayer, {\n          type: \"video\",\n          src: fileSrc,\n          onFullscreenChange: onFullscreenChange,\n          fileId: identifier.id,\n          isAutoPlay: autoplay,\n          isHDAvailable: false,\n          onDownloadClick: _this3.onDownloadClick,\n          onFirstPlay: _this3.onFirstPlay,\n          lastWatchTimeConfig: {\n            contentId: identifier.id\n          },\n          originalDimensions: originalDimensions,\n          showControls: checkMouseMovement,\n          poster: cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dataURI\n        });\n      }), isUploading ? /*#__PURE__*/React.createElement(ProgressBar, {\n        progress: progress,\n        breakpoint: this.breakpoint,\n        positionBottom: true,\n        showOnTop: true\n      }) : null);\n    }\n  }]);\n\n  return InlinePlayerBase;\n}(Component);\n\n_defineProperty(InlinePlayerBase, \"defaultProps\", {\n  dimensions: defaultImageCardDimensions\n});\n\nvar InlinePlayerForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(InlinePlayerBase, _extends({}, props, {\n    forwardRef: ref\n  }));\n});\nexport var InlinePlayer = InlinePlayerForwardRef;","import { fireMediaCardEvent, getRenderSucceededEventPayload, getRenderErrorEventPayload, getRenderFailedFileStatusPayload, getCopiedFilePayload, getRenderCommencedEventPayload, getRenderPreviewableCardPayload } from '../../utils/analytics';\nexport var fireOperationalEvent = function fireOperationalEvent(createAnalyticsEvent, status, fileAttributes, performanceAttributes, ssrReliability, error) {\n  var fireEvent = function fireEvent(payload) {\n    return fireMediaCardEvent(payload, createAnalyticsEvent);\n  };\n\n  switch (status) {\n    case 'complete':\n      fireEvent(getRenderSucceededEventPayload(fileAttributes, performanceAttributes, ssrReliability));\n      break;\n\n    case 'failed-processing':\n      fireEvent(getRenderFailedFileStatusPayload(fileAttributes, performanceAttributes, ssrReliability));\n      break;\n\n    case 'error':\n      error && fireEvent(getRenderErrorEventPayload(fileAttributes, performanceAttributes, error, ssrReliability));\n      break;\n  }\n};\nexport var fireCommencedEvent = function fireCommencedEvent(createAnalyticsEvent, fileAttributes, performanceAttributes) {\n  fireMediaCardEvent(getRenderCommencedEventPayload(fileAttributes, performanceAttributes), createAnalyticsEvent);\n};\nexport var fireCopiedEvent = function fireCopiedEvent(createAnalyticsEvent, fileId, cardRef) {\n  if (typeof window.getSelection === 'function') {\n    var _selection$containsNo;\n\n    var selection = window.getSelection();\n\n    if (selection !== null && selection !== void 0 && (_selection$containsNo = selection.containsNode) !== null && _selection$containsNo !== void 0 && _selection$containsNo.call(selection, cardRef, true)) {\n      fireMediaCardEvent(getCopiedFilePayload(fileId), createAnalyticsEvent);\n    }\n  }\n};\nexport var fireScreenEvent = function fireScreenEvent(createAnalyticsEvent, fileAttributes) {\n  fireMediaCardEvent(getRenderPreviewableCardPayload(fileAttributes), createAnalyticsEvent);\n};","export default (function () {\n  return document;\n});","import _typeof from \"@babel/runtime/helpers/typeof\";\n\nvar printParam = function printParam(param) {\n  if (typeof param === 'string') {\n    return \"'\".concat(param, \"'\");\n  } else if (_typeof(param) === 'object') {\n    return JSON.stringify(param);\n  } else if (param === undefined) {\n    return 'undefined';\n  }\n\n  return param;\n};\n\nvar printParams = function printParams(args) {\n  return args.map(function (arg) {\n    return printParam(arg);\n  }).join(',');\n};\n\nexport var printFunctionCall = function printFunctionCall(fn) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return \"(\".concat(fn.toString(), \")(\").concat(printParams(args), \");\");\n};\nexport var printScript = function printScript(statements) {\n  return \"(function(){\\n  \".concat(statements.join(';'), \"\\n})();\\n\");\n};","import React from 'react';\nimport { printFunctionCall, printScript } from '../printScript';\n// ----- WARNING -----\n// This is a very sensitive fraction of code.\n// Any changes to this file must be tested directly in product before merging.\n// The scripts printed here might differ from what we observe in our internal tests\n// due to minimification, for example.\nexport var GLOBAL_MEDIA_CARD_SSR = 'mediaCardSsr';\nexport var GLOBAL_MEDIA_NAMESPACE = '__MEDIA_INTERNAL';\nexport function getMediaGlobalScope() {\n  var globalScope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  // Must match GLOBAL_MEDIA_NAMESPACE. Can't reference the constant from here.\n  var namespace = '__MEDIA_INTERNAL';\n\n  if (!globalScope[namespace]) {\n    globalScope[namespace] = {};\n  }\n\n  return globalScope[namespace];\n}\nexport function getMediaCardSSR() {\n  var globalScope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var globalMedia = getMediaGlobalScope(globalScope); // Must match GLOBAL_MEDIA_CARD_SSR. Can't reference the constant from here.\n\n  var key = 'mediaCardSsr';\n\n  if (!globalMedia[key]) {\n    globalMedia[key] = {};\n  }\n\n  return globalMedia[key];\n}\n\nvar dashed = function dashed(param) {\n  return param ? \"-\".concat(param) : '';\n};\n\nexport var getKey = function getKey(_ref) {\n  var id = _ref.id,\n      collectionName = _ref.collectionName,\n      occurrenceKey = _ref.occurrenceKey;\n  return \"\".concat(id).concat(dashed(collectionName)).concat(dashed(occurrenceKey));\n};\nexport var storeDataURI = function storeDataURI(key, dataURI, dimensions, error) {\n  var globalScope = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : window;\n  var mediaCardSsr = getMediaCardSSR(globalScope);\n  mediaCardSsr[key] = {\n    dataURI: dataURI,\n    dimensions: dimensions,\n    error: error\n  };\n};\n\nvar generateScript = function generateScript(identifier, dataURI, dimensions, error) {\n  var functionCall = printFunctionCall(storeDataURI, getKey(identifier), dataURI, dimensions, error);\n  return printScript([getMediaCardSSR.toString(), getMediaGlobalScope.toString(), functionCall]);\n};\n\nexport var StoreSSRDataScript = function StoreSSRDataScript(_ref2) {\n  var dataURI = _ref2.dataURI,\n      identifier = _ref2.identifier,\n      dimensions = _ref2.dimensions,\n      error = _ref2.error;\n  return /*#__PURE__*/React.createElement(\"script\", {\n    dangerouslySetInnerHTML: {\n      __html: generateScript(identifier, dataURI, dimensions, error)\n    }\n  });\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { isErrorFileState } from '@atlaskit/media-client';\nimport { MediaCardError } from '../../errors';\nimport { getCardStatus, isFinalCardStatus } from './getCardStatus';\nimport { extractFilePreviewStatus } from './getCardPreview';\nexport var createStateUpdater = function createStateUpdater(newState) {\n  return function (prevState) {\n    // Only override if previous status is non-final\n    // or new status is 'complete'\n    if (isFinalCardStatus(prevState.status) && newState.status !== 'complete') {\n      return prevState;\n    }\n\n    return _objectSpread(_objectSpread({}, prevState), newState);\n  };\n};\nexport var getCardStateFromFileState = function getCardStateFromFileState(fileState, isBannedLocalPreview, featureFlags) {\n  var status = getCardStatus(fileState.status, extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags));\n  var error = status === 'error' && isErrorFileState(fileState) ? new MediaCardError('error-file-state', new Error(fileState.message)) : undefined;\n  var progress = status === 'uploading' && fileState.status === 'uploading' ? fileState.progress : 1;\n  return {\n    fileState: fileState,\n    status: status,\n    progress: progress,\n    error: error\n  };\n};","export var MediaCardCursor;\n\n(function (MediaCardCursor) {\n  MediaCardCursor[\"Action\"] = \"pointer\";\n  MediaCardCursor[\"NotReady\"] = \"wait\";\n})(MediaCardCursor || (MediaCardCursor = {}));","import { MediaCardCursor } from '../types';\n\n/**\n * When the returned value is undefined, we'd expect the media card to take the parent's cursor style.\n */\nexport var getMediaCardCursor = function getMediaCardCursor(useInlinePlayer, useMediaViewer, isErrorStatus, hasCardPreview, mediaType) {\n  // If error status or no action is requested = NoAction\n  if (isErrorStatus || !useInlinePlayer && !useMediaViewer) {\n    return;\n  }\n\n  if (!mediaType && (useInlinePlayer || useInlinePlayer && useMediaViewer)) {\n    return MediaCardCursor.NotReady;\n  } else if (mediaType === 'video' && hasCardPreview && useInlinePlayer) {\n    return MediaCardCursor.Action;\n  }\n\n  if (useMediaViewer) {\n    return MediaCardCursor.Action;\n  }\n\n  return;\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { ConcurrentExperience, ExperiencePerformanceTypes, ExperienceTypes } from '@atlaskit/ufo';\nimport { extractErrorInfo, getRenderErrorRequestMetadata, LOGGED_FEATURE_FLAG_KEYS } from './analytics';\nimport { getMediaEnvironment, getMediaRegion } from '@atlaskit/media-client';\nvar packageName = \"@atlaskit/media-card\";\nvar packageVersion = \"74.0.0\";\nvar concurrentExperience;\n\nvar getExperience = function getExperience(id) {\n  if (!concurrentExperience) {\n    var inlineExperience = {\n      platform: {\n        component: 'media-card'\n      },\n      type: ExperienceTypes.Experience,\n      performanceType: ExperiencePerformanceTypes.InlineResult,\n      featureFlags: LOGGED_FEATURE_FLAG_KEYS\n    };\n    concurrentExperience = new ConcurrentExperience('media-card-render', inlineExperience);\n  }\n\n  return concurrentExperience.getInstance(id);\n};\n\nexport var startUfoExperience = function startUfoExperience(id) {\n  getExperience(id).start();\n};\nexport var completeUfoExperience = function completeUfoExperience(id, status, fileAttributes, fileStateFlags, ssrReliability, error) {\n  switch (status) {\n    case 'complete':\n      succeedUfoExperience(id, {\n        fileAttributes: fileAttributes,\n        ssrReliability: ssrReliability,\n        fileStateFlags: fileStateFlags\n      });\n      break;\n\n    case 'failed-processing':\n      failUfoExperience(id, {\n        fileAttributes: fileAttributes,\n        failReason: 'failed-processing',\n        ssrReliability: ssrReliability,\n        fileStateFlags: fileStateFlags\n      });\n      break;\n\n    case 'error':\n      error && failUfoExperience(id, _objectSpread(_objectSpread({\n        fileAttributes: fileAttributes\n      }, extractErrorInfo(error)), {}, {\n        request: getRenderErrorRequestMetadata(error),\n        ssrReliability: ssrReliability,\n        fileStateFlags: fileStateFlags\n      }));\n      break;\n  }\n};\n\nvar succeedUfoExperience = function succeedUfoExperience(id, properties) {\n  getExperience(id).success({\n    metadata: _objectSpread(_objectSpread({}, properties), {}, {\n      packageName: packageName,\n      packageVersion: packageVersion,\n      mediaEnvironment: getMediaEnvironment(),\n      mediaRegion: getMediaRegion()\n    })\n  });\n};\n\nvar failUfoExperience = function failUfoExperience(id, properties) {\n  getExperience(id).failure({\n    metadata: _objectSpread(_objectSpread({}, properties), {}, {\n      packageName: packageName,\n      packageVersion: packageVersion,\n      mediaEnvironment: getMediaEnvironment(),\n      mediaRegion: getMediaRegion()\n    })\n  });\n};","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, createRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { withMediaAnalyticsContext } from '@atlaskit/media-common';\nimport DownloadIcon from '@atlaskit/icon/glyph/download';\nimport { globalMediaEventEmitter, isDifferentIdentifier, isFileIdentifier, RECENTS_COLLECTION, isImageRepresentationReady, isExternalImageIdentifier, isProcessedFileState, imageResizeModeToFileImageMode } from '@atlaskit/media-client';\nimport { MediaViewer } from '@atlaskit/media-viewer';\nimport { injectIntl, IntlProvider } from 'react-intl-next';\nimport { CardView } from '../cardView';\nimport { ABS_VIEWPORT_ANCHOR_OFFSET_TOP, ViewportDetector, ViewportAnchor } from '../../utils/viewportDetector';\nimport { getRequestedDimensions } from '../../utils/getDataURIDimension';\nimport { getCardPreview, getCardPreviewFromCache, removeCardPreviewFromCache, getFilePreviewFromFileState, shouldResolvePreview, getSSRCardPreview, isLocalPreview, isSSRPreview, isSSRClientPreview, isSSRDataPreview, fetchAndCacheRemotePreview } from './getCardPreview';\nimport { getFileDetails } from '../../utils/metadata';\nimport { InlinePlayer } from '../inlinePlayer';\nimport { getFileAttributes, extractErrorInfo, LOGGED_FEATURE_FLAGS } from '../../utils/analytics';\nimport { isLocalPreviewError, MediaCardError, ensureMediaCardError, ImageLoadError } from '../../errors';\nimport { fireOperationalEvent as _fireOperationalEvent, fireCommencedEvent as _fireCommencedEvent, fireCopiedEvent, fireScreenEvent } from './cardAnalytics';\nimport getDocument from '../../utils/document';\nimport { StoreSSRDataScript, getSSRData } from '../../utils/globalScope';\nimport { getCardStateFromFileState, createStateUpdater } from './cardState';\nimport { getMediaFeatureFlag } from '@atlaskit/media-common';\nimport { isBigger } from '../../utils/dimensionComparer';\nimport { getMediaCardCursor } from '../../utils/getMediaCardCursor';\nimport { completeUfoExperience, startUfoExperience } from '../../utils/ufoExperiences';\nimport { generateUniqueId } from '../../utils/generateUniqueId';\nvar packageName = \"@atlaskit/media-card\";\nvar packageVersion = \"74.0.0\";\nexport var CardBase = /*#__PURE__*/function (_Component) {\n  _inherits(CardBase, _Component);\n\n  var _super = _createSuper(CardBase);\n\n  // An internalOccurrenceKey is a randomly generated value to differentiate various instances\n  // of Cards regardless of whether it shares the same file (either internal or external)\n  // We initialise timeElapsedTillCommenced\n  // to avoid extra branching on a possibly undefined value.\n  function CardBase(props) {\n    var _this;\n\n    _classCallCheck(this, CardBase);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"internalOccurrenceKey\", generateUniqueId());\n\n    _defineProperty(_assertThisInitialized(_this), \"hasBeenMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"fileStateFlags\", {\n      wasStatusUploading: false,\n      wasStatusProcessing: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"viewportPreAnchorRef\", /*#__PURE__*/createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"viewportPostAnchorRef\", /*#__PURE__*/createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"ssrReliability\", {\n      server: {\n        status: 'unknown'\n      },\n      client: {\n        status: 'unknown'\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"timeElapsedTillCommenced\", performance.now());\n\n    _defineProperty(_assertThisInitialized(_this), \"getImageURLParams\", function (_ref) {\n      var collection = _ref.collectionName;\n      return _objectSpread(_objectSpread({\n        collection: collection,\n        mode: imageResizeModeToFileImageMode(_this.props.resizeMode)\n      }, _this.requestedDimensions), {}, {\n        allowAnimated: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMediaBlobUrlAttrs\", function (identifier, fileState) {\n      var id = identifier.id,\n          collection = identifier.collectionName;\n      var _this$props = _this.props,\n          originalDimensions = _this$props.originalDimensions,\n          contextId = _this$props.contextId,\n          alt = _this$props.alt;\n\n      var _getFileDetails = getFileDetails(identifier, fileState),\n          mimeType = _getFileDetails.mimeType,\n          name = _getFileDetails.name,\n          size = _getFileDetails.size;\n\n      return contextId ? _objectSpread(_objectSpread({\n        id: id,\n        collection: collection,\n        contextId: contextId,\n        mimeType: mimeType,\n        name: name,\n        size: size\n      }, originalDimensions || _this.requestedDimensions), {}, {\n        alt: alt\n      }) : undefined;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCardPreviewParams\", function (identifier, fileState) {\n      var isBannedLocalPreview = _this.state.isBannedLocalPreview;\n      var id = identifier.id;\n      var _this$props2 = _this.props,\n          _this$props2$dimensio = _this$props2.dimensions,\n          dimensions = _this$props2$dimensio === void 0 ? {} : _this$props2$dimensio,\n          mediaClient = _this$props2.mediaClient;\n      return {\n        mediaClient: mediaClient,\n        id: id,\n        dimensions: dimensions,\n        onLocalPreviewError: _this.fireLocalPreviewErrorEvent,\n        filePreview: isBannedLocalPreview ? undefined : getFilePreviewFromFileState(fileState),\n        isRemotePreviewReady: isImageRepresentationReady(fileState),\n        imageUrlParams: _this.getImageURLParams(identifier),\n        mediaBlobUrlAttrs: _this.getMediaBlobUrlAttrs(identifier, fileState)\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCacheSSRPreview\", function (identifier) {\n      var _this$props3 = _this.props,\n          mediaClient = _this$props3.mediaClient,\n          _this$props3$dimensio = _this$props3.dimensions,\n          dimensions = _this$props3$dimensio === void 0 ? {} : _this$props3$dimensio;\n      fetchAndCacheRemotePreview(mediaClient, identifier.id, dimensions, _this.getImageURLParams(identifier), _this.getMediaBlobUrlAttrs(identifier)).catch(function () {// No need to log this error.\n        // If preview fails, it will be refetched later\n        //TODO: test this catch\n        // https://product-fabric.atlassian.net/browse/MEX-1071\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"refetchSSRPreview\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(identifier) {\n        var _this$props4, mediaClient, _this$props4$dimensio, dimensions, cardPreview;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props4 = _this.props, mediaClient = _this$props4.mediaClient, _this$props4$dimensio = _this$props4.dimensions, dimensions = _this$props4$dimensio === void 0 ? {} : _this$props4$dimensio;\n                _context.prev = 1;\n                _context.next = 4;\n                return fetchAndCacheRemotePreview(mediaClient, identifier.id, dimensions, _this.getImageURLParams(identifier), _this.getMediaBlobUrlAttrs(identifier));\n\n              case 4:\n                cardPreview = _context.sent;\n\n                _this.safeSetState({\n                  cardPreview: cardPreview\n                });\n\n                _context.next = 10;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"resolvePreview\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(identifier, fileState) {\n        var params, cardPreview, wrappedError;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                params = _this.getCardPreviewParams(identifier, fileState);\n                _context2.next = 4;\n                return getCardPreview(params);\n\n              case 4:\n                cardPreview = _context2.sent;\n\n                _this.safeSetState({\n                  cardPreview: cardPreview\n                });\n\n                _context2.next = 12;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](0);\n                wrappedError = ensureMediaCardError('preview-fetch', _context2.t0); //  If remote preview fails, we set status 'error'\n                //  If local preview fails (i.e, no remote preview available),\n                //  we can stay in the same status until there is a remote preview available\n                //  If it's any other error we set status 'error'\n\n                if (isLocalPreviewError(wrappedError)) {\n                  _this.safeSetState({\n                    isBannedLocalPreview: true\n                  });\n                } else {\n                  _this.safeSetState({\n                    status: 'error',\n                    error: wrappedError\n                  });\n                }\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 8]]);\n      }));\n\n      return function (_x2, _x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"getPerformanceAttributes\", function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          timeElapsedTillCommenced = _assertThisInitialize.timeElapsedTillCommenced;\n\n      var timeElapsedTillEvent = performance.now();\n      var durationSinceCommenced = timeElapsedTillCommenced && timeElapsedTillEvent - timeElapsedTillCommenced;\n      return {\n        overall: {\n          durationSincePageStart: timeElapsedTillEvent,\n          durationSinceCommenced: durationSinceCommenced\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"logSSRImageError\", function (cardPreview) {\n      if (cardPreview) {\n        var failedSSRObject = _objectSpread({\n          status: 'fail'\n        }, extractErrorInfo(new ImageLoadError(cardPreview.source)));\n\n        if (isSSRClientPreview(cardPreview)) {\n          _this.ssrReliability.client = failedSSRObject;\n        }\n        /*\n          If the cardPreview failed and it comes from server (global scope / ssrData), it means that we have reused it in client and the error counts for both: server & client.\n        */\n\n\n        if (isSSRDataPreview(cardPreview)) {\n          _this.ssrReliability.server = failedSSRObject;\n          _this.ssrReliability.client = failedSSRObject;\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function (cardPreview) {\n      _this.logSSRImageError(cardPreview);\n\n      var currentPreview = _this.state.cardPreview; // If the dataURI has been replaced, we can dismiss this error\n\n      if ((cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dataURI) !== (currentPreview === null || currentPreview === void 0 ? void 0 : currentPreview.dataURI)) {\n        return;\n      }\n\n      var error = new ImageLoadError(cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.source);\n      var isLocal = cardPreview && isLocalPreview(cardPreview);\n      var isSSR = cardPreview && (isSSRClientPreview(cardPreview) || isSSRDataPreview(cardPreview));\n\n      if (isLocal || isSSR) {\n        var updateState = {\n          cardPreview: undefined\n        };\n\n        if (isLocal) {\n          updateState.isBannedLocalPreview = true;\n\n          _this.fireLocalPreviewErrorEvent(error);\n        }\n\n        var _this$props5 = _this.props,\n            identifier = _this$props5.identifier,\n            resizeMode = _this$props5.resizeMode;\n        var fileImageMode = imageResizeModeToFileImageMode(resizeMode);\n        isFileIdentifier(identifier) && removeCardPreviewFromCache(identifier.id, fileImageMode);\n\n        _this.safeSetState(updateState);\n      } else {\n        _this.safeSetState({\n          status: 'error',\n          error: error\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function (cardPreview) {\n      if (cardPreview) {\n        if (isSSRClientPreview(cardPreview) && _this.ssrReliability.client.status === 'unknown') {\n          _this.ssrReliability.client = {\n            status: 'success'\n          };\n        }\n        /*\n          If the image loads successfully and it comes from server (global scope / ssrData), it means that we have reused it in client and the success counts for both: server & client.\n        */\n\n\n        if (isSSRDataPreview(cardPreview) && _this.ssrReliability.server.status === 'unknown') {\n          _this.ssrReliability.server = {\n            status: 'success'\n          };\n          _this.ssrReliability.client = {\n            status: 'success'\n          };\n        }\n      }\n\n      var currentPreview = _this.state.cardPreview; // If the dataURI has been replaced, we can dismiss this callback\n\n      if ((cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dataURI) !== (currentPreview === null || currentPreview === void 0 ? void 0 : currentPreview.dataURI)) {\n        return;\n      }\n\n      _this.safeSetState({\n        previewDidRender: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireCopiedEvent\", function () {\n      var createAnalyticsEvent = _this.props.createAnalyticsEvent;\n      var cardRef = _this.state.cardRef;\n      cardRef && createAnalyticsEvent && fireCopiedEvent(createAnalyticsEvent, _this.metadata.id, cardRef);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireScreenEvent\", function () {\n      var createAnalyticsEvent = _this.props.createAnalyticsEvent;\n      createAnalyticsEvent && fireScreenEvent(createAnalyticsEvent, _this.fileAttributes);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireLocalPreviewErrorEvent\", function (error) {// TODO: track local preview success rate\n      // https://product-fabric.atlassian.net/browse/MEX-774\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"safeSetState\", function (state) {\n      if (_this.hasBeenMounted) {\n        // If it's setting the status, we need to use a state updater function,\n        // which ensures that no non-final status overrides a final status.\n        // If no status is set, we don't need a sate updater\n        var updater = !!state.status ? createStateUpdater(state) : state;\n\n        _this.setState(updater);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", function () {\n      if (_this.subscription) {\n        _this.subscription.unsubscribe();\n      }\n\n      if (_this.hasBeenMounted) {\n        // TODO MEX-788: add test for \"do not remove the card preview when unsubscribing\".\n        _this.setState({\n          isBannedLocalPreview: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCardViewClick\", function (event, analyticsEvent) {\n      var _this$props6 = _this.props,\n          identifier = _this$props6.identifier,\n          useInlinePlayer = _this$props6.useInlinePlayer,\n          shouldOpenMediaViewer = _this$props6.shouldOpenMediaViewer;\n      var cardPreview = _this.state.cardPreview;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize2.metadata;\n\n      _this.onClick(event, analyticsEvent);\n\n      if (!metadata) {\n        return;\n      }\n\n      var isVideo = metadata && metadata.mediaType === 'video';\n\n      if (useInlinePlayer && isVideo && !!cardPreview) {\n        _this.setState({\n          isPlayingFile: true,\n          shouldAutoplay: true\n        });\n      } else if (shouldOpenMediaViewer) {\n        var mediaViewerSelectedItem;\n\n        if (isFileIdentifier(identifier)) {\n          mediaViewerSelectedItem = {\n            id: identifier.id,\n            mediaItemType: 'file',\n            collectionName: identifier.collectionName,\n            occurrenceKey: identifier.occurrenceKey\n          };\n        } else {\n          mediaViewerSelectedItem = {\n            mediaItemType: 'external-image',\n            dataURI: identifier.dataURI,\n            name: identifier.name\n          };\n        }\n\n        _this.setState({\n          mediaViewerSelectedItem: mediaViewerSelectedItem\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInlinePlayerError\", function () {\n      _this.setState({\n        isPlayingFile: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRef\", function (cardRef) {\n      !!cardRef && _this.setState({\n        cardRef: cardRef\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInlinePlayer\", function () {\n      var _this$props7 = _this.props,\n          identifier = _this$props7.identifier,\n          mediaClient = _this$props7.mediaClient,\n          dimensions = _this$props7.dimensions,\n          selected = _this$props7.selected,\n          testId = _this$props7.testId,\n          originalDimensions = _this$props7.originalDimensions,\n          onFullscreenChange = _this$props7.onFullscreenChange;\n      var _this$state = _this.state,\n          shouldAutoplay = _this$state.shouldAutoplay,\n          cardPreview = _this$state.cardPreview;\n      return /*#__PURE__*/React.createElement(InlinePlayer, {\n        mediaClient: mediaClient,\n        dimensions: dimensions,\n        originalDimensions: originalDimensions,\n        identifier: identifier,\n        autoplay: !!shouldAutoplay,\n        onFullscreenChange: onFullscreenChange,\n        onError: _this.onInlinePlayerError,\n        onClick: _this.onClick,\n        selected: selected,\n        ref: _this.setRef,\n        testId: testId,\n        cardPreview: cardPreview\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMediaViewerClose\", function () {\n      _this.setState({\n        mediaViewerSelectedItem: undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDisplayImage\", function () {\n      var identifier = _this.props.identifier;\n      var payloadPart;\n\n      if (isFileIdentifier(identifier)) {\n        payloadPart = {\n          fileId: identifier.id,\n          isUserCollection: identifier.collectionName === RECENTS_COLLECTION\n        };\n      } else {\n        payloadPart = {\n          fileId: identifier.dataURI,\n          isUserCollection: false\n        };\n      }\n\n      globalMediaEventEmitter.emit('media-viewed', _objectSpread({\n        viewingLevel: 'minimal'\n      }, payloadPart));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMediaViewer\", function () {\n      var mediaViewerSelectedItem = _this.state.mediaViewerSelectedItem;\n      var _this$props8 = _this.props,\n          mediaClient = _this$props8.mediaClient,\n          identifier = _this$props8.identifier,\n          mediaViewerDataSource = _this$props8.mediaViewerDataSource,\n          contextId = _this$props8.contextId,\n          featureFlags = _this$props8.featureFlags;\n\n      if (!mediaViewerSelectedItem) {\n        return;\n      }\n\n      var collectionName = isFileIdentifier(identifier) ? identifier.collectionName || '' : '';\n      var dataSource = mediaViewerDataSource || {\n        list: []\n      };\n      return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(MediaViewer, {\n        collectionName: collectionName,\n        dataSource: dataSource,\n        mediaClientConfig: mediaClient.config,\n        selectedItem: mediaViewerSelectedItem,\n        onClose: _this.onMediaViewerClose,\n        contextId: contextId,\n        featureFlags: featureFlags\n      }), document.body);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCard\", function () {\n      var _this$props9 = _this.props,\n          identifier = _this$props9.identifier,\n          isLazy = _this$props9.isLazy,\n          appearance = _this$props9.appearance,\n          resizeMode = _this$props9.resizeMode,\n          dimensions = _this$props9.dimensions,\n          selectable = _this$props9.selectable,\n          selected = _this$props9.selected,\n          disableOverlay = _this$props9.disableOverlay,\n          alt = _this$props9.alt,\n          testId = _this$props9.testId,\n          featureFlags = _this$props9.featureFlags,\n          titleBoxBgColor = _this$props9.titleBoxBgColor,\n          titleBoxIcon = _this$props9.titleBoxIcon,\n          ssr = _this$props9.ssr,\n          useInlinePlayer = _this$props9.useInlinePlayer,\n          shouldOpenMediaViewer = _this$props9.shouldOpenMediaViewer;\n      var mediaItemType = identifier.mediaItemType;\n      var _this$state2 = _this.state,\n          status = _this$state2.status,\n          progress = _this$state2.progress,\n          cardPreview = _this$state2.cardPreview,\n          error = _this$state2.error,\n          cardRef = _this$state2.cardRef,\n          isCardVisible = _this$state2.isCardVisible;\n\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize3.metadata;\n\n      var _assertThisInitialize4 = _assertThisInitialized(_this),\n          onCardViewClick = _assertThisInitialize4.onCardViewClick,\n          onDisplayImage = _assertThisInitialize4.onDisplayImage,\n          actions = _assertThisInitialize4.actions,\n          onMouseEnter = _assertThisInitialize4.onMouseEnter; // Card can be artificially turned visible before entering the viewport\n      // For example, when we have the image in cache\n\n\n      var nativeLazyLoad = isLazy && !isCardVisible; // Force Media Image to always display img for SSR\n\n      var forceSyncDisplay = !!ssr;\n      var mediaCardCursor = getMediaCardCursor(!!useInlinePlayer, !!shouldOpenMediaViewer, status === 'error' || status === 'failed-processing', !!_this.state.cardPreview, metadata.mediaType);\n      var card = /*#__PURE__*/React.createElement(CardView, {\n        status: status,\n        error: error,\n        mediaItemType: mediaItemType,\n        metadata: metadata,\n        cardPreview: cardPreview,\n        alt: alt,\n        appearance: appearance,\n        resizeMode: resizeMode,\n        dimensions: dimensions,\n        actions: actions,\n        selectable: selectable,\n        selected: selected,\n        onClick: onCardViewClick,\n        onMouseEnter: onMouseEnter,\n        disableOverlay: disableOverlay,\n        progress: progress,\n        onDisplayImage: onDisplayImage,\n        innerRef: _this.setRef,\n        testId: testId,\n        featureFlags: featureFlags,\n        titleBoxBgColor: titleBoxBgColor,\n        titleBoxIcon: titleBoxIcon,\n        onImageError: _this.onImageError,\n        onImageLoad: _this.onImageLoad,\n        nativeLazyLoad: nativeLazyLoad,\n        forceSyncDisplay: forceSyncDisplay,\n        mediaCardCursor: mediaCardCursor\n      });\n      return isLazy ? /*#__PURE__*/React.createElement(ViewportDetector, {\n        cardEl: cardRef,\n        preAnchorRef: _this.viewportPreAnchorRef,\n        postAnchorRef: _this.viewportPostAnchorRef,\n        onVisible: _this.onCardInViewport\n      }, /*#__PURE__*/React.createElement(ViewportAnchor, {\n        ref: _this.viewportPreAnchorRef,\n        offsetTop: -ABS_VIEWPORT_ANCHOR_OFFSET_TOP\n      }), card, /*#__PURE__*/React.createElement(ViewportAnchor, {\n        ref: _this.viewportPostAnchorRef,\n        offsetTop: ABS_VIEWPORT_ANCHOR_OFFSET_TOP\n      })) : card;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"storeSSRData\", function () {\n      var _this$ssrReliability$;\n\n      var _this$props10 = _this.props,\n          ssr = _this$props10.ssr,\n          identifier = _this$props10.identifier;\n      var _this$state$cardPrevi = _this.state.cardPreview;\n      _this$state$cardPrevi = _this$state$cardPrevi === void 0 ? {} : _this$state$cardPrevi;\n      var dataURI = _this$state$cardPrevi.dataURI;\n      return isFileIdentifier(identifier) && ssr === 'server' && /*#__PURE__*/React.createElement(StoreSSRDataScript, {\n        identifier: identifier,\n        dataURI: dataURI,\n        dimensions: _this.requestedDimensions,\n        error: ((_this$ssrReliability$ = _this.ssrReliability.server) === null || _this$ssrReliability$ === void 0 ? void 0 : _this$ssrReliability$.status) === 'fail' ? _this.ssrReliability.server : undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCardInViewport\", function () {\n      _this.setState({\n        isCardVisible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event, analyticsEvent) {\n      var onClick = _this.props.onClick;\n\n      var _assertThisInitialize5 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize5.metadata;\n\n      if (onClick) {\n        var cardEvent = {\n          event: event,\n          mediaItemDetails: metadata\n        };\n        onClick(cardEvent, analyticsEvent);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseEnter\", function (event) {\n      var onMouseEnter = _this.props.onMouseEnter;\n\n      var _assertThisInitialize6 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize6.metadata;\n\n      if (onMouseEnter) {\n        var cardEvent = {\n          event: event,\n          mediaItemDetails: metadata\n        };\n        onMouseEnter(cardEvent);\n      }\n    });\n\n    var _status = 'loading';\n\n    var _cardPreview;\n\n    var _error;\n\n    var _this$props11 = _this.props,\n        _identifier = _this$props11.identifier,\n        _resizeMode = _this$props11.resizeMode,\n        _ssr = _this$props11.ssr,\n        _mediaClient = _this$props11.mediaClient;\n\n    if (isFileIdentifier(_identifier)) {\n      var id = _identifier.id;\n      var fileImageMode = imageResizeModeToFileImageMode(_resizeMode);\n      _cardPreview = getCardPreviewFromCache(id, fileImageMode);\n\n      if (!_cardPreview && _ssr) {\n        var _this$ssrData, _this$ssrData2;\n\n        _this.ssrData = getSSRData(_identifier);\n\n        if ((_this$ssrData = _this.ssrData) !== null && _this$ssrData !== void 0 && _this$ssrData.error) {\n          _this.ssrReliability.server = _objectSpread({\n            status: 'fail'\n          }, _this.ssrData.error);\n        }\n\n        if (!((_this$ssrData2 = _this.ssrData) !== null && _this$ssrData2 !== void 0 && _this$ssrData2.dataURI)) {\n          try {\n            _cardPreview = getSSRCardPreview(_ssr, _mediaClient, _identifier.id, _this.getImageURLParams(_identifier), _this.getMediaBlobUrlAttrs(_identifier));\n          } catch (e) {\n            _this.ssrReliability[_ssr] = _objectSpread({\n              status: 'fail'\n            }, extractErrorInfo(e));\n          }\n        } else {\n          _cardPreview = {\n            dataURI: _this.ssrData.dataURI,\n            source: 'ssr-data'\n          };\n        }\n      }\n    } else if (isExternalImageIdentifier(_identifier)) {\n      _this.fireCommencedEvent();\n\n      _status = 'loading-preview';\n      var dataURI = _identifier.dataURI;\n      _cardPreview = {\n        dataURI: dataURI,\n        orientation: 1,\n        source: 'external'\n      };\n    } // If cardPreview is available from local cache or external, `isCardVisible`\n    // should be true to avoid flickers during re-mount of the component\n    // should not be visible for SSR preview, otherwise we'll fire the metadata fetch from\n    // outside the viewport\n\n\n    var _isCardVisible = !_this.props.isLazy || !!_cardPreview && !isSSRPreview(_cardPreview);\n\n    _this.state = {\n      status: _status,\n      isCardVisible: _isCardVisible,\n      isPlayingFile: false,\n      shouldAutoplay: false,\n      cardPreview: _cardPreview,\n      cardRef: null,\n      isBannedLocalPreview: false,\n      previewDidRender: false,\n      error: _error\n    };\n    return _this;\n  }\n\n  _createClass(CardBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.hasBeenMounted = true;\n      var _this$state3 = this.state,\n          isCardVisible = _this$state3.isCardVisible,\n          cardPreview = _this$state3.cardPreview;\n      var _this$props12 = this.props,\n          identifier = _this$props12.identifier,\n          ssr = _this$props12.ssr,\n          dimensions = _this$props12.dimensions;\n\n      if (isCardVisible && isFileIdentifier(identifier)) {\n        this.updateStateForIdentifier(identifier);\n      }\n\n      if (isCardVisible && !!ssr && !!cardPreview && isFileIdentifier(identifier)) {\n        var _this$ssrData3;\n\n        if (isSSRClientPreview(cardPreview)) {\n          // Since the SSR preview brings the token in the query params,\n          // We need to fetch the remote preview to be able to cache it,\n          this.setCacheSSRPreview(identifier);\n        }\n\n        if (isSSRDataPreview(cardPreview) && isBigger((_this$ssrData3 = this.ssrData) === null || _this$ssrData3 === void 0 ? void 0 : _this$ssrData3.dimensions, dimensions)) {\n          // If dimensions from Server have changed and are bigger,\n          // we need to refetch\n          this.refetchSSRPreview(identifier);\n        }\n      } // we add a listener for each of the cards on the page\n      // and then check if the triggered listener is from the card\n      // that contains a div in current window.getSelection()\n      // won't work in IE11\n\n\n      getDocument().addEventListener('copy', this.fireCopiedEvent);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var prevMediaClient = prevProps.mediaClient,\n          prevIdentifier = prevProps.identifier;\n      var prevIsCardVisible = prevState.isCardVisible;\n      var _this$props13 = this.props,\n          mediaClient = _this$props13.mediaClient,\n          identifier = _this$props13.identifier,\n          dimensions = _this$props13.dimensions,\n          featureFlags = _this$props13.featureFlags,\n          useInlinePlayer = _this$props13.useInlinePlayer,\n          disableOverlay = _this$props13.disableOverlay,\n          resizeMode = _this$props13.resizeMode;\n      var _this$state4 = this.state,\n          isCardVisible = _this$state4.isCardVisible,\n          cardPreview = _this$state4.cardPreview,\n          status = _this$state4.status,\n          fileState = _this$state4.fileState,\n          isBannedLocalPreview = _this$state4.isBannedLocalPreview,\n          previewDidRender = _this$state4.previewDidRender,\n          isPlayingFile = _this$state4.isPlayingFile;\n      var isDifferent = isDifferentIdentifier(prevIdentifier, identifier);\n      var turnedVisible = !prevIsCardVisible && isCardVisible;\n      var isNewMediaClient = prevMediaClient !== mediaClient;\n      var fileImageMode = imageResizeModeToFileImageMode(resizeMode);\n      this.updateFileStateFlag(fileState);\n\n      if (isExternalImageIdentifier(identifier) && isDifferent) {\n        this.fireCommencedEvent();\n        var dataURI = identifier.dataURI;\n        this.setState({\n          status: 'loading-preview',\n          cardPreview: {\n            dataURI: dataURI,\n            orientation: 1,\n            source: 'external'\n          },\n          isCardVisible: true\n        });\n      }\n\n      if (isFileIdentifier(identifier) && (turnedVisible || !!this.subscription && (isNewMediaClient || isDifferent))) {\n        this.updateStateForIdentifier(identifier);\n      }\n\n      if (this.state.status !== prevState.status) {\n        this.fireOperationalEvent();\n\n        if (this.state.status === 'complete' || this.fileAttributes.fileMediatype === 'video' && !!cardPreview && this.state.status === 'processing') {\n          this.fireScreenEvent();\n        }\n      }\n\n      if (isFileIdentifier(identifier) && fileState && shouldResolvePreview({\n        status: status,\n        fileState: fileState,\n        dimensions: dimensions,\n        identifier: identifier,\n        fileImageMode: fileImageMode,\n        featureFlags: featureFlags,\n        hasCardPreview: !!cardPreview,\n        isBannedLocalPreview: isBannedLocalPreview\n      })) {\n        this.resolvePreview(identifier, fileState);\n      }\n\n      if (turnedVisible && this.props.ssr && !!cardPreview && isSSRClientPreview(cardPreview) && isFileIdentifier(identifier)) {\n        // Since the SSR preview brings the token in the query params,\n        // We need to fetch the remote preview to be able to cache it,\n        this.setCacheSSRPreview(identifier);\n      }\n\n      if (previewDidRender && // We should't complete if status is uploading\n      ['loading-preview', 'processing'].includes(status)) {\n        this.safeSetState({\n          status: 'complete'\n        });\n        this.unsubscribe();\n      }\n\n      var isVideo = this.fileAttributes.fileMediatype === 'video';\n      var videoAvailableToPlay = fileState && isProcessedFileState(fileState);\n\n      if (isVideo && !isPlayingFile && disableOverlay && useInlinePlayer && videoAvailableToPlay && getMediaFeatureFlag('timestampOnVideo', this.props.featureFlags)) {\n        this.setState({\n          isPlayingFile: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.hasBeenMounted = false;\n      this.unsubscribe();\n      getDocument().removeEventListener('copy', this.fireCopiedEvent);\n    }\n  }, {\n    key: \"updateStateForIdentifier\",\n    value: function updateStateForIdentifier(identifier) {\n      this.fireCommencedEvent();\n      this.subscribeInternalFile(identifier);\n    }\n  }, {\n    key: \"updateFileStateFlag\",\n    value: function updateFileStateFlag(fileState) {\n      if (!fileState) {\n        return;\n      }\n\n      var status = fileState.status;\n\n      if (status === 'processing') {\n        this.fileStateFlags.wasStatusProcessing = true;\n      } else if (status === 'uploading') {\n        this.fileStateFlags.wasStatusUploading = true;\n      }\n    }\n  }, {\n    key: \"subscribeInternalFile\",\n    value: function subscribeInternalFile(identifier) {\n      var _this2 = this;\n\n      var mediaClient = this.props.mediaClient;\n      var isBannedLocalPreview = this.state.isBannedLocalPreview;\n      var id = identifier.id,\n          collectionName = identifier.collectionName,\n          occurrenceKey = identifier.occurrenceKey;\n      this.unsubscribe();\n      this.subscription = mediaClient.file.getFileState(id, {\n        collectionName: collectionName,\n        occurrenceKey: occurrenceKey\n      }).subscribe({\n        next: function next(fileState) {\n          var featureFlags = _this2.props.featureFlags;\n          var newState = getCardStateFromFileState(fileState, isBannedLocalPreview, featureFlags);\n\n          _this2.safeSetState(newState);\n        },\n        error: function error(e) {\n          var errorReason = _this2.state.status === 'uploading' ? 'upload' : 'metadata-fetch';\n          var error = new MediaCardError(errorReason, e);\n\n          _this2.safeSetState({\n            error: error,\n            status: 'error'\n          });\n        }\n      });\n    }\n  }, {\n    key: \"requestedDimensions\",\n    get: function get() {\n      var dimensions = this.props.dimensions;\n\n      var _ref4 = this.state || {},\n          element = _ref4.cardRef;\n\n      return getRequestedDimensions({\n        dimensions: dimensions,\n        element: element\n      });\n    }\n  }, {\n    key: \"metadata\",\n    get: function get() {\n      var _this$state5;\n\n      return getFileDetails(this.props.identifier, (_this$state5 = this.state) === null || _this$state5 === void 0 ? void 0 : _this$state5.fileState);\n    }\n  }, {\n    key: \"fileAttributes\",\n    get: function get() {\n      var _this$state6, _this$state6$fileStat;\n\n      return getFileAttributes(this.metadata, (_this$state6 = this.state) === null || _this$state6 === void 0 ? void 0 : (_this$state6$fileStat = _this$state6.fileState) === null || _this$state6$fileStat === void 0 ? void 0 : _this$state6$fileStat.status);\n    }\n  }, {\n    key: \"fireOperationalEvent\",\n    value: function fireOperationalEvent() {\n      var _this$state7 = this.state,\n          status = _this$state7.status,\n          error = _this$state7.error;\n      var createAnalyticsEvent = this.props.createAnalyticsEvent;\n      createAnalyticsEvent && _fireOperationalEvent(createAnalyticsEvent, status, this.fileAttributes, this.getPerformanceAttributes(), this.ssrReliability, error);\n      completeUfoExperience(this.internalOccurrenceKey, status, this.fileAttributes, this.fileStateFlags, this.ssrReliability, error);\n    }\n  }, {\n    key: \"fireCommencedEvent\",\n    value: function fireCommencedEvent() {\n      this.timeElapsedTillCommenced = performance.now();\n      var createAnalyticsEvent = this.props.createAnalyticsEvent;\n      createAnalyticsEvent && _fireCommencedEvent(createAnalyticsEvent, this.fileAttributes, {\n        overall: {\n          durationSincePageStart: this.timeElapsedTillCommenced\n        }\n      });\n      startUfoExperience(this.internalOccurrenceKey);\n    }\n  }, {\n    key: \"actions\",\n    get: function get() {\n      var _this3 = this;\n\n      var _this$props14 = this.props,\n          _this$props14$actions = _this$props14.actions,\n          actions = _this$props14$actions === void 0 ? [] : _this$props14$actions,\n          identifier = _this$props14.identifier,\n          shouldEnableDownloadButton = _this$props14.shouldEnableDownloadButton;\n      var status = this.state.status;\n      var metadata = this.metadata;\n\n      if (isFileIdentifier(identifier) && (status === 'failed-processing' || shouldEnableDownloadButton)) {\n        var downloadAction = {\n          label: 'Download',\n          icon: /*#__PURE__*/React.createElement(DownloadIcon, {\n            label: \"Download\"\n          }),\n          handler: function handler() {\n            return _this3.props.mediaClient.file.downloadBinary(identifier.id, metadata.name, identifier.collectionName);\n          }\n        };\n        return [downloadAction].concat(_toConsumableArray(actions));\n      } else {\n        return actions;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state8 = this.state,\n          isPlayingFile = _this$state8.isPlayingFile,\n          mediaViewerSelectedItem = _this$state8.mediaViewerSelectedItem;\n      var innerContent = /*#__PURE__*/React.createElement(React.Fragment, null, isPlayingFile ? this.renderInlinePlayer() : this.renderCard(), mediaViewerSelectedItem ? this.renderMediaViewer() : null, this.storeSSRData());\n      return this.props.intl ? innerContent : /*#__PURE__*/React.createElement(IntlProvider, {\n        locale: \"en\"\n      }, innerContent);\n    }\n  }]);\n\n  return CardBase;\n}(Component);\n\n_defineProperty(CardBase, \"defaultProps\", {\n  appearance: 'auto',\n  resizeMode: 'crop',\n  isLazy: true,\n  disableOverlay: false,\n  // Media Feature Flag defaults are defined in @atlaskit/media-common\n  featureFlags: {}\n});\n\nexport var Card = withMediaAnalyticsContext({\n  packageVersion: packageVersion,\n  packageName: packageName,\n  componentName: 'mediaCard',\n  component: 'mediaCard'\n}, {\n  filterFeatureFlags: LOGGED_FEATURE_FLAGS\n})(withAnalyticsEvents()(injectIntl(CardBase, {\n  enforceContext: false\n})));","export var generateUniqueId = function generateUniqueId() {\n  return (performance.now().toString(36) + Math.random().toString(36)).replace(/\\./g, '');\n};","export var isFinalCardStatus = function isFinalCardStatus(status) {\n  return ['complete', 'error', 'failed-processing'].includes(status);\n};\nexport var getCardStatus = function getCardStatus(fileStatus, _ref) {\n  var hasFilesize = _ref.hasFilesize,\n      isPreviewable = _ref.isPreviewable,\n      hasPreview = _ref.hasPreview;\n\n  switch (fileStatus) {\n    case 'uploading':\n    case 'failed-processing':\n    case 'error':\n      return fileStatus;\n\n    case 'processing':\n      // Legacy empty files logic\n      // isPreviewable will most likely be false for empty files,\n      // therefore we need to do this cut before that check.\n      // TODO: https://product-fabric.atlassian.net/browse/BMPT-1247\n      if (!hasFilesize) {\n        return 'processing';\n      } // If we show no preview for this file\n      // we won't show the \"creating preview\" message, i.e. Card is \"complete\".\n\n\n      if (!isPreviewable) {\n        return 'complete';\n      }\n\n      return 'processing';\n\n    case 'processed':\n      if (!isPreviewable || !hasPreview) {\n        return 'complete';\n      }\n\n      return 'loading-preview';\n\n    default:\n      return 'loading';\n  }\n};","import { getMediaCardSSR, getKey } from './globalScope';\nexport var getSSRData = function getSSRData(identifier) {\n  var mediaCardSsr = getMediaCardSSR();\n\n  if (!mediaCardSsr) {\n    return;\n  }\n\n  return mediaCardSsr[getKey(identifier)];\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Video16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm11.37 10.954c.285.138.63-.05.63-.343V5.39c0-.293-.345-.481-.63-.343L11 6.194v3.613l2.37 1.147zM2 5.99v4.018c0 .54.449.991 1.003.991h4.994A.99.99 0 009 10.01V5.99C9 5.452 8.551 5 7.997 5H3.003A.99.99 0 002 5.99z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nVideo16Icon.displayName = 'Video16Icon';\nvar _default = Video16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Archive16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm4 3v2h2V3H6zm2 2v2h2V5H8zM6 7v2h2V7H6zm2 2v2h2V9H8zm-2.307 2v2h2v-2h-2z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nArchive16Icon.displayName = 'Archive16Icon';\nvar _default = Archive16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Image16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#FFAB00\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm4.75 11.75l-.543-.543a1 1 0 00-1.414 0L3 13h10v-2.25l-1.795-1.974a1 1 0 00-1.447-.034L6.75 11.75zM4.667 6.333a1.667 1.667 0 100-3.333 1.667 1.667 0 000 3.333z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nImage16Icon.displayName = 'Image16Icon';\nvar _default = Image16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Audio16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm11 4.195v-.753c0-.271-.23-.468-.514-.44l-6.115.634a.565.565 0 00-.514.545v4.616a2 2 0 00-.571-.083H5a2 2 0 00-2 2V11a2 2 0 002 2h.286a2 2 0 002-2V5.76l4.285-.444v2.767A2 2 0 0011 8h-.286a2 2 0 00-2 2v.286a2 2 0 002 2H11a2 2 0 002-2V4.195z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nAudio16Icon.displayName = 'Audio16Icon';\nvar _default = Audio16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Document16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#2684FF\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm2 3a1 1 0 100 2h8a1 1 0 000-2H4zm0 4a1 1 0 100 2h8a1 1 0 000-2H4zm0 4a1 1 0 000 2h4a1 1 0 000-2H4z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nDocument16Icon.displayName = 'Document16Icon';\nvar _default = Document16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Generic16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M8 3H5.333C4.597 3 4 3.617 4 4.378v7.244C4 12.382 4.597 13 5.333 13h5.334c.736 0 1.333-.617 1.333-1.378V8h-1.333v3.622H5.333V4.378H8v1.414c0 .736.597 1.333 1.333 1.333h2.334c.184 0 .333-.15.333-.333v-.903a.333.333 0 00-.093-.231l-2.164-2.25A1.333 1.333 0 008.782 3H8zM0 1.994C0 .893.895 0 1.994 0h12.012C15.107 0 16 .895 16 1.994v12.012A1.995 1.995 0 0114.006 16H1.994A1.995 1.995 0 010 14.006V1.994z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nGeneric16Icon.displayName = 'Generic16Icon';\nvar _default = Generic16Icon;\nexports.default = _default;"],"sourceRoot":""}