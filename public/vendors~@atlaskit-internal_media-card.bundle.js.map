{"version":3,"sources":["webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/imageOrientationUtil.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/media-type-icon.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/handle-focus.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/components/focus-manager.js","webpack:///./node_modules/@atlaskit/icon/glyph/lock-filled.js","webpack:///./node_modules/@atlaskit/ds-lib/dist/esm/hooks/use-keydown-event.js","webpack:///./node_modules/@atlaskit/ds-lib/dist/esm/hooks/use-controlled.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/mime-type-icon.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/image/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/audio/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/video/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/document/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/archive/24.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/generic/24.js","webpack:///./node_modules/@atlaskit/icon/glyph/more.js","webpack:///./node_modules/@atlaskit/icon/glyph/check.js","webpack:///./node_modules/bytes/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/styles/easing.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/formatDate.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/types.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/parseJPEG.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/parsePNG.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/parsePNGXMP.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/metatags.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/imageMetaData/index.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/humanReadableSize.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/dropdown-menu-item-group.js","webpack:///./node_modules/@atlaskit/icon/glyph/image.js","webpack:///./node_modules/@atlaskit/icon/glyph/audio.js","webpack:///./node_modules/@atlaskit/icon/glyph/media-services/video.js","webpack:///./node_modules/@atlaskit/icon/glyph/document.js","webpack:///./node_modules/@atlaskit/icon/glyph/page.js","webpack:///./node_modules/@atlaskit/icon/glyph/media-services/zip.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/components/menu-wrapper.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/is-checkbox-item.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/is-radio-item.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/context/selection-store.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/utils/use-generated-id.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/dropdown-menu.js","webpack:///./node_modules/@atlaskit/ds-lib/dist/esm/hooks/use-focus-event.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/internal/hooks/use-register-item-with-focus-manager.js","webpack:///./node_modules/@atlaskit/dropdown-menu/dist/esm/dropdown-menu-item.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/mediaImage/styled.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/mediaImage/index.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/ellipsify.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/mediaTypeIcon/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/mediaTypeIcon/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/fileIcon/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/fileIcon/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/errorIcon/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/errorIcon/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/cardActionIconButton.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/errors.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/analytics.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/cardActionsDropdownMenu.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/preventClickThrough.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/cardActions/cardActionsView.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/cardOverlay/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/cardOverlay/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/progressBar/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/shouldDisplayImageThumbnail.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/progressBar/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/files/cardImageView/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/actions.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/getErrorMessage.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/imageRenderer/imageRenderer.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/resizeModeToMediaImageProps.js","webpack:///./node_modules/@atlaskit/media-ui/dist/esm/truncateText.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/titleBox.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/failedTitleBox.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/playButton/playButton.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/tickBox/tickBox.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/actionsBar/actionsBar.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconWrapper/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconMessage/styled.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconMessage/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/cardView.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/viewportDetector.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/containsPixelUnit.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/getDataURIDimension.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/isRetina.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/objectURLCache.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/cache.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/videoSnapshot.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/helpers.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/dimensionComparer.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/filePreviewStatus.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/metadata.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/cardAnalytics.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/document.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/printScript.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/globalScope/globalScope.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/cardState.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/types.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/getMediaCardCursor.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/ufoExperiences.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/index.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/generateUniqueId.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardStatus.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/utils/globalScope/getSSRData.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/video/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/archive/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/image/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/audio/16.js","webpack:///./node_modules/@atlaskit/media-card/dist/esm/styles/index.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/document/16.js","webpack:///./node_modules/@atlaskit/icon-file-type/glyph/generic/16.js"],"names":["ORIENT_TRANSFORMS","1","2","3","4","5","6","7","8","isRotated","orientation","getCssFromImageOrientation","_templateObject","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","arguments","apply","IconWrapper","div","_ref","size","displayName","largeIcons","image","audio","video","doc","archive","unknown","smallIcons","MediaTypeIcon","_React$Component","_super","key","value","_this$props","props","type","testId","icons","Icon","createElement","label","Component","_actionMap","actionMap","FocusManagerContext","menuItemRefs","registerRef","ref","refs","children","current","includes","push","currentFocusedIdx","findIndex","el","_document$activeEleme","document","activeElement","isSameNode","length","preventDefault","focus","contextValue","Provider","Object","defineProperty","exports","default","obj","_react","__esModule","_base","LockFilledIcon","assign","dangerouslySetGlyph","_default","useKeydownEvent","callback","cond","undefined","window","addEventListener","removeEventListener","useControlled","propValue","getDefaultPropValue","isControlled","_useState","_useState2","valueState","setValue","isControlledRef","setValueIfUncontrolled","newValue","MimeTypeIcon","_ref$mediaType","mediaType","_ref$mimeType","mimeType","_ref$name","name","_ref$size","iconInfo","icon","Image24Icon","Audio24Icon","Video24Icon","Document24Icon","Archive24Icon","Generic24Icon","MoreIcon","CheckIcon","module","options","parse","format","formatThousandsRegExp","formatDecimalsRegExp","map","b","kb","mb","gb","tb","Math","pow","pb","parseRegExp","Number","isFinite","mag","abs","thousandsSeparator","unitSeparator","decimalPlaces","fixedDecimals","unit","toLowerCase","str","toFixed","replace","split","s","i","join","val","isNaN","floatValue","results","exec","parseFloat","parseInt","floor","easeOutCubic","formatterOptions","day","month","year","hour","minute","hour12","partsFormatter","_ref$dayPeriod","dayPeriod","formattedDayPeriod","concat","formatDate","timestamp","locale","l10n","formatToParts","ImageType","SupportedImageMetaTag","loadImage","ExifOrientation","XResolution","YResolution","readJPEGExifMetaData","file","Promise","mark","_callee","resolve","reject","wrap","_context","prev","next","sent","parseMetaData","data","tags","exif","getAll","keys","forEach","numerator","stop","_x","_x2","pngChunksExtract","readPNGXMPMetaData","_readPNGXMPMetaData","buffer","chunks","parsePNGChunks","abrupt","_parsePNGChunks","_callee2","iTXt","pHYs","chunk","dv","PixelPerUnitX","PixelPerUnitY","_context2","String","fromCharCode","Array","from","DataView","getUint8","getUint32","parseXMPMetaData","xmpMetaData","metadata","match","tag","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","getOwnPropertyDescriptors","defineProperties","readImageMetaTags","_readImageMetaTags","_yield$readPNGXMPMeta","PNG","JPEG","t0","Orientation","getImageInfo","_getImageInfo","fileInfo","width","height","scaleFactor","readImageMetaData","getScaleFactor","scaleFactorFromFilename","trim","getScaleFactorFromFile","round","getMetaTagNumericValue","tagValue","numericValue","getOrientation","_getOrientation","defaultValue","num","_x3","_readImageMetaData","_callee3","src","isImageRotated","img","_readImageNaturalOrie","_width","_height","_context3","PixelXDimension","naturalWidth","naturalHeight","toHumanReadableMediaSize","parsedSize","toUpperCase","ImageIcon","AudioIcon","MediaServicesVideoIcon","DocumentIcon","PageIcon","MediaServicesZipIcon","_excluded","onClose","setInitialFocusRef","role","onClick","some","menuItem","isCheckboxOrRadio","getAttribute","element","contains","SelectionStoreContext","setItemState","noop","getItemState","setGroupState","getGroupState","store","context","group","id","useGeneratedId","random","toString","substr","gridSize","spinnerContainerStyles","display","minWidth","padding","justifyContent","MAX_HEIGHT","fallbackPlacements","_props$defaultOpen","defaultOpen","isOpen","_props$onOpenChange","onOpenChange","_props$placement","placement","_trigger","trigger","_props$shouldFlip","shouldFlip","_props$isLoading","isLoading","_props$autoFocus","autoFocus","_props$statusLabel","statusLabel","_props$zIndex","zIndex","modal","_useControlledState","_useControlledState2","isLocalOpen","setLocalIsOpen","isTriggeredUsingKeyboard","setTriggeredUsingKeyboard","handleTriggerClicked","event","clientX","clientY","handleOnClose","_useFocus","isFocused","setIsFocused","bindFocus","onFocus","onBlur","useFocus","shouldUseCaptureOnOutsideClick","triggerProps","providedProps","triggerRef","isSelected","iconAfter","content","maxHeight","maxWidth","css","itemRef","component","elemBefore","elemAfter","_props$shouldTitleWra","shouldTitleWrap","_props$shouldDescript","shouldDescriptionWrap","rest","iconBefore","href","imgStyle","position","left","top","objectFit","imageOrientation","style","imageRef","otherProps","_Component","MediaImage","_this","onImageLoad","setState","isImageLoaded","imgWidth","imgHeight","currentTarget","createRef","state","parentWidth","Infinity","parentHeight","parent","findDOMNode","parentElement","_parent$getBoundingCl","getBoundingClientRect","crop","stretch","dataURI","previewOrientation","crossOrigin","onImageError","_this$props$alt","alt","loading","forceSyncDisplay","_this$state","parentRatio","imgRatio","percentSize","isCoverStrategy","isFitStrategy","ceil","isImageMoreLandscapyThanContainer","showImage","transform","draggable","onLoad","onError","Wrapper","inline","_ref2","text","lines","endLength","setEllipsis","className","maximumLines","textContent","lineHeight","lineCount","maximumHeight","beginningText","endText","adjustedBeginningText","delayRun","exenv","requestAnimationFrame","fn","setTimeout","typeToColorMap","_this$props$size","FileTypeIcon","FileIcon","iconUrl","defaultIcon","ErrorIconWrapper","ErrorIcon","_templateObject2","CardActionIconButtonVariant","CardActionButton","variant","CardActionIconButton","_len","args","_key","triggerColor","onMouseDown","color","_Error","MediaCardError","primaryReason","secondaryError","setPrototypeOf","Error","captureStackTrace","_MediaCardError","LocalPreviewError","_super2","_this2","_MediaCardError2","RemotePreviewError","_super3","_this3","_MediaCardError3","SsrPreviewError","_super4","_this4","_MediaCardError4","ImageLoadError","_super5","getImageLoadPrimaryReason","isMediaCardError","err","isUnsupportedLocalPreviewError","isUploadError","error","relevantFlags","newCardExperience","captions","timestampOnVideo","observedWidth","mediaInline","folderUploads","mediaUploadApiV2","LOGGED_FEATURE_FLAGS","LOGGED_FEATURE_FLAG_KEYS","mediaClientReason","message","extractErrorInfo","failReason","errorDetail","fireMediaCardEvent","payload","createAnalyticsEvent","fire","createAndFireEvent","CardActionButtonWithAnalytics","withAnalyticsEvents","eventType","action","actionSubject","actionSubjectId","attributes","index","handler","DropdownItemWithAnalytics","CardActionsDropdownMenu","actions","triggerVariant","PreventClickThrough","stopPropagation","CardActionsView","primaryAction","find","actionWithIcon","otherActions","actionNotEqualTo","renderActionIconButton","renderOtherActionButtons","isPrimary","CardActionIconButtonWithAnalytics","_this$props2","onToggle","firstActionWithIcon","otherAction","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_templateObject11","_templateObject12","Overlay","hasError","noHover","colors","ErrorLine","LeftColumn","TopRow","BottomRow","RightColumn","ErrorMessage","AltWrapper","TitleWrapper","themed","light","dark","Subtitle","Metadata","CardOverlay","attrs","isMenuExpanded","get","selectable","selected","persistent","active","cardStatus","mediaName","titleText","resolveTitleText","menuTriggerColor","wrapperClassNames","errorLine","tickBox","bottomLeftColumn","onMenuToggle","_this$props3","Fragment","_this$props4","tick","_this$props5","subtitle","classNames","fileIcon","subtitleEl","disableOverlay","getSelectedBorderStyle","PlayIconWrapper","PlayIconBackground","ProgressBarWrapper","Title","Body","ProgressWrapper","CardActionsWrapper","mediaItemType","ProgressBar","progress","min","max","progressBarStyle","FileCardImageView","status","fileSize","renderErrorContents","renderFailedContents","isZeroSize","isFileCardImageReadyForDisplay","renderSuccessCardContents","renderLoadingContents","isPersistent","_this$props6","cardPreview","_this$props7","_this$props8","onDisplayImage","wasThumbnailDisplayed","isCropped","isStretched","_this$props9","_this$props10","overlay","renderUploadingCardOverlay","renderSuccessCardOverlay","renderMediaImage","renderProgressBar","renderPlayButton","_this$props11","_this$props12","renderCardContents","_this$props13","resizeMode","attachDetailsToActions","details","messages","failed_to_load","nativeLazyLoad","resizeModeToMediaImageProps","HEX_REGEX","TitleBoxWrapper","breakpoint","titleBoxBgColor","test","SMALL","setting","verticalPadding","titleBox","horizontalPadding","infoStyles","TitleBoxHeader","hasIconOverlap","TitleBoxFooter","_ref3","TitleBoxIcon","ErrorMessageWrapper","truncateCommonStyles","TruncateLeft","span","fontSizePX","endFixedChars","fontFaceScaleFactor","startFixedChars","TruncateRight","_ref4","_ref4$fontSizePX","_ref4$startFixedChars","_ref4$endFixedChars","_calculateTruncation","minAllowedLength","right","splitAt","calculateTruncation","leftStr","rightStr","FormattedDate","injectIntl","_ref2$locale","intl","createdAt","titleBoxIcon","_ref$customMessage","customMessage","primaryColor","ActionsBar","isFixed","filled","hasTitleBox","marginBottom","titleBoxHeight","breatheAnimation","animatedStyles","IconMessageWrapper","animated","reducedFont","messageDescriptor","_ref$animated","_ref$reducedFont","disableAnimation","creating_preview","preview_unavailable","failed_to_upload","preview_currently_unavailable","CardViewBase","didImageRender","prevCardPreview","dimensions","isValidPercentageUnit","divRef","elementWidth","getElementDimension","appearance","onMouseEnter","mediaCardCursor","shouldDisplayBackground","isPlayButtonClickable","shouldRenderPlayButton","isTickBoxSelectable","shouldDisplayTooltip","innerRef","displayBackground","Tooltip","renderNewExperienceCard","actionsWithDetails","errorMessage","defaultConfig","renderTypeIcon","renderImageRenderer","renderBlanket","renderTitleBox","renderTickBox","isFixedBlanket","iconMessage","customTitleMessage","baseErrorConfig","renderFailedTitleBox","renderSpinner","_this$getRenderConfig","getRenderConfigByStatus","renderMediaTypeIcon","renderActionsBar","saveElementWidth","_ref7","getCSSUnitValue","featureFlags","renderFileNewExperience","wrapperDimensions","shouldUsePointerCursor","breakpointSize","renderFile","_ref10","positionBottom","_this$props9$metadata","_this$props9$metadata2","_ref11","CardView","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","isArray","minLen","_arrayLikeToArray","n","slice","_unsupportedIterableToArray","F","done","_e","f","TypeError","normalCompletion","didErr","step","_e2","return","arr","len","arr2","ViewportAnchor","IntersectionObserver","offsetTop","pointerEvents","onVisible","cardEl","preAnchorRef","postAnchorRef","intersectionObserver","entries","observer","_step","_iterator","isIntersecting","disconnect","createIntersectionObserverCallback","observe","containsPixelUnit","dimension","retinaFactor","devicePixelRatio","matchMedia","matches","dimensionValue","_LRUCache","ExtendedLRUCache","limit","eventEmitter","entry","emit","on","ObjectURLCache","cache","URL","revokeObjectURL","set","removed","remove","getCacheKey","CardPreviewCacheImpl","previewCache","cacheKey","takeSnapshot","blob","snapshooter","dataUri","end","getImageLocalPreview","createObjectURL","getVideoLocalPreview","getCardPreviewFromFilePreview","filePreview","resolvedFilePreview","Blob","t1","getCardPreviewFromBackend","_callee4","mediaClient","params","_context4","getImage","_x4","_x5","_x6","bothPixelEquivalent","bothPercentage","isBigger","nextIsHigher","nextIsWider","fileState","isBannedLocalPreview","hasFilesize","isPreviewable","hasLocalPreview","isSupportedLocalPreview","isMimeTypeSupportedByBrowser","hasRemotePreview","hasPreview","isSupportedByBrowser","getCardPreviewFromCache","removeCardPreviewFromCache","preview","mediaBlobUrlAttrs","getCardPreview","_ref$dimensions","onLocalPreviewError","isRemotePreviewReady","imageUrlParams","cachedPreview","localPreview","fetchAndCacheRemotePreview","isSSRServerPreview","isSSRClientPreview","isSSRDataPreview","remotePreview","getProcessingStatusFromFileState","identifier","processingStatus","fileAttributes","performanceAttributes","ssrReliability","fireEvent","getRenderSucceededEventPayload","getRenderFailedFileStatusPayload","request","getRenderErrorEventPayload","printParams","arg","param","JSON","stringify","getMediaGlobalScope","globalScope","namespace","getMediaCardSSR","globalMedia","dashed","getKey","collectionName","occurrenceKey","storeDataURI","mediaCardSsr","statements","functionCall","printFunctionCall","dangerouslySetInnerHTML","__html","MediaCardCursor","concurrentExperience","inlineExperience","platform","Experience","performanceType","InlineResult","getInstance","properties","success","packageName","packageVersion","mediaEnvironment","mediaRegion","failure","CardBase","performance","now","wasStatusUploading","wasStatusProcessing","server","client","collection","mode","imageResizeModeToFileImageMode","requestedDimensions","allowAnimated","originalDimensions","contextId","_getFileDetails","_this$props2$dimensio","fireLocalPreviewErrorEvent","getImageURLParams","getMediaBlobUrlAttrs","_this$props3$dimensio","catch","_this$props4$dimensio","safeSetState","wrappedError","getCardPreviewParams","timeElapsedTillCommenced","timeElapsedTillEvent","overall","durationSincePageStart","durationSinceCommenced","failedSSRObject","logSSRImageError","currentPreview","isLocal","isSSR","updateState","_this$props5$dimensio","previewDidRender","cardRef","fileId","getSelection","_selection$containsNo","selection","containsNode","getCopiedFilePayload","fileMediatype","getRenderPreviewableCardPayload","hasBeenMounted","updater","newState","prevState","subscription","unsubscribe","analyticsEvent","useInlinePlayer","shouldOpenMediaViewer","isVideo","isPlayingFile","shouldAutoplay","mediaViewerSelectedItem","onFullscreenChange","autoplay","onInlinePlayerError","setRef","payloadPart","isUserCollection","globalMediaEventEmitter","viewingLevel","mediaViewerDataSource","dataSource","list","createPortal","mediaClientConfig","config","selectedItem","onMediaViewerClose","body","isLazy","ssr","_this$state2","isCardVisible","_assertThisInitialize4","onCardViewClick","useMediaViewer","isErrorStatus","hasCardPreview","NotReady","Action","card","viewportPreAnchorRef","viewportPostAnchorRef","onCardInViewport","_this$ssrReliability$","_this$state$cardPrevi","mediaItemDetails","_cardPreview","_status","_identifier","_this$props11$dimensi","_dimensions","_ssr","_mediaClient","_this$ssrData","_this$ssrData2","ssrData","rawDataURI","getImageUrlSync","fireCommencedEvent","_isCardVisible","_error","_this$ssrData3","_this$state3","updateStateForIdentifier","setCacheSSRPreview","refetchSSRPreview","fireCopiedEvent","prevProps","prevMediaClient","prevIdentifier","prevDimensions","prevIsCardVisible","_this$state4","isDifferent","turnedVisible","isNewMediaClient","updateFileStateFlag","fireOperationalEvent","fireScreenEvent","statusIsPreviewable","isPreviewableStatus","dimensionsAreBigger","resolvePreview","videoAvailableToPlay","subscribeInternalFile","fileStateFlags","getFileState","subscribe","fileStatus","getCardStatus","errorReason","_this$state5","_this$state6","_this$state6$fileStat","fileMimetype","_this$state7","getPerformanceAttributes","internalOccurrenceKey","getRenderCommencedEventPayload","start","_this$props14","_this$props14$actions","shouldEnableDownloadButton","downloadBinary","_this$state8","innerContent","renderInlinePlayer","renderCard","renderMediaViewer","storeSSRData","Card","withMediaAnalyticsContext","componentName","filterFeatureFlags","enforceContext","Video16Icon","Archive16Icon","Image16Icon","Audio16Icon","Root","cardShadow","Document16Icon","Generic16Icon"],"mappings":"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","file":"vendors~@atlaskit-internal_media-card.bundle.js","sourcesContent":["var ORIENT_TRANSFORMS = {\n  1: 'none',\n  // Horizontal (normal)\n  2: 'rotateY(180deg)',\n  // Mirror horizontal\n  3: 'rotate(180deg)',\n  // Rotate 180\n  4: 'rotate(180deg) rotateY(180deg)',\n  // Mirror vertical\n  5: 'rotate(270deg) rotateY(180deg)',\n  // Mirror horizontal and rotate 270 CW\n  6: 'rotate(90deg)',\n  // Rotate 90 CW\n  7: 'rotate(90deg) rotateY(180deg)',\n  // Mirror horizontal and rotate 90 CW\n  8: 'rotate(270deg)' // Rotate 270 CW\n\n};\n/**\n * Returns true if image rotated 90 or 270 degrees (on it's side)\n */\n\nexport var isRotated = function isRotated(orientation) {\n  return orientation >= 5;\n};\nexport var getCssFromImageOrientation = function getCssFromImageOrientation(orientation) {\n  return ORIENT_TRANSFORMS[orientation];\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport styled from '@emotion/styled';\nimport ImageIcon from '@atlaskit/icon-file-type/glyph/image/24';\nimport AudioIcon from '@atlaskit/icon-file-type/glyph/audio/24';\nimport VideoIcon from '@atlaskit/icon-file-type/glyph/video/24';\nimport DocIcon from '@atlaskit/icon-file-type/glyph/document/24';\nimport ArchiveIcon from '@atlaskit/icon-file-type/glyph/archive/24';\nimport GenericIcon from '@atlaskit/icon-file-type/glyph/generic/24';\nimport ImageIconSmall from '@atlaskit/icon-file-type/glyph/image/16';\nimport AudioIconSmall from '@atlaskit/icon-file-type/glyph/audio/16';\nimport VideoIconSmall from '@atlaskit/icon-file-type/glyph/video/16';\nimport DocIconSmall from '@atlaskit/icon-file-type/glyph/document/16';\nimport ArchiveIconSmall from '@atlaskit/icon-file-type/glyph/archive/16';\nimport GenericIconSmall from '@atlaskit/icon-file-type/glyph/generic/16';\nexport var IconWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  \", \"\\n\"])), function (_ref) {\n  var size = _ref.size;\n  return size === 'large' ? \"padding: 4px;\" : '';\n});\nIconWrapper.displayName = 'IconWrapper';\nvar largeIcons = {\n  image: ImageIcon,\n  audio: AudioIcon,\n  video: VideoIcon,\n  doc: DocIcon,\n  archive: ArchiveIcon,\n  unknown: GenericIcon\n};\nvar smallIcons = {\n  image: ImageIconSmall,\n  audio: AudioIconSmall,\n  video: VideoIconSmall,\n  doc: DocIconSmall,\n  archive: ArchiveIconSmall,\n  unknown: GenericIconSmall\n};\nvar defaultType = 'unknown';\nexport var MediaTypeIcon = /*#__PURE__*/function (_React$Component) {\n  _inherits(MediaTypeIcon, _React$Component);\n\n  var _super = _createSuper(MediaTypeIcon);\n\n  function MediaTypeIcon() {\n    _classCallCheck(this, MediaTypeIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MediaTypeIcon, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          type = _this$props.type,\n          size = _this$props.size,\n          testId = _this$props.testId;\n      var typeWithDefault = type || defaultType;\n      var icons = size === 'large' ? largeIcons : smallIcons;\n      var Icon = icons[typeWithDefault] || icons[defaultType];\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        \"data-testid\": testId,\n        \"data-type\": type,\n        size: size\n      }, /*#__PURE__*/React.createElement(Icon, {\n        label: \"media-type\"\n      }));\n    }\n  }]);\n\n  return MediaTypeIcon;\n}(React.Component);\n\n_defineProperty(MediaTypeIcon, \"defaultProps\", {\n  type: defaultType,\n  testId: 'file-type-icon',\n  size: 'large'\n});","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _actionMap;\n\nimport { KEY_DOWN, KEY_END, KEY_HOME, KEY_UP } from '@atlaskit/ds-lib/keycodes';\nvar actionMap = (_actionMap = {}, _defineProperty(_actionMap, KEY_DOWN, 'next'), _defineProperty(_actionMap, KEY_UP, 'prev'), _defineProperty(_actionMap, KEY_HOME, 'first'), _defineProperty(_actionMap, KEY_END, 'last'), _actionMap);\nexport default function handleFocus(refs) {\n  return function (e) {\n    var currentFocusedIdx = refs.findIndex(function (el) {\n      var _document$activeEleme;\n\n      return (_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.isSameNode(el);\n    });\n    var action = actionMap[e.key];\n\n    switch (action) {\n      case 'next':\n        if (currentFocusedIdx < refs.length - 1) {\n          e.preventDefault();\n          refs[currentFocusedIdx + 1].focus();\n        }\n\n        break;\n\n      case 'prev':\n        if (currentFocusedIdx > 0) {\n          e.preventDefault();\n          refs[currentFocusedIdx - 1].focus();\n        }\n\n        break;\n\n      case 'first':\n        e.preventDefault();\n        refs[0].focus();\n        break;\n\n      case 'last':\n        e.preventDefault();\n        refs[refs.length - 1].focus();\n        break;\n\n      default:\n        return;\n    }\n  };\n}","import React, { createContext, useCallback, useRef } from 'react';\nimport useKeydownEvent from '@atlaskit/ds-lib/use-keydown-event';\nimport handleFocus from '../utils/handle-focus';\n/**\n *\n *\n * Context provider which maintains the list of focusable elements and a method to\n * register new menu items.\n * This list drives the keyboard navgation of the menu.\n *\n */\n\nexport var FocusManagerContext = /*#__PURE__*/createContext({\n  menuItemRefs: [],\n  registerRef: function registerRef(ref) {}\n});\n/**\n * Focus manager logic\n */\n\nvar FocusManager = function FocusManager(_ref) {\n  var children = _ref.children;\n  var menuItemRefs = useRef([]);\n  var registerRef = useCallback(function (ref) {\n    if (ref && !menuItemRefs.current.includes(ref)) {\n      menuItemRefs.current.push(ref);\n    }\n  }, []);\n  useKeydownEvent(handleFocus(menuItemRefs.current));\n  var contextValue = {\n    menuItemRefs: menuItemRefs.current,\n    registerRef: registerRef\n  };\n  return /*#__PURE__*/React.createElement(FocusManagerContext.Provider, {\n    value: contextValue\n  }, children);\n};\n\nexport default FocusManager;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst LockFilledIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z\"/></svg>`\n}, props));\n\nLockFilledIcon.displayName = 'LockFilledIcon';\nvar _default = LockFilledIcon;\nexports.default = _default;","import { useEffect } from 'react';\n/**\n * Conditionally attaches a keydown event to window.\n * This event will not flow through the React event system,\n * which means it could add lots of event listeners affecting performance.\n * Use with caution.\n *\n * ```\n * useKeydownEvent(callback, isPopupOpen);\n * ```\n *\n * @param callback Ensure a stable reference else you will have your event bound/unbound unexpectedly.\n * @param cond Boolean which controls if an event should be attached or not\n */\n\nexport default function useKeydownEvent(callback) {\n  var cond = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  useEffect(function () {\n    cond && window.addEventListener('keydown', callback);\n    return function () {\n      return window.removeEventListener('keydown', callback);\n    };\n  }, [callback, cond]);\n}","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\n/**\n * Handle controlled & uncontrolled component state\n *\n * ```js\n *  const [uncontrolledState, setUncontrolledState] = useControlled(\n    controlledValue,\n    () => defaultValue,\n  );\n * ```\n *\n * @param propValue\n * @param getDefaultPropValue\n */\n\nexport default function useControlled(propValue) {\n  var getDefaultPropValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n    return propValue;\n  };\n  var isControlled = propValue !== undefined;\n\n  var _useState = useState(getDefaultPropValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      valueState = _useState2[0],\n      setValue = _useState2[1];\n\n  var isControlledRef = useRef(isControlled);\n  useEffect(function () {\n    isControlledRef.current = isControlled;\n  }, [isControlled]);\n  var value = isControlled ? propValue : valueState;\n  var setValueIfUncontrolled = useCallback(function (newValue) {\n    if (!isControlledRef.current) {\n      setValue(newValue);\n    }\n  }, []);\n  return [value, setValueIfUncontrolled];\n}","import React from 'react';\nimport { getMimeIcon } from './util';\nimport { MediaTypeIcon } from './media-type-icon';\nimport { IconWrapper } from './media-type-icon';\n\n/*\n * Renders an icon. First, check if the mimeType corresponds to any of the special mimeType icons (.gif, .sketch, .exe, ect). If so, render that icon.\n * Else, render an icon corresponding to its mediaType (doc/audio/image/video/unknown)\n */\nexport var MimeTypeIcon = function MimeTypeIcon(_ref) {\n  var _ref$mediaType = _ref.mediaType,\n      mediaType = _ref$mediaType === void 0 ? 'unknown' : _ref$mediaType,\n      _ref$mimeType = _ref.mimeType,\n      mimeType = _ref$mimeType === void 0 ? 'unknown' : _ref$mimeType,\n      _ref$name = _ref.name,\n      name = _ref$name === void 0 ? 'unknown' : _ref$name,\n      testId = _ref.testId,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 'large' : _ref$size;\n  // retrieve mimetype icon and label\n  var iconInfo = getMimeIcon(mimeType, name); // a corresponding mimetype icon and label was found.\n\n  if (iconInfo) {\n    var Icon = iconInfo.icon;\n    return /*#__PURE__*/React.createElement(IconWrapper, {\n      \"data-testid\": testId,\n      \"data-type\": iconInfo.label,\n      size: size\n    }, /*#__PURE__*/React.createElement(Icon, {\n      label: iconInfo.label\n    }));\n  } // no correponding mimetype icon/label was found.\n  // Hence, return a mediatype (image/doc/audio/video/unknown) icon\n\n\n  return /*#__PURE__*/React.createElement(MediaTypeIcon, {\n    testId: testId,\n    type: mediaType,\n    size: size\n  });\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Image24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#FFAB00\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm7 17l-1.293-1.293a1 1 0 00-1.414 0L4 19h16v-3.6l-3.295-3.624a1 1 0 00-1.447-.034L10 17zm-3.333-6.667a2.667 2.667 0 100-5.333 2.667 2.667 0 000 5.333z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nImage24Icon.displayName = 'Image24Icon';\nvar _default = Image24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Audio24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm16 6.673V5.619c0-.38-.322-.656-.72-.615l-8.56.886c-.41.043-.72.383-.72.764v6.462A2.8 2.8 0 008.2 13h-.4A2.8 2.8 0 005 15.8v.4A2.8 2.8 0 007.8 19h.4a2.8 2.8 0 002.8-2.8V8.863l6-.62v3.873a2.8 2.8 0 00-.8-.116h-.4a2.8 2.8 0 00-2.8 2.8v.4a2.8 2.8 0 002.8 2.8h.4a2.8 2.8 0 002.8-2.8V6.673z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nAudio24Icon.displayName = 'Audio24Icon';\nvar _default = Audio24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Video24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm1 7.995v8.01c0 .54.446.995.995.995h8.01c.54 0 .995-.446.995-.995v-8.01c0-.54-.446-.995-.995-.995h-8.01C4.455 7 4 7.446 4 7.995zm15.16 7.943c.38.185.84-.066.84-.457V8.52c0-.39-.46-.642-.84-.457L16 9.592v4.817l3.16 1.53z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nVideo24Icon.displayName = 'Video24Icon';\nvar _default = Video24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Document24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#2684FF\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm1 18c0 .556.446 1 .995 1h8.01c.54 0 .995-.448.995-1 0-.556-.446-1-.995-1h-8.01c-.54 0-.995.448-.995 1zm0-4c0 .556.448 1 1 1h14c.555 0 1-.448 1-1 0-.556-.448-1-1-1H5c-.555 0-1 .448-1 1zm0-4c0 .556.448 1 1 1h14c.555 0 1-.448 1-1 0-.556-.448-1-1-1H5c-.555 0-1 .448-1 1zm0-4c0 .556.448 1 1 1h14c.555 0 1-.448 1-1 0-.556-.448-1-1-1H5c-.555 0-1 .448-1 1z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nDocument24Icon.displayName = 'Document24Icon';\nvar _default = Document24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Archive24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3zm6 3v3h3V3H9zm3 3v3h3V6h-3zM9 9v3h3V9H9zm3 3v3h3v-3h-3zm-3 3v3h3v-3H9zm3 3v3h3v-3h-3z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nArchive24Icon.displayName = 'Archive24Icon';\nvar _default = Archive24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Generic24Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M12 4H8a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2v-6.995h-2V18H8V6h4v2a2 2 0 002 2h3.5a.5.5 0 00.5-.5V8.213a.5.5 0 00-.145-.352L14.61 4.59A2 2 0 0013.19 4H12zM3 0h18a3 3 0 013 3v18a3 3 0 01-3 3H3a3 3 0 01-3-3V3a3 3 0 013-3z\"/></svg>`\n}, props, {\n  size: \"medium\"\n}));\n\nGeneric24Icon.displayName = 'Generic24Icon';\nvar _default = Generic24Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst MoreIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill=\"currentColor\" fill-rule=\"evenodd\"><circle cx=\"5\" cy=\"12\" r=\"2\"/><circle cx=\"12\" cy=\"12\" r=\"2\"/><circle cx=\"19\" cy=\"12\" r=\"2\"/></g></svg>`\n}, props));\n\nMoreIcon.displayName = 'MoreIcon';\nvar _default = MoreIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst CheckIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M6.735 12.322a1 1 0 00-1.47 1.356l3.612 3.919c.537.526 1.337.526 1.834.03l.364-.359a2335.638 2335.638 0 003.939-3.883l.04-.04a492.598 492.598 0 003.658-3.643 1 1 0 00-1.424-1.404 518.42 518.42 0 01-3.64 3.625l-.04.04a2049.114 2049.114 0 01-3.775 3.722l-3.098-3.363z\" fill=\"currentColor\"/></svg>`\n}, props));\n\nCheckIcon.displayName = 'CheckIcon';\nvar _default = CheckIcon;\nexports.default = _default;","/*!\n * bytes\n * Copyright(c) 2012-2014 TJ Holowaychuk\n * Copyright(c) 2015 Jed Watson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = bytes;\nmodule.exports.format = format;\nmodule.exports.parse = parse;\n\n/**\n * Module variables.\n * @private\n */\n\nvar formatThousandsRegExp = /\\B(?=(\\d{3})+(?!\\d))/g;\n\nvar formatDecimalsRegExp = /(?:\\.0*|(\\.[^0]+)0+)$/;\n\nvar map = {\n  b:  1,\n  kb: 1 << 10,\n  mb: 1 << 20,\n  gb: 1 << 30,\n  tb: Math.pow(1024, 4),\n  pb: Math.pow(1024, 5),\n};\n\nvar parseRegExp = /^((-|\\+)?(\\d+(?:\\.\\d+)?)) *(kb|mb|gb|tb|pb)$/i;\n\n/**\n * Convert the given value in bytes into a string or parse to string to an integer in bytes.\n *\n * @param {string|number} value\n * @param {{\n *  case: [string],\n *  decimalPlaces: [number]\n *  fixedDecimals: [boolean]\n *  thousandsSeparator: [string]\n *  unitSeparator: [string]\n *  }} [options] bytes options.\n *\n * @returns {string|number|null}\n */\n\nfunction bytes(value, options) {\n  if (typeof value === 'string') {\n    return parse(value);\n  }\n\n  if (typeof value === 'number') {\n    return format(value, options);\n  }\n\n  return null;\n}\n\n/**\n * Format the given value in bytes into a string.\n *\n * If the value is negative, it is kept as such. If it is a float,\n * it is rounded.\n *\n * @param {number} value\n * @param {object} [options]\n * @param {number} [options.decimalPlaces=2]\n * @param {number} [options.fixedDecimals=false]\n * @param {string} [options.thousandsSeparator=]\n * @param {string} [options.unit=]\n * @param {string} [options.unitSeparator=]\n *\n * @returns {string|null}\n * @public\n */\n\nfunction format(value, options) {\n  if (!Number.isFinite(value)) {\n    return null;\n  }\n\n  var mag = Math.abs(value);\n  var thousandsSeparator = (options && options.thousandsSeparator) || '';\n  var unitSeparator = (options && options.unitSeparator) || '';\n  var decimalPlaces = (options && options.decimalPlaces !== undefined) ? options.decimalPlaces : 2;\n  var fixedDecimals = Boolean(options && options.fixedDecimals);\n  var unit = (options && options.unit) || '';\n\n  if (!unit || !map[unit.toLowerCase()]) {\n    if (mag >= map.pb) {\n      unit = 'PB';\n    } else if (mag >= map.tb) {\n      unit = 'TB';\n    } else if (mag >= map.gb) {\n      unit = 'GB';\n    } else if (mag >= map.mb) {\n      unit = 'MB';\n    } else if (mag >= map.kb) {\n      unit = 'KB';\n    } else {\n      unit = 'B';\n    }\n  }\n\n  var val = value / map[unit.toLowerCase()];\n  var str = val.toFixed(decimalPlaces);\n\n  if (!fixedDecimals) {\n    str = str.replace(formatDecimalsRegExp, '$1');\n  }\n\n  if (thousandsSeparator) {\n    str = str.split('.').map(function (s, i) {\n      return i === 0\n        ? s.replace(formatThousandsRegExp, thousandsSeparator)\n        : s\n    }).join('.');\n  }\n\n  return str + unitSeparator + unit;\n}\n\n/**\n * Parse the string value into an integer in bytes.\n *\n * If no unit is given, it is assumed the value is in bytes.\n *\n * @param {number|string} val\n *\n * @returns {number|null}\n * @public\n */\n\nfunction parse(val) {\n  if (typeof val === 'number' && !isNaN(val)) {\n    return val;\n  }\n\n  if (typeof val !== 'string') {\n    return null;\n  }\n\n  // Test if the string passed is valid\n  var results = parseRegExp.exec(val);\n  var floatValue;\n  var unit = 'b';\n\n  if (!results) {\n    // Nothing could be extracted from the given string\n    floatValue = parseInt(val, 10);\n    unit = 'b'\n  } else {\n    // Retrieve the value and the unit\n    floatValue = parseFloat(results[1]);\n    unit = results[4].toLowerCase();\n  }\n\n  if (isNaN(floatValue)) {\n    return null;\n  }\n\n  return Math.floor(map[unit] * floatValue);\n}\n","export var easeOutCubic = 'cubic-bezier(0.215, 0.61, 0.355, 1)';\nexport var easeOutExpo = 'cubic-bezier(0.19, 1, 0.22, 1)';","import { createLocalizationProvider } from '@atlaskit/locale';\nexport var formatterOptions = {\n  day: '2-digit',\n  month: 'short',\n  year: 'numeric',\n  hour: '2-digit',\n  minute: '2-digit',\n  hour12: true\n};\nexport var partsFormatter = function partsFormatter(_ref) {\n  var day = _ref.day,\n      month = _ref.month,\n      year = _ref.year,\n      hour = _ref.hour,\n      minute = _ref.minute,\n      _ref$dayPeriod = _ref.dayPeriod,\n      dayPeriod = _ref$dayPeriod === void 0 ? '' : _ref$dayPeriod;\n  var formattedDayPeriod = dayPeriod.replace(/\\./g, '').replace(/\\s/g, '');\n  return \"\".concat(day, \" \").concat(month, \" \").concat(year, \", \").concat(hour, \":\").concat(minute, \" \").concat(formattedDayPeriod);\n};\nexport var formatDate = function formatDate(timestamp) {\n  var locale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'en';\n  var l10n = createLocalizationProvider(locale, formatterOptions);\n  return partsFormatter(l10n.formatToParts(timestamp));\n};","export var ImageType;\n\n(function (ImageType) {\n  ImageType[\"JPEG\"] = \"image/jpeg\";\n  ImageType[\"PNG\"] = \"image/png\";\n})(ImageType || (ImageType = {}));\n\nexport var SupportedImageMetaTag;\n\n(function (SupportedImageMetaTag) {\n  SupportedImageMetaTag[\"XResolution\"] = \"XResolution\";\n  SupportedImageMetaTag[\"YResolution\"] = \"YResolution\";\n  SupportedImageMetaTag[\"Orientation\"] = \"Orientation\";\n})(SupportedImageMetaTag || (SupportedImageMetaTag = {}));\n\n// http://sylvana.net/jpegcrop/exif_orientation.html\nexport var ExifOrientation = {\n  'top-left': 1,\n  // none\n  'top-right': 2,\n  // flip horizontal\n  'bottom-right': 3,\n  // rotate 180\n  'bottom-left': 4,\n  // flip vertical\n  'left-top': 5,\n  // transpose\n  'right-top': 6,\n  // rotate 90\n  'right-bottom': 7,\n  // transverse\n  'left-bottom': 8 // rotate 270\n\n};","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { SupportedImageMetaTag } from './types';\nvar XResolution = SupportedImageMetaTag.XResolution,\n    YResolution = SupportedImageMetaTag.YResolution;\nvar loadImage;\nexport function readJPEGExifMetaData(file) {\n  return new Promise( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resolve, reject) {\n      var module;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (loadImage) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return import('blueimp-load-image');\n\n            case 3:\n              module = _context.sent;\n              loadImage = module.default || module;\n\n            case 5:\n              loadImage.parseMetaData(file, function (data) {\n                try {\n                  var tags = data && data.exif ? data.exif.getAll() : {};\n                  Object.keys(tags).forEach(function (key) {\n                    var value = tags[key];\n\n                    if (_typeof(value) === 'object' && (key === XResolution || key === YResolution) && 'numerator' in value) {\n                      // some test images had this structure, so just take the numerator value to simplify returned value\n                      tags[key] = value.numerator;\n                    }\n\n                    if (typeof tags[key] === 'number') {\n                      // in case numbers types were auto-converted, keep everything the same between jpeg & png we keep as strings\n                      tags[key] = \"\".concat(tags[key]);\n                    }\n                  });\n                  resolve(tags);\n                } catch (e) {\n                  reject(e);\n                }\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { fileToArrayBuffer } from '../util';\nvar pngChunksExtract;\nexport function readPNGXMPMetaData(_x) {\n  return _readPNGXMPMetaData.apply(this, arguments);\n}\n\nfunction _readPNGXMPMetaData() {\n  _readPNGXMPMetaData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n    var module, buffer, chunks;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (pngChunksExtract) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 3;\n            return import('png-chunks-extract');\n\n          case 3:\n            module = _context.sent;\n            pngChunksExtract = module.default || module;\n\n          case 5:\n            _context.next = 7;\n            return fileToArrayBuffer(file);\n\n          case 7:\n            buffer = _context.sent;\n            chunks = pngChunksExtract(buffer);\n            _context.next = 11;\n            return parsePNGChunks(chunks);\n\n          case 11:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _readPNGXMPMetaData.apply(this, arguments);\n}\n\nexport function parsePNGChunks(_x2) {\n  return _parsePNGChunks.apply(this, arguments);\n}\n\nfunction _parsePNGChunks() {\n  _parsePNGChunks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(chunks) {\n    var iTXt, pHYs, i, chunk, dv, unitSpecifier, PixelPerUnitX, PixelPerUnitY;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            iTXt = '';\n            pHYs = {};\n            /**\n             * http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.Summary-of-standard-chunks\n             * Order of every chunk is not guaranteed.\n             * And both iTXt and pHYs are Ancillary chunks.\n             */\n\n            i = 0;\n\n          case 3:\n            if (!(i < chunks.length)) {\n              _context2.next = 12;\n              break;\n            }\n\n            chunk = chunks[i]; // Must be last\n\n            if (!(chunk.name === 'IEND')) {\n              _context2.next = 7;\n              break;\n            }\n\n            return _context2.abrupt(\"break\", 12);\n\n          case 7:\n            /**\n             * http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.Anc-text\n             * iTXt contains the useful XMP/XML string data of meta tags\n             */\n            if (chunk.name === 'iTXt') {\n              iTXt = String.fromCharCode.apply(null, Array.from(chunk.data));\n            }\n            /**\n             * http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.pHYs\n             * Pixels per unit, X axis: 4 bytes (unsigned integer)\n             * Pixels per unit, Y axis: 4 bytes (unsigned integer)\n             * Unit specifier:          1 byte  (0: unit is unknown 1: unit is the meter)\n             */\n\n\n            if (chunk.name === 'pHYs') {\n              dv = new DataView(chunk.data.buffer);\n              unitSpecifier = dv.getUint8(8); // meter\n\n              if (unitSpecifier === 1) {\n                PixelPerUnitX = dv.getUint32(0);\n                PixelPerUnitY = dv.getUint32(4);\n                pHYs = {\n                  PixelPerUnitX: PixelPerUnitX,\n                  PixelPerUnitY: PixelPerUnitY\n                };\n              }\n            }\n\n          case 9:\n            ++i;\n            _context2.next = 3;\n            break;\n\n          case 12:\n            return _context2.abrupt(\"return\", {\n              iTXt: iTXt,\n              pHYs: pHYs\n            });\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parsePNGChunks.apply(this, arguments);\n}","export function parseXMPMetaData(xmpMetaData) {\n  var metadata = {};\n  var tags = xmpMetaData.match(/<(tiff|exif):.+>/gi);\n\n  if (tags) {\n    tags.forEach(function (tag) {\n      var match = tag.match(/<(tiff|exif):([^>]+)>([^<]+)/i);\n\n      if (match) {\n        var name = match[2];\n        metadata[name] = match[3];\n      }\n    });\n  }\n\n  return metadata;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { ImageType } from './types';\nimport { readJPEGExifMetaData } from './parseJPEG';\nimport { readPNGXMPMetaData } from './parsePNG';\nimport { parseXMPMetaData } from './parsePNGXMP';\nexport function readImageMetaTags(_x) {\n  return _readImageMetaTags.apply(this, arguments);\n}\n\nfunction _readImageMetaTags() {\n  _readImageMetaTags = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n    var type, _yield$readPNGXMPMeta, iTXt, pHYs, xmpMetaData;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            type = file.type;\n            _context.prev = 1;\n\n            if (!(type === ImageType.PNG)) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.next = 5;\n            return readPNGXMPMetaData(file);\n\n          case 5:\n            _yield$readPNGXMPMeta = _context.sent;\n            iTXt = _yield$readPNGXMPMeta.iTXt;\n            pHYs = _yield$readPNGXMPMeta.pHYs;\n            xmpMetaData = _objectSpread(_objectSpread({}, parseXMPMetaData(iTXt)), pHYs);\n            return _context.abrupt(\"return\", xmpMetaData);\n\n          case 12:\n            if (!(file.type === ImageType.JPEG)) {\n              _context.next = 16;\n              break;\n            }\n\n            _context.next = 15;\n            return readJPEGExifMetaData(file);\n\n          case 15:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 16:\n            _context.next = 20;\n            break;\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context[\"catch\"](1);\n\n          case 20:\n            return _context.abrupt(\"return\", null);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 18]]);\n  }));\n  return _readImageMetaTags.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { SupportedImageMetaTag, ExifOrientation } from './types';\nimport { readImageMetaTags } from './metatags';\nimport { loadImage, readImageNaturalOrientationFromDOM } from '../util';\nimport { isRotated } from './imageOrientationUtil';\nvar Orientation = SupportedImageMetaTag.Orientation,\n    XResolution = SupportedImageMetaTag.XResolution; // http://bonfx.com/why-is-the-web-72-dpi-and-print-300-dpi/\n\nvar DPI_WEB_BASELINE = 72;\nexport { ExifOrientation } from './types';\nexport function getImageInfo(_x) {\n  return _getImageInfo.apply(this, arguments);\n}\n\nfunction _getImageInfo() {\n  _getImageInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileInfo) {\n    var metadata, width, height, tags, scaleFactor;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return readImageMetaData(fileInfo);\n\n          case 2:\n            metadata = _context.sent;\n\n            if (metadata) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", null);\n\n          case 5:\n            width = metadata.width, height = metadata.height, tags = metadata.tags;\n            scaleFactor = getScaleFactor(fileInfo.file, tags);\n            return _context.abrupt(\"return\", {\n              scaleFactor: scaleFactor,\n              width: width,\n              height: height\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getImageInfo.apply(this, arguments);\n}\n\nexport function getScaleFactor(file, tags) {\n  var scaleFactorFromFilename = getScaleFactorFromFile(file);\n\n  if (scaleFactorFromFilename !== null) {\n    return scaleFactorFromFilename;\n  } else if (tags) {\n    /**\n     * Scale Factor is actually a 2D thing, but in practice X & Y are same in 99% cases.\n     * So we are only relying on X axis.\n     */\n    if (typeof tags['PixelPerUnitX'] === 'number') {\n      // 1 inch = 0.0254 meters\n      return Math.round(tags['PixelPerUnitX'] * 0.0254) / DPI_WEB_BASELINE;\n    } else {\n      return getMetaTagNumericValue(tags, XResolution, DPI_WEB_BASELINE) / DPI_WEB_BASELINE;\n    }\n  } else {\n    return 1;\n  }\n}\n\nvar getOrientationFromTags = function getOrientationFromTags(tags) {\n  if (tags && tags[Orientation]) {\n    var tagValue = tags[Orientation];\n\n    if (tagValue) {\n      var numericValue = parseInt(tagValue, 10);\n\n      if (isNaN(numericValue)) {\n        return ExifOrientation[tagValue];\n      }\n\n      return numericValue;\n    }\n  }\n\n  return 1;\n};\n\nexport function getOrientation(_x2) {\n  return _getOrientation.apply(this, arguments);\n}\n\nfunction _getOrientation() {\n  _getOrientation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(file) {\n    var tags;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return readImageMetaTags(file);\n\n          case 2:\n            tags = _context2.sent;\n            return _context2.abrupt(\"return\", getOrientationFromTags(tags));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getOrientation.apply(this, arguments);\n}\n\nexport function getMetaTagNumericValue(tags, key, defaultValue) {\n  try {\n    var num = parseFloat(\"\".concat(tags[key]));\n\n    if (!isNaN(num)) {\n      return num;\n    }\n  } catch (e) {//\n  }\n\n  return defaultValue;\n}\nexport function getScaleFactorFromFile(file) {\n  try {\n    // filenames with scale ratio in name take precedence - eg. filename@2x.png\n    var match = file.name.trim().match(/@([0-9\\.]+)x\\.[a-z]{3}$/);\n\n    if (match) {\n      return parseFloat(match[1]);\n    }\n  } catch (e) {// parse problem, return null\n  }\n\n  return null;\n}\nexport function readImageMetaData(_x3) {\n  return _readImageMetaData.apply(this, arguments);\n}\n\nfunction _readImageMetaData() {\n  _readImageMetaData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fileInfo) {\n    var file, src, type, width, height, tags, orientation, isImageRotated, data, img, _readImageNaturalOrie, _width, _height;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            file = fileInfo.file, src = fileInfo.src;\n            type = file.type;\n            width = 0;\n            height = 0;\n            _context3.next = 6;\n            return readImageMetaTags(file);\n\n          case 6:\n            tags = _context3.sent;\n\n            // since we're reading metadata anyway, try to get dimensions from there...\n            if (tags && tags.PixelXDimension) {\n              width = getMetaTagNumericValue(tags, 'PixelXDimension', 0);\n            }\n\n            if (tags && tags.PixelXDimension) {\n              height = getMetaTagNumericValue(tags, 'PixelYDimension', 0);\n            } // otherwise, load the image async (ideally avoid if found above due to being slightly expensive)\n\n\n            orientation = getOrientationFromTags(tags);\n            isImageRotated = isRotated(orientation);\n            data = {\n              type: type,\n              width: width,\n              height: height,\n              naturalWidth: width,\n              naturalHeight: height,\n              tags: tags\n            };\n\n            if (!(isImageRotated || width === 0 && height === 0)) {\n              _context3.next = 27;\n              break;\n            }\n\n            _context3.prev = 13;\n            _context3.next = 16;\n            return loadImage(src);\n\n          case 16:\n            img = _context3.sent;\n            _readImageNaturalOrie = readImageNaturalOrientationFromDOM(img), _width = _readImageNaturalOrie.width, _height = _readImageNaturalOrie.height;\n            data.width = _width;\n            data.height = _height;\n            data.naturalWidth = img.naturalWidth;\n            data.naturalHeight = img.naturalHeight;\n            _context3.next = 27;\n            break;\n\n          case 24:\n            _context3.prev = 24;\n            _context3.t0 = _context3[\"catch\"](13);\n            return _context3.abrupt(\"return\", null);\n\n          case 27:\n            return _context3.abrupt(\"return\", data);\n\n          case 28:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[13, 24]]);\n  }));\n  return _readImageMetaData.apply(this, arguments);\n}\n\nexport { getCssFromImageOrientation, isRotated } from './imageOrientationUtil';","import * as bytes from 'bytes'; // eslint-disable-next-line no-bitwise\n\nvar ONE_MEGABYTE_IN_BYTES = 1 << 20;\n/**\n * Takes a media (file) size in bytes and returns a human readable string\n */\n\nexport function toHumanReadableMediaSize(size) {\n  // [MS-967]: Api issue might return string for size\n  var parsedSize = parseInt(\"\".concat(size), 10);\n  var decimalPlaces = parsedSize < ONE_MEGABYTE_IN_BYTES ? 0 : 1;\n  return bytes.format(parsedSize, {\n    unitSeparator: ' ',\n    decimalPlaces: decimalPlaces\n  }).toUpperCase();\n}","/**\n * __Section__\n *\n * A dropdown item group includes all the actions or items in a dropdown menu.\n *\n * - [Examples](https://atlassian.design/components/dropdown-menu/dropdown-item-group/examples)\n * - [Code](https://atlassian.design/components/dropdown-menu/dropdown-item-group/code)\n * - [Usage](https://atlassian.design/components/dropdown-menu/dropdown-item-group/usage)\n */\nimport Section from '@atlaskit/menu/section';\nexport default Section;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst ImageIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M3 4.995C3 3.893 3.893 3 4.995 3h14.01C20.107 3 21 3.893 21 4.995v14.01A1.995 1.995 0 0119.005 21H4.995A1.995 1.995 0 013 19.005V4.995zM10.5 16.5L9 15l-3 3h12v-2.7L15 12l-4.5 4.5zM8 10a2 2 0 100-4 2 2 0 000 4z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>`\n}, props));\n\nImageIcon.displayName = 'ImageIcon';\nvar _default = ImageIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst AudioIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M19 6.673V15.2a2.8 2.8 0 01-2.8 2.8h-.4a2.8 2.8 0 01-2.8-2.8v-.4a2.8 2.8 0 012.8-2.8h.4c.278 0 .547.04.8.116V8.242l-6 .621V16.2A2.8 2.8 0 018.2 19h-.4A2.8 2.8 0 015 16.2v-.4A2.8 2.8 0 017.8 13h.4c.278 0 .547.04.8.116V6.654c0-.38.31-.721.72-.764l8.56-.886c.398-.041.72.235.72.615v1.054z\" fill=\"currentColor\"/></svg>`\n}, props));\n\nAudioIcon.displayName = 'AudioIcon';\nvar _default = AudioIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst MediaServicesVideoIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill-rule=\"evenodd\"><rect fill=\"currentColor\" x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"/><path d=\"M16.37 14.954L14 13.807v-3.613l2.37-1.148c.285-.138.63.05.63.343v5.222c0 .293-.345.481-.63.343\" fill=\"inherit\"/><rect fill=\"inherit\" x=\"7\" y=\"9\" width=\"6\" height=\"6\" rx=\"1\"/></g></svg>`\n}, props));\n\nMediaServicesVideoIcon.displayName = 'MediaServicesVideoIcon';\nvar _default = MediaServicesVideoIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DocumentIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path d=\"M17 10.005V19H7V5h5.99v2.49a1.5 1.5 0 001.5 1.5h4.5v-.522c0-.297-.132-.578-.359-.768l-5.074-4.236c-.36-.3-.813-.464-1.282-.464H7a2 2 0 00-2 2v14a2 2 0 002 2h10a2 2 0 002-2v-8.995h-2z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>`\n}, props));\n\nDocumentIcon.displayName = 'DocumentIcon';\nvar _default = DocumentIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst PageIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill=\"currentColor\" fill-rule=\"evenodd\"><rect x=\"8\" y=\"6\" width=\"8\" height=\"2\" rx=\"1\"/><rect x=\"8\" y=\"9\" width=\"8\" height=\"2\" rx=\"1\"/><rect x=\"8\" y=\"12\" width=\"4\" height=\"2\" rx=\"1\"/><path d=\"M7 4v16h10V4H7zm-2-.01C5 2.892 5.897 2 7.006 2h9.988C18.102 2 19 2.898 19 3.99v16.02c0 1.099-.897 1.99-2.006 1.99H7.006A2.003 2.003 0 015 20.01V3.99z\" fill-rule=\"nonzero\"/></g></svg>`\n}, props));\n\nPageIcon.displayName = 'PageIcon';\nvar _default = PageIcon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst MediaServicesZipIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><g fill-rule=\"evenodd\"><rect fill=\"currentColor\" x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"/><path d=\"M9 6.999C9 6.447 9.443 6 9.999 6H12v3H9.999A.996.996 0 019 8.001V6.999zM12 9h2.001c.552 0 .999.443.999.999v1.002a.996.996 0 01-.999.999H12V9zm-3 3.999c0-.552.443-.999.999-.999H12v3H9.999A.996.996 0 019 14.001v-1.002zM12 15h2.001c.552 0 .999.443.999.999v1.002a.996.996 0 01-.999.999H12v-3z\" fill=\"inherit\"/></g></svg>`\n}, props));\n\nMediaServicesZipIcon.displayName = 'MediaServicesZipIcon';\nvar _default = MediaServicesZipIcon;\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"onClose\", \"setInitialFocusRef\"];\nimport React, { useContext } from 'react';\nimport MenuGroup from '@atlaskit/menu/menu-group';\nimport { FocusManagerContext } from '../components/focus-manager';\nimport isCheckboxItem from '../utils/is-checkbox-item';\nimport isRadioItem from '../utils/is-radio-item';\n/**\n *\n * MenuWrapper wraps all the menu items.\n * It handles the logic to close the menu when a MenuItem is clicked, but leaves it open\n * if a CheckboxItem or RadioItem is clicked.\n * It also sets focus to the first menu item when opened.\n */\n\nvar MenuWrapper = function MenuWrapper(_ref) {\n  var onClose = _ref.onClose,\n      setInitialFocusRef = _ref.setInitialFocusRef,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _useContext = useContext(FocusManagerContext),\n      menuItemRefs = _useContext.menuItemRefs;\n\n  var closeOnMenuItemClick = function closeOnMenuItemClick(e) {\n    var isTargetMenuItemOrDecendant = menuItemRefs.some(function (menuItem) {\n      var isCheckboxOrRadio = isCheckboxItem(menuItem) || isRadioItem(menuItem);\n      return menuItem.contains(e.target) && !isCheckboxOrRadio;\n    }); // Close menu if the click is triggered from a MenuItem or\n    // its decendant. Don't close the menu if the click is triggered\n    // from a MenuItemRadio or MenuItemCheckbox so that the user can\n    // select multiple items.\n\n    if (isTargetMenuItemOrDecendant && onClose) {\n      onClose();\n    }\n  };\n\n  setInitialFocusRef && setInitialFocusRef(menuItemRefs[0]); // eslint-disable-next-line @repo/internal/react/no-unsafe-spread-props\n\n  return /*#__PURE__*/React.createElement(MenuGroup, _extends({\n    role: \"menu\",\n    onClick: closeOnMenuItemClick\n  }, props));\n};\n\nexport default MenuWrapper;","export default function isCheckboxItem(element) {\n  var role = element.getAttribute('role');\n  return role === 'checkbox' || role === 'menuitemcheckbox';\n}","export default function isCheckboxItem(element) {\n  var role = element.getAttribute('role');\n  return role === 'radio' || role === 'menuitemradio';\n}","import React, { createContext, useMemo, useRef } from 'react';\nimport noop from '@atlaskit/ds-lib/noop';\n\n/**\n *\n * SelectionStoreContext maintains the state of the selected items\n * and getter setters.\n *\n */\nexport var SelectionStoreContext = /*#__PURE__*/createContext({\n  setItemState: noop,\n  getItemState: function getItemState() {\n    return undefined;\n  },\n  setGroupState: noop,\n  getGroupState: function getGroupState() {\n    return {};\n  }\n});\n\n/**\n * Selection store will persist data as long as it remains mounted.\n * It handles the uncontrolled story for dropdown menu when the menu\n * items can be mounted/unmounted depending if the menu is open or closed.\n */\nvar SelectionStore = function SelectionStore(props) {\n  var children = props.children;\n  var store = useRef({});\n  var context = useMemo(function () {\n    return {\n      setItemState: function setItemState(group, id, value) {\n        if (!store.current[group]) {\n          store.current[group] = {};\n        }\n\n        store.current[group][id] = value;\n      },\n      getItemState: function getItemState(group, id) {\n        if (!store.current[group]) {\n          return undefined;\n        }\n\n        return store.current[group][id];\n      },\n      setGroupState: function setGroupState(group, value) {\n        store.current[group] = value;\n      },\n      getGroupState: function getGroupState(group) {\n        return store.current[group] || {};\n      }\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(SelectionStoreContext.Provider, {\n    value: context\n  }, children);\n};\n\nexport default SelectionStore;","import { useRef } from 'react';\nvar PREFIX = 'ds--dropdown--';\n\nvar generateRandomString = function generateRandomString() {\n  return (// This string is used only on client side usually triggered after a user interaction.\n    // Therefore, so there is no risk of mismatch\n    // between server and client generated markup.\n    // eslint-disable-next-line @repo/internal/react/disallow-unstable-values\n    \"\".concat(PREFIX).concat(Math.random().toString(16).substr(2, 8))\n  );\n};\n/**\n * useGeneratedId generates a random string which remains constant across\n * renders when called without any parameter.\n */\n\n\nexport default function useGeneratedId() {\n  var cachedId = useRef(generateRandomString());\n  return cachedId.current;\n}","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"ref\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n/** @jsx jsx */\nimport { useCallback, useState } from 'react';\nimport { css, jsx } from '@emotion/core';\nimport Button from '@atlaskit/button/standard-button';\nimport { KEY_DOWN } from '@atlaskit/ds-lib/keycodes';\nimport noop from '@atlaskit/ds-lib/noop';\nimport useControlledState from '@atlaskit/ds-lib/use-controlled';\nimport useFocus from '@atlaskit/ds-lib/use-focus-event';\nimport useKeydownEvent from '@atlaskit/ds-lib/use-keydown-event';\nimport ExpandIcon from '@atlaskit/icon/glyph/chevron-down';\nimport Popup from '@atlaskit/popup';\nimport Spinner from '@atlaskit/spinner';\nimport { gridSize as gridSizeFn, layers } from '@atlaskit/theme/constants';\nimport VisuallyHidden from '@atlaskit/visually-hidden';\nimport FocusManager from './internal/components/focus-manager';\nimport MenuWrapper from './internal/components/menu-wrapper';\nimport SelectionStore from './internal/context/selection-store';\nimport useGeneratedId from './internal/utils/use-generated-id';\nvar gridSize = gridSizeFn();\nvar spinnerContainerStyles = css({\n  display: 'flex',\n  minWidth: \"\".concat(gridSize * 20, \"px\"),\n  padding: \"\".concat(gridSize * 2.5, \"px\"),\n  justifyContent: 'center'\n});\nvar MAX_HEIGHT = \"calc(100vh - \".concat(gridSize * 2, \"px)\");\nvar fallbackPlacements = ['bottom', 'bottom-end', 'right-start', 'left-start', 'auto'];\n/**\n * __Dropdown menu__\n *\n * A dropdown menu displays a list of actions or options to a user.\n *\n * - [Examples](https://atlassian.design/components/dropdown-menu/examples)\n * - [Code](https://atlassian.design/components/dropdown-menu/code)\n * - [Usage](https://atlassian.design/components/dropdown-menu/usage)\n */\n\nvar DropdownMenu = function DropdownMenu(props) {\n  var _props$defaultOpen = props.defaultOpen,\n      defaultOpen = _props$defaultOpen === void 0 ? false : _props$defaultOpen,\n      isOpen = props.isOpen,\n      _props$onOpenChange = props.onOpenChange,\n      onOpenChange = _props$onOpenChange === void 0 ? noop : _props$onOpenChange,\n      children = props.children,\n      _props$placement = props.placement,\n      placement = _props$placement === void 0 ? 'bottom-start' : _props$placement,\n      _trigger = props.trigger,\n      _props$shouldFlip = props.shouldFlip,\n      shouldFlip = _props$shouldFlip === void 0 ? true : _props$shouldFlip,\n      _props$isLoading = props.isLoading,\n      isLoading = _props$isLoading === void 0 ? false : _props$isLoading,\n      _props$autoFocus = props.autoFocus,\n      autoFocus = _props$autoFocus === void 0 ? false : _props$autoFocus,\n      testId = props.testId,\n      _props$statusLabel = props.statusLabel,\n      statusLabel = _props$statusLabel === void 0 ? 'Loading' : _props$statusLabel,\n      _props$zIndex = props.zIndex,\n      zIndex = _props$zIndex === void 0 ? layers.modal() : _props$zIndex;\n\n  var _useControlledState = useControlledState(isOpen, function () {\n    return defaultOpen;\n  }),\n      _useControlledState2 = _slicedToArray(_useControlledState, 2),\n      isLocalOpen = _useControlledState2[0],\n      setLocalIsOpen = _useControlledState2[1];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isTriggeredUsingKeyboard = _useState2[0],\n      setTriggeredUsingKeyboard = _useState2[1];\n\n  var handleTriggerClicked = useCallback(function (event) {\n    var newValue = !isLocalOpen;\n    var clientX = event.clientX,\n        clientY = event.clientY,\n        type = event.type;\n\n    if (type === 'keydown') {\n      setTriggeredUsingKeyboard(true);\n    } else if (clientX === 0 || clientY === 0) {\n      // Hitting enter/space is registered as a click\n      // with both clientX and clientY === 0\n      setTriggeredUsingKeyboard(true);\n    }\n\n    setLocalIsOpen(newValue);\n    onOpenChange({\n      isOpen: newValue,\n      event: event\n    });\n  }, [onOpenChange, isLocalOpen, setLocalIsOpen]);\n  var handleOnClose = useCallback(function () {\n    var newValue = false;\n    setLocalIsOpen(newValue);\n    onOpenChange({\n      isOpen: newValue\n    });\n  }, [onOpenChange, setLocalIsOpen]);\n\n  var _useFocus = useFocus(),\n      isFocused = _useFocus.isFocused,\n      bindFocus = _useFocus.bindFocus;\n\n  var handleDownArrow = function handleDownArrow(e) {\n    if (e.key === KEY_DOWN) {\n      // prevent page scroll\n      e.preventDefault();\n      handleTriggerClicked(e);\n    }\n  };\n\n  useKeydownEvent(handleDownArrow, isFocused);\n  var id = useGeneratedId();\n  return jsx(SelectionStore, null, jsx(Popup, {\n    id: isLocalOpen ? id : undefined,\n    shouldFlip: shouldFlip,\n    isOpen: isLocalOpen,\n    onClose: handleOnClose,\n    zIndex: zIndex,\n    placement: placement,\n    fallbackPlacements: fallbackPlacements,\n    testId: testId && \"\".concat(testId, \"--content\"),\n    shouldUseCaptureOnOutsideClick: true,\n    trigger: function trigger(triggerProps) {\n      if (typeof _trigger === 'function') {\n        var ref = triggerProps.ref,\n            providedProps = _objectWithoutProperties(triggerProps, _excluded);\n\n        return _trigger(_objectSpread(_objectSpread(_objectSpread({}, providedProps), bindFocus), {}, {\n          triggerRef: ref,\n          isSelected: isLocalOpen,\n          onClick: handleTriggerClicked,\n          testId: testId && \"\".concat(testId, \"--trigger\")\n        }));\n      }\n\n      return jsx(Button, _extends({}, bindFocus, {\n        ref: triggerProps.ref,\n        \"aria-controls\": triggerProps['aria-controls'],\n        \"aria-expanded\": triggerProps['aria-expanded'],\n        \"aria-haspopup\": triggerProps['aria-haspopup'],\n        isSelected: isLocalOpen,\n        iconAfter: jsx(ExpandIcon, {\n          size: \"medium\",\n          label: \"expand\"\n        }),\n        onClick: handleTriggerClicked,\n        testId: testId && \"\".concat(testId, \"--trigger\")\n      }), _trigger);\n    },\n    content: function content(_ref) {\n      var setInitialFocusRef = _ref.setInitialFocusRef;\n      return jsx(FocusManager, null, jsx(MenuWrapper, {\n        maxHeight: MAX_HEIGHT,\n        maxWidth: 800,\n        onClose: handleOnClose,\n        setInitialFocusRef: isTriggeredUsingKeyboard || autoFocus ? setInitialFocusRef : undefined\n      }, isLoading ? jsx(\"div\", {\n        css: spinnerContainerStyles\n      }, jsx(Spinner, {\n        size: \"small\"\n      }), jsx(VisuallyHidden, {\n        role: \"status\"\n      }, statusLabel)) : children));\n    }\n  }));\n};\n\nexport default DropdownMenu;","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nexport default function useFocus() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isFocused = _useState2[0],\n      setIsFocused = _useState2[1]; // ensure bindFocus has a stable ref\n\n\n  var bindFocus = useRef({\n    onFocus: function onFocus() {\n      return setIsFocused(true);\n    },\n    onBlur: function onBlur() {\n      return setIsFocused(false);\n    }\n  });\n  useEffect(function () {\n    // handle the case where a component might\n    // unmount while being focused.\n    return function () {\n      return setIsFocused(false);\n    };\n  }, []);\n  return {\n    isFocused: isFocused,\n    bindFocus: bindFocus.current\n  };\n}","import { useContext, useEffect, useRef } from 'react';\nimport { FocusManagerContext } from '../components/focus-manager'; // This function is called whenever a MenuItem mounts.\n// The refs stored in the context are used to programatically\n// control focus on a user navigates using the keyboard.\n\nfunction useRegisterItemWithFocusManager() {\n  var _useContext = useContext(FocusManagerContext),\n      registerRef = _useContext.registerRef;\n\n  var itemRef = useRef(null);\n  useEffect(function () {\n    if (itemRef.current !== null) {\n      registerRef(itemRef.current);\n    }\n  }, [registerRef]);\n  return itemRef;\n}\n\nexport default useRegisterItemWithFocusManager;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"component\", \"elemBefore\", \"elemAfter\", \"shouldTitleWrap\", \"shouldDescriptionWrap\"];\nimport React from 'react';\nimport ButtonItem from '@atlaskit/menu/button-item';\nimport CustomItem from '@atlaskit/menu/custom-item';\nimport LinkItem from '@atlaskit/menu/link-item';\nimport useRegisterItemWithFocusManager from './internal/hooks/use-register-item-with-focus-manager';\n\n/**\n * __Dropdown menu item__\n *\n * A dropdown item populates the dropdown menu with items. Every item should be inside a dropdown item group.\n *\n * - [Examples](https://atlassian.design/components/dropdown-item/examples)\n * - [Code](https://atlassian.design/components/dropdown-item/code)\n * - [Usage](https://atlassian.design/components/dropdown-item/usage)\n */\nvar DropdownMenuItem = function DropdownMenuItem(props) {\n  var component = props.component,\n      elemBefore = props.elemBefore,\n      elemAfter = props.elemAfter,\n      _props$shouldTitleWra = props.shouldTitleWrap,\n      shouldTitleWrap = _props$shouldTitleWra === void 0 ? true : _props$shouldTitleWra,\n      _props$shouldDescript = props.shouldDescriptionWrap,\n      shouldDescriptionWrap = _props$shouldDescript === void 0 ? true : _props$shouldDescript,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var itemRef = useRegisterItemWithFocusManager();\n\n  if (component) {\n    return /*#__PURE__*/React.createElement(CustomItem, _extends({\n      component: component,\n      iconBefore: elemBefore,\n      iconAfter: elemAfter,\n      shouldTitleWrap: shouldTitleWrap,\n      shouldDescriptionWrap: shouldDescriptionWrap\n    }, rest));\n  } else if (props.href) {\n    return /*#__PURE__*/React.createElement(LinkItem, _extends({\n      href: props.href,\n      iconBefore: elemBefore,\n      iconAfter: elemAfter,\n      role: \"menuitem\",\n      ref: itemRef,\n      shouldTitleWrap: shouldTitleWrap,\n      shouldDescriptionWrap: shouldDescriptionWrap\n    }, rest));\n  } else {\n    return /*#__PURE__*/React.createElement(ButtonItem, _extends({\n      role: \"menuitem\",\n      iconBefore: elemBefore,\n      iconAfter: elemAfter,\n      ref: itemRef,\n      shouldTitleWrap: shouldTitleWrap,\n      shouldDescriptionWrap: shouldDescriptionWrap\n    }, rest));\n  }\n};\n\nexport default DropdownMenuItem;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"style\", \"imageRef\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React from 'react';\nvar imgStyle = {\n  position: 'absolute',\n  left: '50%',\n  top: '50%',\n  objectFit: 'contain',\n  imageOrientation: 'none'\n};\nexport var ImageComponent = function ImageComponent(props) {\n  var style = props.style,\n      imageRef = props.imageRef,\n      otherProps = _objectWithoutProperties(props, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"img\", _extends({}, otherProps, {\n    ref: imageRef,\n    style: _objectSpread(_objectSpread({}, imgStyle), style)\n  }));\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Component } from 'react';\nimport { ImageComponent } from './styled';\nimport { getCssFromImageOrientation, isRotated } from '../imageMetaData';\nexport var MediaImage = /*#__PURE__*/function (_Component) {\n  _inherits(MediaImage, _Component);\n\n  var _super = _createSuper(MediaImage);\n\n  function MediaImage(props) {\n    var _this;\n\n    _classCallCheck(this, MediaImage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function (e) {\n      if (!_this.imageRef || !_this.imageRef.current) {\n        return;\n      }\n\n      var onImageLoad = _this.props.onImageLoad;\n\n      _this.setState({\n        isImageLoaded: true,\n        imgWidth: _this.imageRef.current.naturalWidth,\n        imgHeight: _this.imageRef.current.naturalHeight\n      });\n\n      if (onImageLoad) {\n        onImageLoad(e.currentTarget);\n      }\n    });\n\n    _this.imageRef = /*#__PURE__*/React.createRef();\n    _this.state = {\n      isImageLoaded: false,\n      imgWidth: 0,\n      imgHeight: 0,\n      parentWidth: Infinity,\n      parentHeight: Infinity\n    };\n    return _this;\n  } // TODO FIL-4060 we need to check whether the dataURI changes in UNSAFE_componentWillReceiveProps()\n  // and if it does recalculate the image height and width\n\n\n  _createClass(MediaImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var parent = ReactDOM.findDOMNode(this).parentElement;\n\n      if (!parent) {\n        return;\n      }\n\n      var _parent$getBoundingCl = parent.getBoundingClientRect(),\n          width = _parent$getBoundingCl.width,\n          height = _parent$getBoundingCl.height;\n\n      this.setState({\n        parentWidth: width,\n        parentHeight: height\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          crop = _this$props.crop,\n          stretch = _this$props.stretch,\n          dataURI = _this$props.dataURI,\n          previewOrientation = _this$props.previewOrientation,\n          crossOrigin = _this$props.crossOrigin,\n          onImageError = _this$props.onImageError,\n          _this$props$alt = _this$props.alt,\n          alt = _this$props$alt === void 0 ? '' : _this$props$alt,\n          loading = _this$props.loading,\n          forceSyncDisplay = _this$props.forceSyncDisplay;\n      var _this$state = this.state,\n          parentWidth = _this$state.parentWidth,\n          parentHeight = _this$state.parentHeight,\n          imgWidth = _this$state.imgWidth,\n          imgHeight = _this$state.imgHeight,\n          isImageLoaded = _this$state.isImageLoaded;\n      var parentRatio = parentWidth / parentHeight;\n      var imgRatio = imgWidth / imgHeight;\n      var percentSize = '100%';\n      /*\n        Cover strategy means we want to full entire screen with an image. Here is an example:\n            Image           Container   Result ( - is what cropped out)\n               \n                     \n        ->        => \n                     \n               \n       \n      */\n\n      var isCoverStrategy = crop;\n      /*\n        Fit strategy means image is fully inside container even if there is empty space left.\n        Here is an example:\n                Image            Container     Result\n               \n                     \n        ->        => \n                     \n                     \n               \n       */\n\n      var isFitStrategy = !crop;\n      var isImageRotated = isRotated(previewOrientation || 1);\n      /*\n        When photo has orientation of 90deg or 270deg (stored in EXIF meta data)\n        things get very tricky. Let me go through an two examples to explain how we deal with that:\n         Example #1:\n         Image comes in as    ________    But it needs to be     \n        horizontal picture  |        |   displayed as 750x1000        \n        of 1000x750         |        |   because orientation          \n                            |________|   say it must be rotated       \n                                         90 degrees                   \n                                                                \n         Container is smaller, and has dimensions of 100x200.\n        So, input parameters are:\n          parentWidth: 100\n          parentHeight: 200\n          imgWidth: 1000\n          imgHeight: 750\n          crop: true (means we want to cover)\n          stretch: true\n          previewOrientation: 6\n         To see what true value of isImageMoreLandscapyThanContainer is we need to flip imgRatio.\n        Since initial value is 1000/750 = 1.33 we can just do 1/1.3333 = 0.75.\n         In this situation final values will be:\n          imgRatio: 0.75\n          parentRatio: 0.5\n          isCoverStrategy: true\n          isFitStrategy: false\n          isImageRotated: true\n          isImageMoreLandscapyThanContainer: true\n          isStretchingAllowed: true\n         According to this variables state css will become:\n          height: 100%;\n         Now here is what going to happened.\n        FIRST, Browser will put an image with 1000x750 (NB! Not yet rotated) into the box 100x200\n        and apply height: 100%.\n           This will scale an image according to rules of proportions:\n          (https://en.wikipedia.org/wiki/Cross-multiplication#Rule_of_Three)\n          (orig img height) -> (scaled down img height)\n          750px             -> 200px  (is === container height, since `height: 100%`)\n          (orig img width)  -> (scaled down img width)\n                           1000px            -> (200 x 1000) / 750 = 266.66px\n         266x200 image in\n         100x200 container.\n         And only NOW browser will apply rotate: 90deg and turn image around.\n        And we end up with this:\n            Where 200x266 image\n           in the 100x200 container.\n        \n        \n        \n        \n        \n        \n        \n         To combat this we will not make height: 100% but use ratio of an image.\n        In this case imgRatio is now 0.75 (after flipping)\n         New math will look like this:\n        (orig img height) -> (scaled down img height)\n        750px             -> (0.75 x 200px) = 150px (since `height: 75%`)\n        (orig img width)  -> (scaled down img width)\n        1000px            -> (150 x 1000) / 750 = 200px\n           Now 150x200 image\n          is in 100x200 container.\n        \n        \n        \n        \n         Unfortunately this is not over yet.\n           Example #2:\n         Input parameters:\n          parentWidth: 100\n          parentHeight: 200\n          imgWidth: 1000\n          imgHeight: 750\n          crop: false (means we want to fit)  <-- This is only changed parameter\n          stretch: true\n          previewOrientation: 6\n         Final variable values will be:\n          imgRatio: 0.75\n          parentRatio: 0.5\n          isCoverStrategy: false\n          isFitStrategy: true\n          isImageRotated: true\n          isImageMoreLandscapyThanContainer: true\n          isStretchingAllowed: true\n          According to this variables state css will become:\n          width: 100%;\n         FIRST, Browser will put an image with 1000x750 (NB! Not yet rotated) into the box 100x200\n        and apply width: 100%.\n           This will scale an image according to rules of proportions:\n          (https://en.wikipedia.org/wiki/Cross-multiplication#Rule_of_Three)\n          (orig img width)  -> (scaled down img width)\n          1000px            -> 100px (is === container width, since `width: 100%`)\n          (orig img height) -> (scaled down img height)\n          750px             -> (750x100) / 1000 = 75px\n        \n        \n            \n         100x75 image in\n         100x200 container.\n         Now browser will turn image 90degrees and we und up with:\n        \n                    75x100 image in\n            100x200 container\n          \n          \n          \n          \n                  \n        \n         This looks familiar, and you might want to try what we did before and apply 75% not 100%.\n        Unfortunately this will make it even worse. If you do calculation you will find out that\n        final result will be 75x56 image in 100x200 container. For this and one more specific\n        variables state we need to use original imgRatio for percent size. In this case it's 1.333, so\n        134%\n         New math will look like this:\n        (orig img width)  -> (scaled down img width)\n        1000px            -> (100px * 1.34) = 134px (since `width: 134%`)\n        (orig img height) -> (scaled down img height)\n        750px             -> (750x134) / 1000 = 100px\n         So, 100x134 image in 100x200 container.\n       */\n\n      if (isImageRotated) {\n        imgRatio = 1 / imgRatio;\n        percentSize = \"\".concat(Math.ceil(imgRatio * 100), \"%\");\n      }\n      /*\n        Here is an example of when isImageMoreLandscapyThanContainer is true:\n           Image      Container   OR   Image      Container\n         ________      _____          ____           __\n        |        | -> |     |        |    |   ->    |  |\n        |________|    |_____|        |    |         |  |\n                                     |    |         |  |\n                                     |    |         |  |\n                                     |____|         |__|\n         For false just swap \"Image\" and \"Container\" in the example above.\n       */\n\n\n      var isImageMoreLandscapyThanContainer = imgRatio > parentRatio;\n      var isImgLandscape = imgWidth > imgHeight;\n      /*\n      This is two cases we need to cover as described in Example #2 above, but only for rotated landscape images.\n       */\n\n      if (isImageRotated && isImgLandscape) {\n        if (isFitStrategy || isImageMoreLandscapyThanContainer || isCoverStrategy && !isImageMoreLandscapyThanContainer) {\n          percentSize = \"\".concat(Math.ceil(1 / imgRatio * 100), \"%\");\n        }\n      }\n      /*\n        When isStretchingAllowed is false image is as big as it is, but as small as container\n        (according to strategy - cover or fit).\n        isStretchingAllowed is true if image is bigger then container.\n       */\n\n\n      var isStretchingAllowed = stretch;\n      /*\n        We do not want to show image until we finish deciding on sizing strategy.\n        Though if it is a \"fit\" strategy (and image hasn't been rotated) we can display it right away,\n        since it doesn't depend on isImageMoreLandscapyThanContainer nor it will change when isStretchingAllowed\n        changes it's value after imgRatio and parentRatio get defined.\n        The reason for exclude isImageRotated is that we need to calculate percentSize variable\n        and we can do that only when image is loaded (and we have image size)\n       */\n\n      var showImage = forceSyncDisplay || isImageLoaded || isFitStrategy && !isImageRotated;\n      var style = {\n        transform: 'translate(-50%, -50%)'\n      };\n\n      if (isStretchingAllowed) {\n        if (isFitStrategy && isImageMoreLandscapyThanContainer) {\n          /*\n            Image matches its width to container's and height scales accordingly.\n               Image       Container       Result\n                             \n                              \n              ->           => \n                              \n                              \n                             \n           */\n          style.width = percentSize;\n        } else if (isFitStrategy && !isImageMoreLandscapyThanContainer) {\n          /*\n            Image matches its height to container's and width scales accordingly.\n           */\n          style.height = percentSize;\n        } else if (isCoverStrategy && isImageMoreLandscapyThanContainer) {\n          /*\n            In order to cover whole container guaranteed (even in expense of stretching)\n            image matches its height to container's. Width scales accordingly and crops out sides.\n                Image       Container    Result ( - is what cropped out)\n                             \n                              \n              ->           => \n                              \n                              \n                             \n           */\n          style.height = percentSize;\n        } else if (isCoverStrategy && !isImageMoreLandscapyThanContainer) {\n          style.width = percentSize;\n        }\n      } else {\n        if (isFitStrategy) {\n          /*\n            We want image to be as wide and as height as container but not bigger then it's own size.\n               Image       Container       Result\n                     \n                              \n                              \n             ->            => \n                              \n                                           \n                                  \n            And if image is smaller it doesn't change its size\n               Image       Container       Result\n                             \n                                                 \n                                 \n              ->            =>   \n                                 \n                                 \n                                                 \n                             \n           */\n          style.maxWidth = percentSize;\n          style.maxHeight = percentSize;\n        } else if (isCoverStrategy && isImageMoreLandscapyThanContainer) {\n          /*\n            We want to fill container but we can't stretch an image if it's smaller then container.\n               Image            Container       Result\n                     \n                            \n                            \n             ->          => \n                     \n             \n            */\n          style.maxHeight = percentSize;\n        } else if (isCoverStrategy && !isImageMoreLandscapyThanContainer) {\n          style.maxWidth = percentSize;\n        }\n      }\n\n      if (!showImage) {\n        style.display = 'none';\n      }\n\n      if (previewOrientation && previewOrientation > 1) {\n        var transform = getCssFromImageOrientation(previewOrientation);\n        style.transform += \" \".concat(transform);\n      }\n\n      return /*#__PURE__*/React.createElement(ImageComponent, {\n        loading: loading,\n        \"data-testid\": \"media-image\",\n        draggable: false,\n        alt: alt,\n        style: style,\n        onLoad: this.onImageLoad,\n        onError: onImageError,\n        imageRef: this.imageRef,\n        src: dataURI,\n        crossOrigin: crossOrigin\n      });\n    }\n  }]);\n\n  return MediaImage;\n}(Component);\n\n_defineProperty(MediaImage, \"defaultProps\", {\n  crop: true,\n  stretch: false,\n  forceSyncDisplay: false\n});","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport React, { useRef, useEffect } from 'react';\nimport styled from '@emotion/styled';\nimport * as exenv from 'exenv';\nvar Wrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \";\\n\"])), function (_ref) {\n  var inline = _ref.inline;\n  return inline && 'display: inline;' || '';\n});\nWrapper.displayName = 'Ellipsify';\nexport var Ellipsify = function Ellipsify(_ref2) {\n  var text = _ref2.text,\n      lines = _ref2.lines,\n      endLength = _ref2.endLength,\n      inline = _ref2.inline,\n      testId = _ref2.testId;\n  var element = useRef(null);\n  useEffect(function () {\n    if (!element.current) {\n      return;\n    }\n\n    setEllipsis(element.current, {\n      lines: lines,\n      endLength: endLength\n    });\n  }, [element, lines, endLength]);\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    className: \"ellipsed-text\",\n    ref: element,\n    \"aria-label\": text,\n    inline: inline,\n    \"data-testid\": testId\n  }, text);\n};\n\nvar setEllipsis = function setEllipsis(element, props) {\n  var maximumLines = props.lines;\n  var height = element.getBoundingClientRect().height;\n  var text = element.textContent;\n  element.textContent = 'a';\n  var lineHeight = element.getBoundingClientRect().height;\n  var lineCount = height / lineHeight;\n  var maximumHeight = lineHeight * maximumLines;\n\n  if (lineCount <= maximumLines) {\n    element.textContent = text;\n    return;\n  }\n\n  var textContent = text;\n  var endLength = typeof props.endLength === 'number' && props.endLength >= 0 ? props.endLength : 8;\n  var beginningText = text.substr(0, text.length * maximumLines / lineCount - endLength);\n  var endText = text.substr(text.length - endLength, endLength);\n  element.textContent = textContent = \"\".concat(beginningText, \"...\").concat(endText);\n  var finalHeight = element.getBoundingClientRect().height;\n\n  if (finalHeight > maximumHeight) {\n    var adjustedBeginningText = beginningText.substr(0, beginningText.length - beginningText.length / maximumLines * 0.25);\n    textContent = \"\".concat(adjustedBeginningText, \"...\").concat(endText);\n  }\n\n  delayRun(function () {\n    return element.textContent = textContent;\n  });\n};\n\nvar timeout = function timeout(fn) {\n  return setTimeout(fn, 1);\n};\n\nvar delayRun = exenv.canUseDOM && window.requestAnimationFrame ? window.requestAnimationFrame : timeout;\nexport default Ellipsify;","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { Y200, P200, B300 } from '@atlaskit/theme/colors';\nvar typeToColorMap = {\n  image: Y200,\n  audio: P200,\n  video: '#ff7143',\n  doc: B300,\n  unknown: '#3dc7dc',\n  archive: '' // TODO [BMPT-389]: Remove this and use existing MediaTypeIcon in media-ui\n\n};\nexport var IconWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  color: \", \";\\n\"])), function (_ref) {\n  var type = _ref.type;\n  return typeToColorMap[type] || typeToColorMap.unknown;\n});","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport ImageIcon from '@atlaskit/icon/glyph/image';\nimport AudioIcon from '@atlaskit/icon/glyph/audio';\nimport ArchiveIcon from '@atlaskit/icon/glyph/media-services/zip';\nimport VideoIcon from '@atlaskit/icon/glyph/media-services/video';\nimport DocIcon from '@atlaskit/icon/glyph/document';\nimport UnknownIcon from '@atlaskit/icon/glyph/page';\nimport { IconWrapper } from './styled';\nvar icons = {\n  image: ImageIcon,\n  audio: AudioIcon,\n  video: VideoIcon,\n  doc: DocIcon,\n  unknown: UnknownIcon,\n  archive: ArchiveIcon\n};\nexport var MediaTypeIcon = /*#__PURE__*/function (_React$Component) {\n  _inherits(MediaTypeIcon, _React$Component);\n\n  var _super = _createSuper(MediaTypeIcon);\n\n  function MediaTypeIcon() {\n    _classCallCheck(this, MediaTypeIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MediaTypeIcon, [{\n    key: \"render\",\n    value: // TODO [BMPT-389]: Remove this and use existing MediaTypeIcon in media-ui\n    function render() {\n      var _this$props = this.props,\n          type = _this$props.type,\n          _this$props$size = _this$props.size,\n          size = _this$props$size === void 0 ? 'small' : _this$props$size,\n          className = _this$props.className;\n      var Icon = type && icons[type] || icons.unknown;\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        type: type || 'unknown'\n      }, /*#__PURE__*/React.createElement(Icon, {\n        label: \"media-type\",\n        size: size,\n        className: className\n      }));\n    }\n  }]);\n\n  return MediaTypeIcon;\n}(React.Component);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { size } from '@atlaskit/media-ui';\nexport var FileTypeIcon = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  float: left;\\n  margin-right: 6px;\\n  position: relative;\\n  top: 1px;\\n  img {\\n    \", \";\\n  }\\n\"])), size('12px !important'));","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { MediaTypeIcon } from '../mediaTypeIcon';\nimport { FileTypeIcon } from './styled';\nvar fileTypeIconClass = 'file-type-icon';\nexport var FileIcon = /*#__PURE__*/function (_Component) {\n  _inherits(FileIcon, _Component);\n\n  var _super = _createSuper(FileIcon);\n\n  function FileIcon() {\n    _classCallCheck(this, FileIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(FileIcon, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          mediaType = _this$props.mediaType,\n          iconUrl = _this$props.iconUrl,\n          style = _this$props.style;\n      var type = mediaType || 'unknown';\n      var defaultIcon = /*#__PURE__*/React.createElement(MediaTypeIcon, {\n        type: mediaType,\n        size: \"small\",\n        className: fileTypeIconClass\n      });\n      var icon = iconUrl ? /*#__PURE__*/React.createElement(\"img\", {\n        src: iconUrl,\n        className: \"custom-icon\",\n        alt: type\n      }) : defaultIcon;\n      return /*#__PURE__*/React.createElement(FileTypeIcon, {\n        style: style,\n        className: fileTypeIconClass\n      }, icon);\n    }\n  }]);\n\n  return FileIcon;\n}(Component);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nexport var ErrorIconWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: flex;\\n  color: #ff991f;\\n\"])));","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport WarningIcon from '@atlaskit/icon/glyph/editor/warning';\nimport { ErrorIconWrapper } from './styled';\nexport var ErrorIcon = /*#__PURE__*/function (_Component) {\n  _inherits(ErrorIcon, _Component);\n\n  var _super = _createSuper(ErrorIcon);\n\n  function ErrorIcon() {\n    _classCallCheck(this, ErrorIcon);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ErrorIcon, [{\n    key: \"render\",\n    value: function render() {\n      var size = this.props.size;\n      return /*#__PURE__*/React.createElement(ErrorIconWrapper, null, /*#__PURE__*/React.createElement(WarningIcon, {\n        label: \"Error\",\n        size: size\n      }));\n    }\n  }]);\n\n  return ErrorIcon;\n}(Component);\n\n_defineProperty(ErrorIcon, \"defaultProps\", {\n  size: 'small'\n});","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport styled from 'styled-components';\nimport { N500, N0 } from '@atlaskit/theme/colors';\nimport { borderRadius, size, center } from '@atlaskit/media-ui';\nimport { Root } from '../../styles';\nexport var Wrapper = styled(Root)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  display: flex;\\n  position: relative;\\n  line-height: 0;\\n\"])));\nexport var CardActionIconButtonVariant;\n\n(function (CardActionIconButtonVariant) {\n  CardActionIconButtonVariant[\"default\"] = \"default\";\n  CardActionIconButtonVariant[\"filled\"] = \"filled\";\n})(CardActionIconButtonVariant || (CardActionIconButtonVariant = {}));\n\nvar getVariantStyles = function getVariantStyles(variant) {\n  return variant === 'filled' ? \"\\n    background: \".concat(N0, \";\\n    margin-right: 8px;\\n    opacity: 0.8;\\n\\n    &:last-child {\\n      margin-right: 0;\\n    }\\n\\n    &:hover {\\n      opacity: 0.6;\\n    }\\n  \") : \"\\n    &:hover {\\n      background-color: rgba(9, 30, 66, 0.06);\\n    }\\n  \";\n};\n\nexport var CardActionButton = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var variant = _ref.variant;\n  return \"\\n    \".concat(center, \" \").concat(borderRadius, \" \").concat(size(26), \" color: \").concat(N500, \";\\n\\n    &:hover {\\n      cursor: pointer;\\n    }\\n\\n    \").concat(getVariantStyles(variant), \"\\n  \");\n});","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { CardActionButton } from './styled';\nexport var CardActionIconButton = /*#__PURE__*/function (_Component) {\n  _inherits(CardActionIconButton, _Component);\n\n  var _super = _createSuper(CardActionIconButton);\n\n  function CardActionIconButton() {\n    var _this;\n\n    _classCallCheck(this, CardActionIconButton);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseDown\", function (event) {\n      event.preventDefault();\n    });\n\n    return _this;\n  }\n\n  _createClass(CardActionIconButton, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          icon = _this$props.icon,\n          triggerColor = _this$props.triggerColor,\n          onClick = _this$props.onClick,\n          variant = _this$props.variant;\n      return /*#__PURE__*/React.createElement(CardActionButton, {\n        \"data-testid\": \"media-card-primary-action\",\n        onClick: onClick,\n        onMouseDown: this.onMouseDown,\n        style: {\n          color: triggerColor\n        },\n        variant: variant\n      }, icon);\n    } // this is to prevent currently focused text to loose cursor on clicking card action\n    // this does not prevent onclick behavior\n\n  }]);\n\n  return CardActionIconButton;\n}(Component);","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/wrapNativeSuper\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nexport var MediaCardError = /*#__PURE__*/function (_Error) {\n  _inherits(MediaCardError, _Error);\n\n  var _super = _createSuper(MediaCardError);\n\n  function MediaCardError(primaryReason, secondaryError) {\n    var _this;\n\n    _classCallCheck(this, MediaCardError);\n\n    _this = _super.call(this, primaryReason); // https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#support-for-newtarget\n\n    _this.primaryReason = primaryReason;\n    _this.secondaryError = secondaryError;\n    Object.setPrototypeOf(_assertThisInitialized(_this), (this instanceof MediaCardError ? this.constructor : void 0).prototype); // https://v8.dev/docs/stack-trace-api\n\n    if ('captureStackTrace' in Error) {\n      Error.captureStackTrace(_assertThisInitialized(_this), this instanceof MediaCardError ? this.constructor : void 0);\n    }\n\n    return _this;\n  }\n\n  return _createClass(MediaCardError);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nexport var LocalPreviewError = /*#__PURE__*/function (_MediaCardError) {\n  _inherits(LocalPreviewError, _MediaCardError);\n\n  var _super2 = _createSuper(LocalPreviewError);\n\n  function LocalPreviewError(primaryReason, secondaryError) {\n    var _this2;\n\n    _classCallCheck(this, LocalPreviewError);\n\n    _this2 = _super2.call(this, primaryReason, secondaryError);\n    _this2.primaryReason = primaryReason;\n    _this2.secondaryError = secondaryError;\n    return _this2;\n  }\n\n  return _createClass(LocalPreviewError);\n}(MediaCardError);\nexport var RemotePreviewError = /*#__PURE__*/function (_MediaCardError2) {\n  _inherits(RemotePreviewError, _MediaCardError2);\n\n  var _super3 = _createSuper(RemotePreviewError);\n\n  function RemotePreviewError(primaryReason, secondaryError) {\n    var _this3;\n\n    _classCallCheck(this, RemotePreviewError);\n\n    _this3 = _super3.call(this, primaryReason, secondaryError);\n    _this3.primaryReason = primaryReason;\n    _this3.secondaryError = secondaryError;\n    return _this3;\n  }\n\n  return _createClass(RemotePreviewError);\n}(MediaCardError);\nexport var SsrPreviewError = /*#__PURE__*/function (_MediaCardError3) {\n  _inherits(SsrPreviewError, _MediaCardError3);\n\n  var _super4 = _createSuper(SsrPreviewError);\n\n  function SsrPreviewError(primaryReason, secondaryError) {\n    var _this4;\n\n    _classCallCheck(this, SsrPreviewError);\n\n    _this4 = _super4.call(this, primaryReason, secondaryError);\n    _this4.primaryReason = primaryReason;\n    _this4.secondaryError = secondaryError;\n    return _this4;\n  }\n\n  return _createClass(SsrPreviewError);\n}(MediaCardError);\nexport var getImageLoadPrimaryReason = function getImageLoadPrimaryReason(source) {\n  switch (source) {\n    case 'cache-remote':\n      return 'cache-remote-uri';\n\n    case 'cache-local':\n      return 'cache-local-uri';\n\n    case 'external':\n      return 'external-uri';\n\n    case 'local':\n      return 'local-uri';\n\n    case 'remote':\n      return 'remote-uri';\n    // This fail reason will come from a bug, most likely.\n\n    default:\n      return \"unknown-uri\";\n  }\n};\nexport var ImageLoadError = /*#__PURE__*/function (_MediaCardError4) {\n  _inherits(ImageLoadError, _MediaCardError4);\n\n  var _super5 = _createSuper(ImageLoadError);\n\n  function ImageLoadError(source) {\n    _classCallCheck(this, ImageLoadError);\n\n    return _super5.call(this, getImageLoadPrimaryReason(source));\n  }\n\n  return _createClass(ImageLoadError);\n}(MediaCardError);\nexport function isMediaCardError(err) {\n  return err instanceof MediaCardError;\n}\nexport var isLocalPreviewError = function isLocalPreviewError(err) {\n  return err instanceof LocalPreviewError;\n};\nexport var isRemotePreviewError = function isRemotePreviewError(err) {\n  return err instanceof RemotePreviewError;\n};\nexport var isUnsupportedLocalPreviewError = function isUnsupportedLocalPreviewError(err) {\n  return isMediaCardError(err) && err.primaryReason === 'local-preview-unsupported';\n};\nexport function isImageLoadError(err) {\n  return err instanceof ImageLoadError;\n} // In a try/catch statement, the error caught is the type of any.\n// We can use this helper to ensure that the error handled is the type of MediaCardError if unsure\n\nexport var ensureMediaCardError = function ensureMediaCardError(primaryReason, error) {\n  return isMediaCardError(error) ? error : new MediaCardError(primaryReason, error);\n};\nexport var isUploadError = function isUploadError(error) {\n  return error && error.primaryReason === 'upload';\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { getMediaClientErrorReason, isRequestError } from '@atlaskit/media-client';\nimport { ANALYTICS_MEDIA_CHANNEL, filterFeatureFlagNames, filterFeatureFlagKeysAllProducts } from '@atlaskit/media-common';\nimport { createAndFireEvent } from '@atlaskit/analytics-next';\nimport { isMediaCardError } from '../errors';\nvar relevantFlags = {\n  newCardExperience: true,\n  captions: true,\n  timestampOnVideo: true,\n  observedWidth: true,\n  mediaInline: false,\n  folderUploads: false,\n  mediaUploadApiV2: false\n};\nexport var LOGGED_FEATURE_FLAGS = filterFeatureFlagNames(relevantFlags);\nexport var LOGGED_FEATURE_FLAG_KEYS = filterFeatureFlagKeysAllProducts(relevantFlags);\nexport var getFileAttributes = function getFileAttributes(metadata, fileStatus) {\n  return {\n    fileMediatype: metadata.mediaType,\n    fileMimetype: metadata.mimeType,\n    fileId: metadata.id,\n    fileSize: metadata.size,\n    fileStatus: fileStatus\n  };\n};\nexport var getRenderPreviewableCardPayload = function getRenderPreviewableCardPayload(fileAttributes) {\n  return {\n    eventType: 'screen',\n    action: 'viewed',\n    actionSubject: 'mediaCardRenderScreen',\n    name: 'mediaCardRenderScreen',\n    attributes: {\n      type: fileAttributes.fileMediatype,\n      fileAttributes: fileAttributes\n    }\n  };\n};\nexport var getRenderCommencedEventPayload = function getRenderCommencedEventPayload(fileAttributes, performanceAttributes) {\n  return {\n    eventType: 'operational',\n    action: 'commenced',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes\n    }\n  };\n};\nexport var getRenderSucceededEventPayload = function getRenderSucceededEventPayload(fileAttributes, performanceAttributes, ssrReliability) {\n  return {\n    eventType: 'operational',\n    action: 'succeeded',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'success',\n      ssrReliability: ssrReliability\n    }\n  };\n};\nexport var getRenderFailedExternalUriPayload = function getRenderFailedExternalUriPayload(fileAttributes, performanceAttributes) {\n  return {\n    eventType: 'operational',\n    action: 'failed',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'fail',\n      failReason: 'external-uri'\n    }\n  };\n};\nexport var getRenderErrorFailReason = function getRenderErrorFailReason(error) {\n  if (isMediaCardError(error)) {\n    return error.primaryReason;\n  } else {\n    return 'nativeError';\n  }\n};\nexport var getRenderErrorErrorReason = function getRenderErrorErrorReason(error) {\n  if (isMediaCardError(error) && error.secondaryError) {\n    var mediaClientReason = getMediaClientErrorReason(error.secondaryError);\n\n    if (mediaClientReason !== 'unknown') {\n      return mediaClientReason;\n    }\n  }\n\n  return 'nativeError';\n};\nexport var getRenderErrorErrorDetail = function getRenderErrorErrorDetail(error) {\n  if (isMediaCardError(error) && error.secondaryError) {\n    return error.secondaryError.message;\n  } else {\n    return error.message;\n  }\n};\nexport var getRenderErrorRequestMetadata = function getRenderErrorRequestMetadata(error) {\n  if (isMediaCardError(error) && !!error.secondaryError && isRequestError(error.secondaryError)) {\n    return error.secondaryError.metadata;\n  }\n};\nexport var extractErrorInfo = function extractErrorInfo(error) {\n  return {\n    failReason: getRenderErrorFailReason(error),\n    error: getRenderErrorErrorReason(error),\n    errorDetail: getRenderErrorErrorDetail(error)\n  };\n};\nexport var getRenderErrorEventPayload = function getRenderErrorEventPayload(fileAttributes, performanceAttributes, error, ssrReliability) {\n  return {\n    eventType: 'operational',\n    action: 'failed',\n    actionSubject: 'mediaCardRender',\n    attributes: _objectSpread(_objectSpread({\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'fail'\n    }, extractErrorInfo(error)), {}, {\n      request: getRenderErrorRequestMetadata(error),\n      ssrReliability: ssrReliability\n    })\n  };\n};\nexport var getRenderFailedFileStatusPayload = function getRenderFailedFileStatusPayload(fileAttributes, performanceAttributes, ssrReliability) {\n  return {\n    eventType: 'operational',\n    action: 'failed',\n    actionSubject: 'mediaCardRender',\n    attributes: {\n      fileAttributes: fileAttributes,\n      performanceAttributes: performanceAttributes,\n      status: 'fail',\n      failReason: 'failed-processing',\n      ssrReliability: ssrReliability\n    }\n  };\n};\nexport var getCopiedFilePayload = function getCopiedFilePayload(fileId) {\n  return {\n    eventType: 'ui',\n    action: 'copied',\n    actionSubject: 'file',\n    actionSubjectId: fileId,\n    attributes: {}\n  };\n};\nexport function fireMediaCardEvent(payload, createAnalyticsEvent) {\n  if (createAnalyticsEvent) {\n    var event = createAnalyticsEvent(payload);\n    event.fire(ANALYTICS_MEDIA_CHANNEL);\n  }\n}\nexport var createAndFireMediaCardEvent = function createAndFireMediaCardEvent(payload) {\n  return createAndFireEvent(ANALYTICS_MEDIA_CHANNEL)(payload);\n};","import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nvar _excluded = [\"triggerRef\"];\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport MoreIcon from '@atlaskit/icon/glyph/more';\nimport DropdownMenu, { DropdownItemGroup, DropdownItem } from '@atlaskit/dropdown-menu';\nimport { CardActionButton } from './styled';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { createAndFireMediaCardEvent } from '../analytics';\n\nvar CardActionButtonWithProps = function CardActionButtonWithProps(props) {\n  return /*#__PURE__*/React.createElement(CardActionButton, props);\n};\n\nvar CardActionButtonWithAnalytics = withAnalyticsEvents({\n  onClick: createAndFireMediaCardEvent({\n    eventType: 'ui',\n    action: 'clicked',\n    actionSubject: 'button',\n    actionSubjectId: 'mediaCardDropDownMenu',\n    attributes: {}\n  })\n})(CardActionButtonWithProps);\n\n// Trick applied due to the lack of props type of DropdownItem\nvar DropdownItemWithProps = function DropdownItemWithProps(props) {\n  return /*#__PURE__*/React.createElement(DropdownItem, _extends({\n    \"data-testid\": \"media-card-actions-menu-item\"\n  }, props));\n};\n\nvar createDropdownItemWithAnalytics = function createDropdownItemWithAnalytics(action, index) {\n  var label = action.label,\n      handler = action.handler;\n  var DropdownItemWithAnalytics = withAnalyticsEvents({\n    onClick: createAndFireMediaCardEvent({\n      eventType: 'ui',\n      action: 'clicked',\n      actionSubject: 'button',\n      actionSubjectId: 'mediaCardDropDownMenuItem',\n      attributes: {\n        label: label\n      }\n    })\n  })(DropdownItemWithProps);\n  return /*#__PURE__*/React.createElement(DropdownItemWithAnalytics, {\n    key: index,\n    onClick: handler\n  }, label);\n};\n\nexport var CardActionsDropdownMenu = /*#__PURE__*/function (_Component) {\n  _inherits(CardActionsDropdownMenu, _Component);\n\n  var _super = _createSuper(CardActionsDropdownMenu);\n\n  function CardActionsDropdownMenu() {\n    _classCallCheck(this, CardActionsDropdownMenu);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CardActionsDropdownMenu, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          actions = _this$props.actions,\n          triggerColor = _this$props.triggerColor,\n          onOpenChange = _this$props.onOpenChange,\n          triggerVariant = _this$props.triggerVariant;\n\n      if (actions.length > 0) {\n        return /*#__PURE__*/React.createElement(DropdownMenu, {\n          testId: \"media-card-actions-menu\",\n          onOpenChange: onOpenChange,\n          trigger: function trigger(_ref) {\n            var triggerRef = _ref.triggerRef,\n                providedProps = _objectWithoutProperties(_ref, _excluded);\n\n            return /*#__PURE__*/React.createElement(CardActionButtonWithAnalytics, _extends({\n              variant: triggerVariant,\n              style: {\n                color: triggerColor\n              },\n              ref: triggerRef\n            }, providedProps), /*#__PURE__*/React.createElement(MoreIcon, {\n              label: \"more\"\n            }));\n          }\n        }, /*#__PURE__*/React.createElement(DropdownItemGroup, null, actions.map(createDropdownItemWithAnalytics)));\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return CardActionsDropdownMenu;\n}(Component);","import React from 'react';\nexport function PreventClickThrough(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(\"span\", {\n    onClick: function onClick(event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }, children);\n}\nexport var createPreventClickThrough = function createPreventClickThrough(onClick) {\n  return function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n    onClick();\n  };\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { Wrapper } from './styled';\nimport { CardActionIconButton } from './cardActionIconButton';\nimport { CardActionsDropdownMenu } from './cardActionsDropdownMenu';\nimport { PreventClickThrough } from '../preventClickThrough';\nimport { createAndFireMediaCardEvent } from '../analytics';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\n\nvar CardActionIconButtonWithProps = function CardActionIconButtonWithProps(props) {\n  return /*#__PURE__*/React.createElement(CardActionIconButton, props);\n};\n\nexport var CardActionsView = /*#__PURE__*/function (_Component) {\n  _inherits(CardActionsView, _Component);\n\n  var _super = _createSuper(CardActionsView);\n\n  function CardActionsView() {\n    _classCallCheck(this, CardActionsView);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(CardActionsView, [{\n    key: \"render\",\n    value: function render() {\n      var actions = this.props.actions;\n\n      if (!actions.length) {\n        return null;\n      }\n\n      var primaryAction = actions.find(actionWithIcon);\n      var otherActions = actions.filter(actionNotEqualTo(primaryAction));\n      return /*#__PURE__*/React.createElement(PreventClickThrough, null, /*#__PURE__*/React.createElement(Wrapper, null, primaryAction ? this.renderActionIconButton(primaryAction, true) : null, this.renderOtherActionButtons(otherActions)));\n    }\n  }, {\n    key: \"renderActionIconButton\",\n    value: function renderActionIconButton(action, isPrimary) {\n      var _this$props = this.props,\n          triggerColor = _this$props.triggerColor,\n          variant = _this$props.variant;\n      var icon = action.icon,\n          handler = action.handler,\n          label = action.label;\n      var actionSubjectId = isPrimary ? 'mediaCardPrimaryActionButton' : 'mediaCardSecondaryActionButton';\n      var CardActionIconButtonWithAnalytics = withAnalyticsEvents({\n        onClick: createAndFireMediaCardEvent({\n          eventType: 'ui',\n          action: 'clicked',\n          actionSubject: 'button',\n          actionSubjectId: actionSubjectId,\n          attributes: {\n            label: label\n          }\n        })\n      })(CardActionIconButtonWithProps);\n      return /*#__PURE__*/React.createElement(CardActionIconButtonWithAnalytics, {\n        icon: icon,\n        triggerColor: triggerColor,\n        onClick: function onClick() {\n          return handler();\n        },\n        variant: variant\n      });\n    }\n  }, {\n    key: \"renderOtherActionButtons\",\n    value: function renderOtherActionButtons(actions) {\n      if (actions.length === 0) {\n        return null;\n      } else {\n        var _this$props2 = this.props,\n            triggerColor = _this$props2.triggerColor,\n            onToggle = _this$props2.onToggle,\n            variant = _this$props2.variant;\n        var firstActionWithIcon = actions.find(actionWithIcon);\n        var otherActions = actions.filter(actionNotEqualTo(firstActionWithIcon));\n\n        if (firstActionWithIcon && otherActions.length === 0) {\n          return this.renderActionIconButton(firstActionWithIcon, false);\n        } else {\n          return /*#__PURE__*/React.createElement(CardActionsDropdownMenu, {\n            actions: actions,\n            triggerColor: triggerColor,\n            onOpenChange: onToggle,\n            triggerVariant: variant\n          });\n        }\n      }\n    }\n  }]);\n\n  return CardActionsView;\n}(Component);\n\nfunction actionWithIcon(action) {\n  return !!action.icon;\n}\n\nfunction actionNotEqualTo(otherAction) {\n  return function (action) {\n    return action !== otherAction;\n  };\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12;\n\n/**\n * Everything about this file change is just wrong.\n * Mostly because we do bad things with classes.\n * This is all wrong and hopefully will be removed from existence with card v3,\n * so please dont be too sad about all this!\n */\nimport styled from 'styled-components';\nimport { rgba, centerX, easeOutCubic, transition, antialiased } from '../../../styles';\nimport { borderRadius, size, ellipsis, absolute } from '@atlaskit/media-ui';\nimport { themed } from '@atlaskit/theme/components';\nimport * as colors from '@atlaskit/theme/colors';\nexport var TickBox = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \" \", \" background-color: \", \";\\n  position: absolute;\\n  top: 8px;\\n  right: 8px;\\n  border-radius: 20px;\\n  color: #798599; /* TODO FIL-3884: Align color with new design */\\n  display: flex;\\n  opacity: 0;\\n\\n  &.selected {\\n    opacity: 1;\\n    color: white;\\n    background-color: #0052cc; /* TODO FIL-3884: Align with tickbox icons */\\n  }\\n\\n  /* Enforce dimensions of \\\"tick\\\" icon */\\n  svg {\\n    position: absolute;\\n    width: 14px;\\n  }\\n\"])), size(14), transition(), rgba('#ffffff', 0.5));\nexport var Overlay = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \" \", \" \", \" display: flex;\\n  justify-content: space-between;\\n  flex-direction: column;\\n  background: transparent;\\n  transition: 0.3s background \", \", 0.3s border-color;\\n  padding: 16px;\\n\\n  \", \" &:not(.persistent):hover, &.active {\\n    .top-row {\\n      .title {\\n        color: \", \";\\n      }\\n    }\\n\\n    .bottom-row {\\n      .delete-btn {\\n        display: flex;\\n      }\\n    }\\n  }\\n\\n  &.noHover:hover {\\n    .top-row {\\n      .title {\\n        color: \", \";\\n      }\\n    }\\n  }\\n\\n  .file-type-icon {\\n    display: block;\\n  }\\n\\n  &:not(.persistent) {\\n    &:not(.error, .noHover):hover {\\n      background-color: \", \";\\n    }\\n\\n    &.selectable {\\n      &.selected {\\n        background-color: \", \";\\n\\n        &:hover {\\n          /* TODO FIL-3884 add new overlay with rgba(colors.N900, 0.16) */\\n        }\\n\\n        .title,\\n        .bottom-row,\\n        .file-size,\\n        .more-btn {\\n          color: \", \";\\n        }\\n      }\\n    }\\n  }\\n\\n  &.persistent {\\n    &:not(.active) {\\n      overflow: hidden;\\n    }\\n\\n    .top-row {\\n      .title {\\n        transition: opacity 0.3s;\\n        opacity: 0;\\n        color: white;\\n        visibility: hidden;\\n      }\\n    }\\n\\n    .bottom-row {\\n      opacity: 0;\\n      transition: transform 0.2s, opacity 0.5s;\\n      /* This is the height of the overlay footer, needs to be present now since the parent uses flex and 100% doesn't look right anymore */\\n      transform: translateY(35px);\\n\\n      .file-type-icon {\\n        display: none;\\n      }\\n\\n      .file-size {\\n        color: white;\\n        display: none;\\n      }\\n\\n      .more-btn {\\n        color: \", \";\\n        display: none;\\n\\n        &:hover {\\n          background-color: rgba(9, 30, 66, 0.2);\\n        }\\n      }\\n\\n      .delete-btn {\\n        display: none;\\n\\n        &:hover {\\n          background-color: rgba(9, 30, 66, 0.2);\\n        }\\n      }\\n    }\\n\\n    &:hover,\\n    &.active {\\n      background-color: \", \";\\n\\n      .title {\\n        opacity: 1;\\n        visibility: visible;\\n      }\\n\\n      .file-type-icon,\\n      .file-size {\\n        display: block;\\n      }\\n\\n      .more-btn {\\n        \", \" color: \", \";\\n      }\\n\\n      .delete-btn {\\n        display: flex;\\n      }\\n\\n      .bottom-row {\\n        opacity: 1;\\n        transform: translateY(0);\\n      }\\n    }\\n\\n    /* Selectable */\\n    &.selectable {\\n      &:hover {\\n        .tickbox {\\n          opacity: 1;\\n        }\\n      }\\n\\n      &.selected {\\n        .tickbox {\\n          background-color: \", \" !important;\\n          border-color: \", \" !important;\\n          color: white;\\n        }\\n      }\\n    }\\n  }\\n\\n  &.error {\\n    .top-row {\\n      overflow: visible;\\n    }\\n    &:hover,\\n    &.active {\\n      .top-row {\\n        .title {\\n          color: \", \";\\n        }\\n      }\\n    }\\n  }\\n\"])), size(), absolute(), borderRadius, easeOutCubic, function (_ref) {\n  var hasError = _ref.hasError,\n      noHover = _ref.noHover;\n\n  if (hasError || noHover) {\n    return \"\\n        cursor: default;\\n\\n        &:hover {\\n          background: transparent;\\n        }\\n      \";\n  }\n\n  return '';\n}, colors.B400, colors.N800, rgba(colors.N900, 0.06), colors.B200, colors.N0, colors.N0, rgba(colors.N900, 0.5), centerX, colors.N0, colors.B200, colors.B200, colors.N800);\nexport var ErrorLine = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  height: 24px;\\n  display: flex;\\n  align-items: center;\\n\"])));\nexport var LeftColumn = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  position: relative;\\n  box-sizing: border-box;\\n  vertical-align: middle;\\n\"])));\nexport var TopRow = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\"])));\nexport var BottomRow = styled.div(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  height: 16px;\\n\"])));\nexport var RightColumn = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\"])));\nexport var ErrorMessage = styled.div(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  \", \" display: inline-block;\\n  vertical-align: middle;\\n  font-weight: bold;\\n  color: \", \";\\n  font-size: 12px;\\n  line-height: 15px;\\n  overflow: hidden;\\n  max-width: ~'calc(100% - 24px)';\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  margin: auto 3px;\\n\"])), antialiased, colors.N70);\nexport var AltWrapper = styled(ErrorMessage)(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  font-weight: normal;\\n\"])));\nexport var TitleWrapper = styled.div(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"\\n  box-sizing: border-box;\\n  word-wrap: break-word;\\n  color: \", \";\\n  font-size: 12px;\\n  line-height: 18px;\\n\"])), themed({\n  light: colors.N800,\n  dark: colors.DN900\n}));\nexport var Subtitle = styled.div(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\\n  \", \" font-size: 12px;\\n  color: #5e6c84;\\n\"])), ellipsis('100px'));\nexport var Metadata = styled.div(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n\"])));","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport cx from 'classnames';\nimport TickIcon from '@atlaskit/icon/glyph/check';\nimport { Ellipsify } from '@atlaskit/media-ui'; // We dont require things directly from \"utils\" to avoid circular dependencies\n\nimport { FileIcon } from '../../../utils/fileIcon';\nimport { ErrorIcon } from '../../../utils/errorIcon';\nimport CardActions from '../../../utils/cardActions';\nimport { TickBox, Overlay, ErrorLine, LeftColumn, TopRow, BottomRow, RightColumn, ErrorMessage, TitleWrapper, Subtitle, Metadata, AltWrapper } from './styled';\n\nvar resolveTitleText = function resolveTitleText(cardStatus, mediaName, error, selected) {\n  // don't show title if error\n  // also when card is uploading + selected, title is already showing outside of the overlay\n  if (error || !mediaName || cardStatus === 'uploading' && !selected) {\n    return '';\n  }\n\n  return mediaName;\n};\n\nexport var CardOverlay = /*#__PURE__*/function (_Component) {\n  _inherits(CardOverlay, _Component);\n\n  var _super = _createSuper(CardOverlay);\n\n  function CardOverlay(props) {\n    var _this;\n\n    _classCallCheck(this, CardOverlay);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"onMenuToggle\", function (attrs) {\n      _this.setState({\n        isMenuExpanded: attrs.isOpen\n      });\n    });\n\n    _this.state = {\n      isMenuExpanded: false\n    };\n    return _this;\n  }\n\n  _createClass(CardOverlay, [{\n    key: \"wrapperClassNames\",\n    get: function get() {\n      var _this$props = this.props,\n          error = _this$props.error,\n          noHover = _this$props.noHover,\n          selectable = _this$props.selectable,\n          selected = _this$props.selected,\n          mediaType = _this$props.mediaType,\n          persistent = _this$props.persistent;\n      var isMenuExpanded = this.state.isMenuExpanded;\n      return error ? cx('overlay', {\n        error: error,\n        active: isMenuExpanded\n      }) : cx('overlay', mediaType, {\n        active: isMenuExpanded,\n        selectable: selectable,\n        selected: selected,\n        // Yes, you right. We put \"persistent\" class when it is NOT persistent. \n        persistent: !persistent,\n        noHover: noHover\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          cardStatus = _this$props2.cardStatus,\n          error = _this$props2.error,\n          noHover = _this$props2.noHover,\n          mediaName = _this$props2.mediaName,\n          persistent = _this$props2.persistent,\n          selected = _this$props2.selected,\n          actions = _this$props2.actions;\n      var titleText = resolveTitleText(cardStatus, mediaName, error, selected);\n      var menuTriggerColor = !persistent ? 'white' : undefined;\n      return /*#__PURE__*/React.createElement(Overlay, {\n        hasError: !!error,\n        noHover: noHover,\n        className: this.wrapperClassNames\n      }, /*#__PURE__*/React.createElement(TopRow, {\n        className: 'top-row'\n      }, this.errorLine(), /*#__PURE__*/React.createElement(TitleWrapper, {\n        className: 'title'\n      }, titleText ? /*#__PURE__*/React.createElement(Ellipsify, {\n        testId: \"media-card-file-name\",\n        text: titleText,\n        lines: 2\n      }) : null), this.tickBox()), /*#__PURE__*/React.createElement(BottomRow, {\n        className: 'bottom-row'\n      }, /*#__PURE__*/React.createElement(LeftColumn, null, this.bottomLeftColumn()), /*#__PURE__*/React.createElement(RightColumn, null, actions ? /*#__PURE__*/React.createElement(CardActions, {\n        actions: actions,\n        onToggle: this.onMenuToggle,\n        triggerColor: menuTriggerColor\n      }) : null)));\n    }\n  }, {\n    key: \"errorLine\",\n    value: function errorLine() {\n      var _this$props3 = this.props,\n          error = _this$props3.error,\n          alt = _this$props3.alt;\n      return error && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ErrorLine, null, /*#__PURE__*/React.createElement(ErrorIcon, null), /*#__PURE__*/React.createElement(ErrorMessage, null, error)), alt && /*#__PURE__*/React.createElement(ErrorLine, null, /*#__PURE__*/React.createElement(AltWrapper, null, alt)));\n    }\n  }, {\n    key: \"tickBox\",\n    value: function tickBox() {\n      var _this$props4 = this.props,\n          selected = _this$props4.selected,\n          selectable = _this$props4.selectable;\n      var tick = /*#__PURE__*/React.createElement(TickIcon, {\n        label: \"tick\"\n      });\n      var className = cx('tickbox', {\n        selected: selected\n      });\n      return selectable && /*#__PURE__*/React.createElement(TickBox, {\n        className: className\n      }, \" \", tick, \" \");\n    }\n  }, {\n    key: \"bottomLeftColumn\",\n    value: function bottomLeftColumn() {\n      var error = this.props.error;\n\n      if (!error) {\n        var _this$props5 = this.props,\n            mediaType = _this$props5.mediaType,\n            subtitle = _this$props5.subtitle,\n            icon = _this$props5.icon;\n        var classNames = cx('metadata');\n        var fileIcon = mediaType || icon ? /*#__PURE__*/React.createElement(FileIcon, {\n          mediaType: mediaType,\n          iconUrl: icon\n        }) : null;\n        var subtitleEl = subtitle ? /*#__PURE__*/React.createElement(Subtitle, {\n          className: \"file-size\"\n        }, subtitle) : null;\n        return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Metadata, {\n          className: classNames\n        }, fileIcon, subtitleEl));\n      }\n    }\n  }, {\n    key: \"removeBtnClick\",\n    value: function removeBtnClick(handler) {\n      return function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        handler();\n      };\n    }\n  }]);\n\n  return CardOverlay;\n}(Component);\n\n_defineProperty(CardOverlay, \"defaultProps\", {\n  actions: [],\n  mediaName: ''\n});","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9;\n\nimport styled from 'styled-components';\nimport { absolute, borderRadius, size } from '@atlaskit/media-ui';\nimport { themed } from '@atlaskit/theme/components';\nimport { N20, DN50, N0 } from '@atlaskit/theme/colors';\nimport { Root, cardShadow } from '../../styles';\nimport { getSelectedBorderStyle } from '../../styles/getSelectedBorderStyle';\n\nvar getShadowAttribute = function getShadowAttribute(props) {\n  var disableOverlay = props.disableOverlay;\n  return disableOverlay ? '' : cardShadow;\n};\n\nvar getBackgroundColor = function getBackgroundColor(props) {\n  var mediaType = props.mediaType;\n  return \"background: \".concat(mediaType === 'image' ? 'transparent' : themed({\n    light: N20,\n    dark: DN50\n  })(props), \";\");\n};\n\nexport var Wrapper = styled(Root)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n  \", \"\\n\\n  line-height: normal;\\n  position: relative;\\n\\n  \", \"\\n\\n  \", \" .wrapper {\\n    \", \";\\n    display: block;\\n    height: inherit;\\n    position: relative;\\n\\n    .img-wrapper {\\n      position: relative;\\n      width: inherit;\\n      height: inherit;\\n      overflow: hidden;\\n      display: block;\\n      \", \"\\n    }\\n  }\\n\"])), getShadowAttribute, borderRadius, getBackgroundColor, getSelectedBorderStyle, size(), borderRadius, borderRadius);\nexport var PlayIconWrapper = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: white;\\n\\n  /* we want to override default icon size and hover state */\\n  &:hover > * {\\n    width: 64px;\\n    height: 64px;\\n  }\\n\"])));\nexport var PlayIconBackground = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  background: rgba(23, 43, 77, 0.7);\\n  border-radius: 100%;\\n  padding: 10px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  transition-property: width, height;\\n  transition-duration: 0.1s;\\n  width: 56px;\\n  height: 56px;\\n\"])));\nvar bodyHeight = 26;\nexport var ProgressBarWrapper = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n\"])));\nexport var Overlay = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  \", \"\\n  \", \"\\n  border-radius: inherit;\\n  background-color: rgba(9, 30, 66, 0.5);\\n\"])), absolute(), size());\nexport var Title = styled.div(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  \", \" width: 100%;\\n  padding: 8px;\\n  color: \", \";\\n  font-size: 12px;\\n  line-height: 18px;\\n  word-wrap: break-word;\\n\"])), absolute(), N0);\nexport var Body = styled.div(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  position: absolute;\\n  bottom: 0;\\n  width: 100%;\\n  padding: 8px;\\n  color: \", \";\\n\"])), N0);\nexport var ProgressWrapper = styled.div(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n\\n  /*\\n    force the height to always be 20px (the height of the cancel icon),\\n    so that the height of the progress bar doesn't jump when cards with\\n    and without a cancel icon are rendered side-by-side.\\n  */\\n  height: \", \"px;\\n\\n  /*\\n    vertically center the progress bar within the 20px, keeping the progress bar full width\\n  */\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n\"])), bodyHeight);\nexport var CardActionsWrapper = styled.div(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"\\n  margin-left: 4px;\\n  /*\\n    button must appear above overlay\\n   */\\n  z-index: 2;\\n\"])));","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { borderRadius } from '@atlaskit/media-ui';\nexport var ProgressWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \" z-index: 30;\\n  overflow: hidden;\\n  background-color: rgba(255, 255, 255, 0.3);\\n\\n  .progressBar {\\n    width: 0%;\\n    height: 3px;\\n    transition: width 0.25s ease-in;\\n    background-color: white;\\n  }\\n\"])), borderRadius);","import { isMimeTypeSupportedByBrowser } from '@atlaskit/media-client';\nexport var shouldDisplayImageThumbnail = function shouldDisplayImageThumbnail(cardStatus, mediaItemType, dataURI, mediaType, mimeType) {\n  if (mediaType === 'doc' || !mimeType && mediaItemType === 'file') {\n    return false;\n  }\n\n  if (dataURI) {\n    return mediaItemType === 'external-image' || mimeType && isMimeTypeSupportedByBrowser(mimeType) || cardStatus === 'complete' || cardStatus === 'loading-preview';\n  }\n\n  return false;\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { ProgressWrapper } from './styled';\nexport var ProgressBar = /*#__PURE__*/function (_Component) {\n  _inherits(ProgressBar, _Component);\n\n  var _super = _createSuper(ProgressBar);\n\n  function ProgressBar() {\n    _classCallCheck(this, ProgressBar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ProgressBar, [{\n    key: \"render\",\n    value: function render() {\n      if (typeof this.props.progress !== 'number') {\n        return null;\n      }\n\n      var progress = Math.min(1, Math.max(0, this.props.progress));\n      var progressBarStyle = {\n        width: \"\".concat(progress * 100, \"%\")\n      };\n      return /*#__PURE__*/React.createElement(ProgressWrapper, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'progressBar',\n        style: progressBarStyle\n      }));\n    }\n  }]);\n\n  return ProgressBar;\n}(Component);","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Component } from 'react';\nimport { Ellipsify, MediaImage } from '@atlaskit/media-ui';\nimport VidPlayIcon from '@atlaskit/icon/glyph/vid-play';\nimport { CardOverlay } from './cardOverlay';\nimport { PlayIconWrapper, Wrapper, ProgressBarWrapper, Body, CardActionsWrapper, Overlay, ProgressWrapper, Title, PlayIconBackground } from './styled';\nimport { CardLoading } from '../../utils/lightCards/cardLoading';\nimport { shouldDisplayImageThumbnail } from '../../utils/shouldDisplayImageThumbnail';\nimport { ProgressBar } from '../../utils/progressBar';\nimport CardActions from '../../utils/cardActions';\nimport { fileCardImageViewSelectedSelector, fileCardImageViewSelector } from './classnames';\nexport var FileCardImageView = /*#__PURE__*/function (_Component) {\n  _inherits(FileCardImageView, _Component);\n\n  var _super = _createSuper(FileCardImageView);\n\n  function FileCardImageView() {\n    var _this;\n\n    _classCallCheck(this, FileCardImageView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"wasThumbnailDisplayed\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCardContents\", function () {\n      var _this$props = _this.props,\n          status = _this$props.status,\n          mediaType = _this$props.mediaType,\n          fileSize = _this$props.fileSize;\n\n      if (status === 'error') {\n        return _this.renderErrorContents();\n      } else if (status === 'failed-processing') {\n        return _this.renderFailedContents();\n      } // If a video has no errors/failed processing, we want to be able to play it\n      // immediately, even if there's no image preview\n\n\n      var isZeroSize = fileSize === '' && ['processing', 'loading-preview'].includes(status);\n\n      if (mediaType !== 'video' && !_this.isFileCardImageReadyForDisplay && !isZeroSize) {\n        return _this.renderLoadingContents();\n      }\n\n      return _this.renderSuccessCardContents();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderLoadingContents\", function () {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-wrapper\"\n      }, /*#__PURE__*/React.createElement(CardLoading, null)));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderErrorContents\", function () {\n      var _this$props2 = _this.props,\n          status = _this$props2.status,\n          error = _this$props2.error,\n          alt = _this$props2.alt,\n          mediaName = _this$props2.mediaName,\n          mediaType = _this$props2.mediaType,\n          actions = _this$props2.actions,\n          fileSize = _this$props2.fileSize;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper\"\n      }), /*#__PURE__*/React.createElement(CardOverlay, {\n        cardStatus: status,\n        error: error,\n        persistent: true,\n        mediaName: mediaName,\n        mediaType: mediaType,\n        alt: alt,\n        subtitle: fileSize,\n        actions: actions\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFailedContents\", function () {\n      var _this$props3 = _this.props,\n          status = _this$props3.status,\n          mediaName = _this$props3.mediaName,\n          mediaType = _this$props3.mediaType,\n          actions = _this$props3.actions,\n          fileSize = _this$props3.fileSize;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper\"\n      }), /*#__PURE__*/React.createElement(CardOverlay, {\n        cardStatus: status,\n        noHover: true,\n        persistent: true,\n        mediaName: mediaName,\n        mediaType: mediaType,\n        subtitle: fileSize,\n        actions: actions\n      }));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderUploadingCardOverlay\", function () {\n      var _this$props4 = _this.props,\n          status = _this$props4.status,\n          mediaName = _this$props4.mediaName,\n          mediaType = _this$props4.mediaType,\n          dataURI = _this$props4.dataURI,\n          selectable = _this$props4.selectable,\n          selected = _this$props4.selected;\n      var isPersistent = mediaType === 'doc' || !dataURI;\n      return /*#__PURE__*/React.createElement(CardOverlay, {\n        cardStatus: status,\n        persistent: isPersistent,\n        mediaName: mediaName,\n        selectable: selectable,\n        selected: selected\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderPlayButton\", function () {\n      var _this$props5 = _this.props,\n          status = _this$props5.status,\n          mediaItemType = _this$props5.mediaItemType,\n          mediaType = _this$props5.mediaType,\n          mimeType = _this$props5.mimeType,\n          selectable = _this$props5.selectable,\n          dataURI = _this$props5.dataURI;\n\n      if (mediaType !== 'video') {\n        return null;\n      }\n\n      if (selectable && !shouldDisplayImageThumbnail(status, mediaItemType, dataURI, mediaType, mimeType)) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(PlayIconWrapper, null, /*#__PURE__*/React.createElement(PlayIconBackground, null, /*#__PURE__*/React.createElement(VidPlayIcon, {\n        testId: \"media-card-play-button\",\n        label: \"play\",\n        size: \"large\"\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function () {\n      var _this$props6 = _this.props,\n          onImageLoad = _this$props6.onImageLoad,\n          cardPreview = _this$props6.cardPreview;\n      onImageLoad && onImageLoad(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function () {\n      var _this$props7 = _this.props,\n          onImageError = _this$props7.onImageError,\n          cardPreview = _this$props7.cardPreview;\n      onImageError && onImageError(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMediaImage\", function () {\n      var _this$props8 = _this.props,\n          status = _this$props8.status,\n          mediaItemType = _this$props8.mediaItemType,\n          dataURI = _this$props8.dataURI,\n          mediaType = _this$props8.mediaType,\n          mimeType = _this$props8.mimeType,\n          previewOrientation = _this$props8.previewOrientation,\n          onDisplayImage = _this$props8.onDisplayImage,\n          alt = _this$props8.alt;\n\n      if (!shouldDisplayImageThumbnail(status, mediaItemType, dataURI, mediaType, mimeType)) {\n        return null;\n      }\n\n      if (!_this.wasThumbnailDisplayed && onDisplayImage && mediaType === 'image') {\n        onDisplayImage();\n        _this.wasThumbnailDisplayed = true;\n      }\n\n      return /*#__PURE__*/React.createElement(MediaImage, {\n        dataURI: dataURI,\n        alt: alt,\n        crop: _this.isCropped,\n        stretch: _this.isStretched,\n        previewOrientation: previewOrientation,\n        onImageLoad: _this.onImageLoad,\n        onImageError: _this.onImageError\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderProgressBar\", function () {\n      var _this$props9 = _this.props,\n          mediaName = _this$props9.mediaName,\n          progress = _this$props9.progress,\n          actions = _this$props9.actions,\n          status = _this$props9.status;\n\n      if (status !== 'uploading') {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(ProgressBarWrapper, null, /*#__PURE__*/React.createElement(Overlay, null, /*#__PURE__*/React.createElement(Title, null, /*#__PURE__*/React.createElement(Ellipsify, {\n        testId: \"media-card-file-name\",\n        text: mediaName || '',\n        lines: 2\n      })), /*#__PURE__*/React.createElement(Body, null, /*#__PURE__*/React.createElement(ProgressWrapper, null, /*#__PURE__*/React.createElement(ProgressBar, {\n        progress: progress\n      })), /*#__PURE__*/React.createElement(CardActionsWrapper, null, actions ? /*#__PURE__*/React.createElement(CardActions, {\n        actions: actions,\n        triggerColor: \"white\"\n      }) : null))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSuccessCardContents\", function () {\n      var _this$props10 = _this.props,\n          disableOverlay = _this$props10.disableOverlay,\n          selectable = _this$props10.selectable,\n          status = _this$props10.status;\n      var overlay = null;\n\n      if (!disableOverlay) {\n        if (status === 'uploading') {\n          if (selectable) {\n            overlay = _this.renderUploadingCardOverlay();\n          }\n        } else {\n          overlay = _this.renderSuccessCardOverlay();\n        }\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-wrapper\"\n      }, _this.renderMediaImage(), _this.renderProgressBar(), _this.renderPlayButton()), overlay);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderSuccessCardOverlay\", function () {\n      var _this$props11 = _this.props,\n          status = _this$props11.status,\n          mediaName = _this$props11.mediaName,\n          mediaType = _this$props11.mediaType,\n          fileSize = _this$props11.fileSize,\n          dataURI = _this$props11.dataURI,\n          selectable = _this$props11.selectable,\n          selected = _this$props11.selected,\n          actions = _this$props11.actions;\n      var isPersistent = mediaType === 'doc' || !dataURI;\n      return /*#__PURE__*/React.createElement(CardOverlay, {\n        cardStatus: status,\n        persistent: isPersistent,\n        mediaName: mediaName,\n        mediaType: mediaType,\n        selectable: selectable,\n        selected: selected,\n        subtitle: fileSize,\n        actions: actions\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(FileCardImageView, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props12 = this.props,\n          disableOverlay = _this$props12.disableOverlay,\n          selectable = _this$props12.selectable,\n          selected = _this$props12.selected,\n          mediaType = _this$props12.mediaType,\n          progress = _this$props12.progress,\n          status = _this$props12.status,\n          mediaName = _this$props12.mediaName;\n      return /*#__PURE__*/React.createElement(Wrapper, {\n        \"data-testid\": \"media-file-card-view\",\n        \"data-test-media-name\": mediaName,\n        \"data-test-status\": status,\n        \"data-test-progress\": progress,\n        \"data-test-selected\": selected ? true : undefined,\n        disableOverlay: disableOverlay,\n        selectable: selectable,\n        selected: selected,\n        mediaType: mediaType,\n        className: \"\".concat(fileCardImageViewSelector, \" \").concat(selected ? fileCardImageViewSelectedSelector : '')\n      }, this.renderCardContents());\n    }\n  }, {\n    key: \"isFileCardImageReadyForDisplay\",\n    get: function get() {\n      var _this$props13 = this.props,\n          dataURI = _this$props13.dataURI,\n          status = _this$props13.status;\n      return !!dataURI || !['loading', 'processing', 'loading-preview'].includes(status);\n    }\n  }, {\n    key: \"isCropped\",\n    get: function get() {\n      var resizeMode = this.props.resizeMode;\n      return resizeMode === 'crop';\n    }\n  }, {\n    key: \"isStretched\",\n    get: function get() {\n      var resizeMode = this.props.resizeMode;\n      return resizeMode === 'stretchy-fit';\n    }\n  }]);\n\n  return FileCardImageView;\n}(Component);\n\n_defineProperty(FileCardImageView, \"defaultProps\", {\n  resizeMode: 'crop',\n  disableOverlay: false\n});","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nexport function attachDetailsToActions(actions, details) {\n  return actions.map(function (action) {\n    return _objectSpread(_objectSpread({}, action), {}, {\n      handler: function handler() {\n        action.handler({\n          type: 'file',\n          details: details\n        });\n      }\n    });\n  });\n}","import React from 'react';\nimport { FormattedMessage } from 'react-intl-next';\nimport { messages } from '@atlaskit/media-ui';\nexport var getErrorMessage = function getErrorMessage(status) {\n  return status === 'error' && /*#__PURE__*/React.createElement(FormattedMessage, messages.failed_to_load);\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { useEffect } from 'react';\nimport { MediaImage } from '@atlaskit/media-ui';\nimport { resizeModeToMediaImageProps } from '../../../utils/resizeModeToMediaImageProps';\nexport var ImageRenderer = function ImageRenderer(_ref) {\n  var cardPreview = _ref.cardPreview,\n      alt = _ref.alt,\n      resizeMode = _ref.resizeMode,\n      onImageLoad = _ref.onImageLoad,\n      onImageError = _ref.onImageError,\n      onDisplayImage = _ref.onDisplayImage,\n      mediaType = _ref.mediaType,\n      nativeLazyLoad = _ref.nativeLazyLoad,\n      forceSyncDisplay = _ref.forceSyncDisplay;\n  useEffect(function () {\n    // TODO: trigger accordingly with the succeeded event. This could be a breaking change\n    if (mediaType === 'image' && onDisplayImage) {\n      onDisplayImage();\n    }\n  }, [mediaType, onDisplayImage]);\n\n  var onLoad = function onLoad() {\n    onImageLoad && onImageLoad(cardPreview);\n  };\n\n  var onError = function onError() {\n    onImageError && onImageError(cardPreview);\n  };\n\n  return /*#__PURE__*/React.createElement(MediaImage, _extends({\n    dataURI: cardPreview.dataURI,\n    alt: alt,\n    previewOrientation: cardPreview.orientation,\n    onImageLoad: onLoad,\n    onImageError: onError,\n    loading: nativeLazyLoad ? 'lazy' : undefined,\n    forceSyncDisplay: forceSyncDisplay\n  }, resizeModeToMediaImageProps(resizeMode)));\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\nimport styled from 'styled-components';\nimport { responsiveSettings, getTitleBoxHeight, Breakpoint } from '../common';\nimport { N0 } from '@atlaskit/theme/colors';\nimport { rgba } from '../../../styles/mixins';\n\nvar generateResponsiveStyles = function generateResponsiveStyles() {\n  var breakpoint = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Breakpoint.SMALL;\n  var setting = responsiveSettings[breakpoint];\n  var verticalPadding = setting.titleBox.verticalPadding;\n  var horizontalPadding = setting.titleBox.horizontalPadding;\n  var height = getTitleBoxHeight(breakpoint);\n  return \"\\n    height: \".concat(height, \"px;\\n    padding: \").concat(verticalPadding, \"px \").concat(horizontalPadding, \"px;\\n  \");\n};\n\nvar HEX_REGEX = /^#[0-9A-F]{6}$/i;\nexport var TitleBoxWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var breakpoint = _ref.breakpoint,\n      titleBoxBgColor = _ref.titleBoxBgColor;\n  return \"\\n    position: absolute;\\n    bottom: 0;\\n    width: 100%;\\n    background-color: \".concat(rgba(titleBoxBgColor && HEX_REGEX.test(titleBoxBgColor) ? titleBoxBgColor : N0, 0.8), \";\\n    color: inherit;\\n    cursor: inherit;\\n    pointer-events: none;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    \").concat(generateResponsiveStyles(breakpoint), \"\\n  \");\n});\nTitleBoxWrapper.displayName = 'TitleBoxWrapper';\nvar infoStyles = \"\\n  white-space: nowrap;\\n  overflow: hidden;\\n\";\nvar iconOverlapStyles = \"\\n  padding-right: 10px;\\n\";\nexport var TitleBoxHeader = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref2) {\n  var hasIconOverlap = _ref2.hasIconOverlap;\n  return \"\\n    font-weight: 600;\\n    \".concat(infoStyles, \"\\n    \").concat(hasIconOverlap && iconOverlapStyles, \"\\n  \");\n});\nTitleBoxHeader.displayName = 'FailedTitleBoxHeader';\nexport var TitleBoxFooter = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref3) {\n  var hasIconOverlap = _ref3.hasIconOverlap;\n  return \"\\n    text-overflow: ellipsis;\\n    \".concat(infoStyles, \"\\n    \").concat(hasIconOverlap && iconOverlapStyles, \"\\n  \");\n});\nTitleBoxFooter.displayName = 'TitleBoxFooter';\nexport var TitleBoxIcon = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 4px;\\n  bottom: 0px;\\n\"])));\nTitleBoxIcon.displayName = 'TitleBoxIcon';\nexport var ErrorMessageWrapper = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  span {\\n    vertical-align: middle;\\n    :nth-child(2) {\\n      margin-left: 4px;\\n      margin-right: 4px;\\n    }\\n  }\\n\"])));","export function resizeModeToMediaImageProps(resizeMode) {\n  return {\n    crop: resizeMode === 'crop',\n    stretch: resizeMode === 'stretchy-fit'\n  };\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport React from 'react';\nimport styled from '@emotion/styled';\nvar truncateCommonStyles = \"\\n  display: inline-block;\\n  vertical-align: bottom;\\n  white-space: nowrap;\\n  overflow: hidden;\\n\";\nexport var TruncateLeft = styled.span(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  max-width: calc(100% - \", \"em);\\n  min-width: \", \";\\n  text-overflow: ellipsis;\\n\"])), truncateCommonStyles, function (_ref) {\n  var fontSizePX = _ref.fontSizePX,\n      endFixedChars = _ref.endFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * endFixedChars + 1;\n}, function (_ref2) {\n  var fontSizePX = _ref2.fontSizePX,\n      startFixedChars = _ref2.startFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * startFixedChars;\n});\nexport var TruncateRight = styled.span(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n  max-width: calc(100% - \", \");\\n  position: relative;\\n\"])), truncateCommonStyles, function (_ref3) {\n  var fontSizePX = _ref3.fontSizePX,\n      startFixedChars = _ref3.startFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * startFixedChars;\n});\nexport var calculateTruncation = function calculateTruncation(text, startFixedChars, endFixedChars) {\n  var minAllowedLength = endFixedChars + startFixedChars;\n\n  if (text.length <= minAllowedLength) {\n    // if no truncation return same value for left and right\n    return {\n      left: text,\n      right: text\n    };\n  }\n\n  var splitAt = text.length - endFixedChars;\n  var left = text.substr(0, splitAt);\n  var right = text.substr(splitAt);\n  return {\n    left: left,\n    right: right\n  };\n};\n\nvar fontFaceScaleFactor = function fontFaceScaleFactor(fontSizePX) {\n  return fontSizePX / 11 * 0.46;\n};\n/* factor for fontSize of 11px */\n\n\nexport var Truncate = function Truncate(_ref4) {\n  var text = _ref4.text,\n      _ref4$fontSizePX = _ref4.fontSizePX,\n      fontSizePX = _ref4$fontSizePX === void 0 ? 11 : _ref4$fontSizePX,\n      _ref4$startFixedChars = _ref4.startFixedChars,\n      startFixedChars = _ref4$startFixedChars === void 0 ? 4 : _ref4$startFixedChars,\n      _ref4$endFixedChars = _ref4.endFixedChars,\n      endFixedChars = _ref4$endFixedChars === void 0 ? 7 : _ref4$endFixedChars;\n\n  var _calculateTruncation = calculateTruncation(text, startFixedChars, endFixedChars),\n      leftStr = _calculateTruncation.left,\n      rightStr = _calculateTruncation.right;\n\n  if (leftStr === rightStr) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, text);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TruncateLeft, {\n    fontSizePX: fontSizePX,\n    startFixedChars: startFixedChars,\n    endFixedChars: endFixedChars\n  }, leftStr), /*#__PURE__*/React.createElement(TruncateRight, {\n    fontSizePX: fontSizePX,\n    startFixedChars: startFixedChars,\n    endFixedChars: endFixedChars\n  }, rightStr));\n};","import React from 'react';\nimport LockFilledIcon from '@atlaskit/icon/glyph/lock-filled';\nimport { injectIntl } from 'react-intl-next';\nimport { TitleBoxWrapper, TitleBoxHeader, TitleBoxFooter, TitleBoxIcon } from './styled';\nimport { Truncate } from '@atlaskit/media-ui/truncateText';\nimport { formatDate } from '@atlaskit/media-ui/formatDate';\nexport var FormattedDate = injectIntl(function (_ref) {\n  var timestamp = _ref.timestamp,\n      intl = _ref.intl;\n\n  var _ref2 = intl || {\n    locale: 'en'\n  },\n      _ref2$locale = _ref2.locale,\n      locale = _ref2$locale === void 0 ? 'en' : _ref2$locale;\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, formatDate(timestamp, locale));\n});\nexport var TitleBox = function TitleBox(_ref3) {\n  var name = _ref3.name,\n      createdAt = _ref3.createdAt,\n      breakpoint = _ref3.breakpoint,\n      titleBoxBgColor = _ref3.titleBoxBgColor,\n      titleBoxIcon = _ref3.titleBoxIcon;\n  return /*#__PURE__*/React.createElement(TitleBoxWrapper, {\n    breakpoint: breakpoint,\n    titleBoxBgColor: titleBoxBgColor\n  }, /*#__PURE__*/React.createElement(TitleBoxHeader, {\n    hasIconOverlap: !!titleBoxIcon && !createdAt\n  }, /*#__PURE__*/React.createElement(Truncate, {\n    text: name\n  })), createdAt ? /*#__PURE__*/React.createElement(TitleBoxFooter, {\n    hasIconOverlap: !!titleBoxIcon\n  }, /*#__PURE__*/React.createElement(FormattedDate, {\n    timestamp: createdAt\n  })) : null, titleBoxIcon === 'LockFilledIcon' && /*#__PURE__*/React.createElement(TitleBoxIcon, null, /*#__PURE__*/React.createElement(LockFilledIcon, {\n    label: \"\",\n    size: \"small\"\n  })));\n};","import React from 'react';\nimport { TitleBoxWrapper, ErrorMessageWrapper } from './styled';\nimport EditorWarningIcon from '@atlaskit/icon/glyph/editor/warning';\nimport { messages } from '@atlaskit/media-ui';\nimport { R300 } from '@atlaskit/theme/colors';\nimport { FormattedMessage } from 'react-intl-next';\nimport { FormattedMessageWrapper } from '../../styled';\nexport var FailedTitleBox = function FailedTitleBox(_ref) {\n  var breakpoint = _ref.breakpoint,\n      _ref$customMessage = _ref.customMessage,\n      customMessage = _ref$customMessage === void 0 ? messages.failed_to_load : _ref$customMessage;\n  return /*#__PURE__*/React.createElement(TitleBoxWrapper, {\n    breakpoint: breakpoint\n  }, /*#__PURE__*/React.createElement(ErrorMessageWrapper, null, /*#__PURE__*/React.createElement(EditorWarningIcon, {\n    label: 'Warning',\n    size: 'small',\n    primaryColor: R300\n  }), /*#__PURE__*/React.createElement(FormattedMessageWrapper, null, /*#__PURE__*/React.createElement(FormattedMessage, customMessage))));\n};","import React from 'react';\nimport VidPlayIcon from '@atlaskit/icon/glyph/vid-play';\nimport { Wrapper, Background } from './styled';\nexport var PlayButton = function PlayButton() {\n  return /*#__PURE__*/React.createElement(Wrapper, null, /*#__PURE__*/React.createElement(Background, null), /*#__PURE__*/React.createElement(VidPlayIcon, {\n    label: \"play\",\n    size: \"large\"\n  }));\n};","import React from 'react';\nimport { Wrapper } from './styled';\nimport TickIcon from '@atlaskit/icon/glyph/check';\nexport var TickBox = function TickBox(_ref) {\n  var selected = _ref.selected;\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    selected: selected\n  }, /*#__PURE__*/React.createElement(TickIcon, {\n    label: \"tick\"\n  }));\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { CardActionIconButtonVariant, CardActionsView } from '../../../utils/cardActions';\nimport { Wrapper } from './styled';\nexport var ActionsBar = /*#__PURE__*/function (_React$Component) {\n  _inherits(ActionsBar, _React$Component);\n\n  var _super = _createSuper(ActionsBar);\n\n  function ActionsBar() {\n    _classCallCheck(this, ActionsBar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ActionsBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isFixed = _this$props.isFixed,\n          actions = _this$props.actions;\n\n      if (actions.length === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Wrapper, {\n        isFixed: isFixed\n      }, /*#__PURE__*/React.createElement(CardActionsView, {\n        actions: actions,\n        variant: CardActionIconButtonVariant.filled\n      }));\n    }\n  }]);\n\n  return ActionsBar;\n}(React.Component);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { getTitleBoxHeight } from '../common';\nexport function titleBoxHeight(hasTitleBox, breakpoint) {\n  // there is no titlebox\n  if (!hasTitleBox) {\n    return \"0px\";\n  } // calculate height of the titlebox\n\n\n  var marginBottom = getTitleBoxHeight(breakpoint);\n  return \"\".concat(marginBottom, \"px\");\n}\nexport var IconWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var hasTitleBox = _ref.hasTitleBox,\n      breakpoint = _ref.breakpoint;\n  return \"\\n    position: absolute;\\n    width: 100%;\\n    height: calc(100% - \".concat(titleBoxHeight(hasTitleBox, breakpoint), \");\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n\");\n});\nIconWrapper.displayName = 'MediaIconWrapper';","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport styled from 'styled-components';\nimport { keyframes } from 'styled-components';\nimport { N300 } from '@atlaskit/theme/colors';\nvar breatheAnimation = keyframes(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n 0% { opacity: 1}\\n 50% { opacity: 0.3 }\\n 100% { opacity: 1; }\"])));\nvar animatedStyles = \"\\n  animation-name: \".concat(breatheAnimation, \";\\n  animation-duration: 3.5s;\\n  animation-timing-function: ease-in-out;\\n  animation-iteration-count: infinite;\\n\");\nexport var IconMessageWrapper = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var animated = _ref.animated,\n      reducedFont = _ref.reducedFont;\n  return \"\\n    overflow: hidden;\\n    opacity: 1;\\n    font-weight: 450;\\n    \".concat(reducedFont ? 'font-size: 0.7em;' : '', \"\\n    color: \").concat(N300, \";\\n    text-align:center;\\n    \").concat(animated ? animatedStyles : '', \"\\n    margin-bottom: -1em;\\n    padding: 3px 10px;\\n\");\n});\nIconMessageWrapper.displayName = 'IconMessageWrapper';","import _extends from \"@babel/runtime/helpers/extends\";\nimport React from 'react';\nimport { IconMessageWrapper } from './styled';\nimport { messages } from '@atlaskit/media-ui';\nimport { FormattedMessage } from 'react-intl-next';\nimport { FormattedMessageWrapper } from '../../styled';\nexport var IconMessage = function IconMessage(_ref) {\n  var messageDescriptor = _ref.messageDescriptor,\n      _ref$animated = _ref.animated,\n      animated = _ref$animated === void 0 ? false : _ref$animated,\n      _ref$reducedFont = _ref.reducedFont,\n      reducedFont = _ref$reducedFont === void 0 ? false : _ref$reducedFont;\n  return /*#__PURE__*/React.createElement(IconMessageWrapper, {\n    animated: animated,\n    reducedFont: reducedFont\n  }, /*#__PURE__*/React.createElement(FormattedMessageWrapper, null, /*#__PURE__*/React.createElement(FormattedMessage, messageDescriptor)));\n};\nexport var CreatingPreview = function CreatingPreview(_ref2) {\n  var disableAnimation = _ref2.disableAnimation;\n  return /*#__PURE__*/React.createElement(IconMessage, {\n    messageDescriptor: messages.creating_preview,\n    animated: !disableAnimation\n  });\n};\nexport var PreviewUnavailable = function PreviewUnavailable(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.preview_unavailable\n  }));\n};\nexport var FailedToLoad = function FailedToLoad(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.failed_to_load\n  }));\n};\nexport var FailedToUpload = function FailedToUpload(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.failed_to_upload\n  }));\n};\nexport var PreviewCurrentlyUnavailable = function PreviewCurrentlyUnavailable(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.preview_currently_unavailable,\n    reducedFont: true\n  }));\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { getMediaFeatureFlag } from '@atlaskit/media-common';\nimport { FileCardImageView } from '../files';\nimport { breakpointSize } from '../utils/breakpoint';\nimport { defaultImageCardDimensions, getDefaultCardDimensions } from '../utils/cardDimensions';\nimport { isValidPercentageUnit } from '../utils/isValidPercentageUnit';\nimport { getCSSUnitValue } from '../utils/getCSSUnitValue';\nimport { getElementDimension } from '../utils/getElementDimension';\nimport { Wrapper } from './styled';\nimport { createAndFireMediaCardEvent } from '../utils/analytics';\nimport { attachDetailsToActions } from '../actions';\nimport { getErrorMessage } from '../utils/getErrorMessage';\nimport { toHumanReadableMediaSize, messages } from '@atlaskit/media-ui';\nimport { NewFileExperienceWrapper, CardImageContainer, calcBreakpointSize } from './ui/styled';\nimport { ImageRenderer } from './ui/imageRenderer/imageRenderer';\nimport { TitleBox } from './ui/titleBox/titleBox';\nimport { FailedTitleBox } from './ui/titleBox/failedTitleBox';\nimport { ProgressBar } from './ui/progressBar/progressBar';\nimport { PlayButton } from './ui/playButton/playButton';\nimport { TickBox } from './ui/tickBox/tickBox';\nimport { Blanket } from './ui/blanket/styled';\nimport { ActionsBar } from './ui/actionsBar/actionsBar';\nimport Tooltip from '@atlaskit/tooltip';\nimport { IconWrapper } from './ui/iconWrapper/styled';\nimport { MimeTypeIcon } from '@atlaskit/media-ui/mime-type-icon';\nimport SpinnerIcon from '@atlaskit/spinner';\nimport { PreviewUnavailable, CreatingPreview, FailedToUpload, PreviewCurrentlyUnavailable, FailedToLoad } from './ui/iconMessage';\nimport { isRateLimitedError, isPollingError } from '@atlaskit/media-client';\nimport { newFileExperienceClassName } from './card/cardConstants';\nimport { isUploadError } from '../errors';\n\n/**\n * This is classic vanilla CardView class. To create an instance of class one would need to supply\n * `createAnalyticsEvent` prop to satisfy it's Analytics Events needs.\n */\nexport var CardViewBase = /*#__PURE__*/function (_React$Component) {\n  _inherits(CardViewBase, _React$Component);\n\n  var _super = _createSuper(CardViewBase);\n\n  function CardViewBase() {\n    var _this;\n\n    _classCallCheck(this, CardViewBase);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      didImageRender: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"divRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function (prevCardPreview) {\n      var _this$props = _this.props,\n          onImageLoad = _this$props.onImageLoad,\n          cardPreview = _this$props.cardPreview;\n\n      if (prevCardPreview.dataURI !== (cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dataURI)) {\n        return;\n      } // We render the icon & icon message always, even if there is cardPreview available.\n      // If the image fails to load/render, the icon will remain, i.e. the user won't see a change until\n      // the root card decides to chage status to error.\n      // If the image renders successfully, we switch this variable to hide the icon & icon message\n      // behind the thumbnail in case the image has transparency.\n      // It is less likely that root component replaces a suceeded cardPreview for a failed one\n      // than the opposite case. Therefore we prefer to hide the icon instead show when the image fails,\n      // for a smoother transition\n\n\n      _this.setState({\n        didImageRender: true\n      });\n\n      onImageLoad && onImageLoad(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function (cardPreview) {\n      var onImageError = _this.props.onImageError;\n\n      _this.setState({\n        didImageRender: false\n      });\n\n      onImageError && onImageError(cardPreview);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveElementWidth\", function () {\n      var dimensions = _this.props.dimensions;\n\n      if (!dimensions) {\n        return;\n      }\n\n      var width = dimensions.width;\n\n      if (width && isValidPercentageUnit(width) && !!_this.divRef.current) {\n        var elementWidth = getElementDimension(_this.divRef.current, 'width');\n\n        _this.setState({\n          elementWidth: elementWidth\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFileNewExperience\", function () {\n      var _this$props2 = _this.props,\n          dimensions = _this$props2.dimensions,\n          appearance = _this$props2.appearance,\n          onClick = _this$props2.onClick,\n          onMouseEnter = _this$props2.onMouseEnter,\n          testId = _this$props2.testId,\n          metadata = _this$props2.metadata,\n          status = _this$props2.status,\n          selected = _this$props2.selected,\n          selectable = _this$props2.selectable,\n          disableOverlay = _this$props2.disableOverlay,\n          cardPreview = _this$props2.cardPreview,\n          mediaCardCursor = _this$props2.mediaCardCursor;\n\n      var _ref = metadata || {},\n          name = _ref.name;\n\n      var shouldDisplayBackground = !cardPreview || !disableOverlay || status === 'error' || status === 'failed-processing';\n      var isPlayButtonClickable = !!(_this.shouldRenderPlayButton() && disableOverlay);\n      var isTickBoxSelectable = !disableOverlay && !!selectable && !selected; // Disable tooltip for Media Single\n\n      var shouldDisplayTooltip = !disableOverlay;\n      return /*#__PURE__*/React.createElement(NewFileExperienceWrapper, {\n        className: newFileExperienceClassName,\n        \"data-testid\": testId || 'media-card-view',\n        dimensions: dimensions,\n        appearance: appearance,\n        onClick: onClick,\n        onMouseEnter: onMouseEnter,\n        innerRef: _this.divRef,\n        breakpoint: _this.breakpoint,\n        mediaCardCursor: mediaCardCursor,\n        disableOverlay: !!disableOverlay,\n        selected: !!selected,\n        displayBackground: shouldDisplayBackground,\n        isPlayButtonClickable: isPlayButtonClickable,\n        isTickBoxSelectable: isTickBoxSelectable,\n        shouldDisplayTooltip: shouldDisplayTooltip\n      }, shouldDisplayTooltip ? /*#__PURE__*/React.createElement(Tooltip, {\n        content: name,\n        position: \"bottom\",\n        tag: 'div'\n      }, _this.renderNewExperienceCard()) : _this.renderNewExperienceCard());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFile\", function () {\n      var _this$props3 = _this.props,\n          cardPreview = _this$props3.cardPreview,\n          status = _this$props3.status,\n          mediaItemType = _this$props3.mediaItemType,\n          metadata = _this$props3.metadata,\n          progress = _this$props3.progress,\n          resizeMode = _this$props3.resizeMode,\n          dimensions = _this$props3.dimensions,\n          selectable = _this$props3.selectable,\n          selected = _this$props3.selected,\n          disableOverlay = _this$props3.disableOverlay,\n          alt = _this$props3.alt,\n          onDisplayImage = _this$props3.onDisplayImage,\n          actions = _this$props3.actions;\n\n      var _ref2 = cardPreview || {},\n          dataURI = _ref2.dataURI,\n          orientation = _ref2.orientation;\n\n      var _ref3 = metadata || {},\n          name = _ref3.name,\n          mediaType = _ref3.mediaType,\n          mimeType = _ref3.mimeType,\n          size = _ref3.size;\n\n      var actionsWithDetails = metadata && actions ? attachDetailsToActions(actions, metadata) : [];\n      var errorMessage = getErrorMessage(status);\n      var fileSize = !size ? '' : toHumanReadableMediaSize(size);\n      return /*#__PURE__*/React.createElement(FileCardImageView, {\n        error: errorMessage,\n        dimensions: dimensions,\n        selectable: selectable,\n        selected: selected,\n        dataURI: dataURI,\n        mediaName: name,\n        mediaType: mediaType,\n        mimeType: mimeType,\n        fileSize: fileSize,\n        status: status,\n        mediaItemType: mediaItemType,\n        progress: progress,\n        resizeMode: resizeMode,\n        onDisplayImage: onDisplayImage,\n        actions: actionsWithDetails,\n        disableOverlay: disableOverlay,\n        previewOrientation: orientation,\n        alt: alt,\n        onImageLoad: _this.onImageLoad,\n        onImageError: _this.onImageError,\n        cardPreview: cardPreview\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRenderConfigByStatus\", function () {\n      var _this$props4 = _this.props,\n          cardPreview = _this$props4.cardPreview,\n          status = _this$props4.status,\n          metadata = _this$props4.metadata,\n          disableOverlay = _this$props4.disableOverlay,\n          error = _this$props4.error,\n          selectable = _this$props4.selectable,\n          disableAnimation = _this$props4.disableAnimation;\n\n      var _ref4 = metadata || {},\n          name = _ref4.name,\n          mediaType = _ref4.mediaType;\n\n      var didImageRender = _this.state.didImageRender;\n      var isZeroSize = !!(metadata && metadata.size === 0);\n      var defaultConfig = {\n        renderTypeIcon: !didImageRender,\n        renderImageRenderer: !!cardPreview,\n        renderPlayButton: !!cardPreview && mediaType === 'video',\n        renderBlanket: !disableOverlay,\n        renderTitleBox: !disableOverlay && !!name,\n        renderTickBox: !disableOverlay && !!selectable\n      };\n\n      switch (status) {\n        case 'uploading':\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderBlanket: !disableOverlay || mediaType !== 'video',\n            isFixedBlanket: true,\n            renderProgressBar: true\n          });\n\n        case 'processing':\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            iconMessage: !didImageRender && !isZeroSize ? /*#__PURE__*/React.createElement(CreatingPreview, {\n              disableAnimation: disableAnimation\n            }) : undefined\n          });\n\n        case 'complete':\n          return defaultConfig;\n\n        case 'error':\n        case 'failed-processing':\n          var baseErrorConfig = _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderTypeIcon: true,\n            renderImageRenderer: false,\n            renderTitleBox: false,\n            renderPlayButton: false\n          });\n\n          var iconMessage;\n          var customTitleMessage;\n\n          var _ref5 = error || {},\n              secondaryError = _ref5.secondaryError;\n\n          if (isRateLimitedError(secondaryError) || isPollingError(secondaryError)) {\n            iconMessage = /*#__PURE__*/React.createElement(PreviewCurrentlyUnavailable, null);\n          } else if (isUploadError(error)) {\n            iconMessage = /*#__PURE__*/React.createElement(FailedToUpload, null);\n            customTitleMessage = messages.failed_to_upload;\n          } else if (!metadata) {\n            iconMessage = /*#__PURE__*/React.createElement(FailedToLoad, null);\n          } else {\n            iconMessage = /*#__PURE__*/React.createElement(PreviewUnavailable, null);\n          }\n\n          if (!disableOverlay) {\n            var renderFailedTitleBox = !name || !!customTitleMessage;\n            return _objectSpread(_objectSpread({}, baseErrorConfig), {}, {\n              renderTitleBox: !!name && !customTitleMessage,\n              renderFailedTitleBox: renderFailedTitleBox,\n              iconMessage: !renderFailedTitleBox ? iconMessage : undefined,\n              customTitleMessage: customTitleMessage\n            });\n          }\n\n          return _objectSpread(_objectSpread({}, baseErrorConfig), {}, {\n            iconMessage: iconMessage\n          });\n\n        case 'loading-preview':\n        case 'loading':\n        default:\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderPlayButton: false,\n            renderTypeIcon: false,\n            renderSpinner: !didImageRender\n          });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderNewExperienceCard\", function () {\n      var _this$getRenderConfig = _this.getRenderConfigByStatus(),\n          renderTypeIcon = _this$getRenderConfig.renderTypeIcon,\n          iconMessage = _this$getRenderConfig.iconMessage,\n          renderImageRenderer = _this$getRenderConfig.renderImageRenderer,\n          renderSpinner = _this$getRenderConfig.renderSpinner,\n          renderPlayButton = _this$getRenderConfig.renderPlayButton,\n          renderBlanket = _this$getRenderConfig.renderBlanket,\n          renderProgressBar = _this$getRenderConfig.renderProgressBar,\n          renderTitleBox = _this$getRenderConfig.renderTitleBox,\n          renderFailedTitleBox = _this$getRenderConfig.renderFailedTitleBox,\n          renderTickBox = _this$getRenderConfig.renderTickBox,\n          isFixedBlanket = _this$getRenderConfig.isFixedBlanket,\n          customTitleMessage = _this$getRenderConfig.customTitleMessage;\n\n      var _this$props5 = _this.props,\n          progress = _this$props5.progress,\n          selected = _this$props5.selected,\n          status = _this$props5.status,\n          metadata = _this$props5.metadata;\n\n      var _ref6 = metadata || {},\n          name = _ref6.name;\n\n      var hasTitleBox = !!renderTitleBox || !!renderFailedTitleBox;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CardImageContainer, {\n        className: \"media-file-card-view\",\n        \"data-testid\": \"media-file-card-view\",\n        \"data-test-media-name\": name,\n        \"data-test-status\": status,\n        \"data-test-progress\": progress,\n        \"data-test-selected\": selected ? true : undefined\n      }, renderTypeIcon && _this.renderMediaTypeIcon(hasTitleBox, iconMessage), renderSpinner && _this.renderSpinner(hasTitleBox), renderImageRenderer && _this.renderImageRenderer(), renderPlayButton && _this.renderPlayButton(hasTitleBox), renderBlanket && _this.renderBlanket(!!isFixedBlanket), renderTitleBox && _this.renderTitleBox(), renderFailedTitleBox && _this.renderFailedTitleBox(customTitleMessage), renderProgressBar && _this.renderProgressBar(!hasTitleBox), renderTickBox && _this.renderTickBox()), _this.renderActionsBar());\n    });\n\n    return _this;\n  }\n\n  _createClass(CardViewBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.saveElementWidth();\n      var innerRef = this.props.innerRef;\n      !!innerRef && !!this.divRef.current && innerRef(this.divRef.current);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref7) {\n      var prevCardPreview = _ref7.cardPreview;\n      var cardPreview = this.props.cardPreview; // We should only switch didImageRender to false\n      // when cardPreview goes undefined, not when it is updated.\n      // as this method could be triggered after onImageLoad callback,\n      // falling on a race condition\n\n      !!prevCardPreview && !cardPreview && this.setState({\n        didImageRender: false\n      });\n    }\n  }, {\n    key: \"width\",\n    get: // This width is only used to calculate breakpoints, dimensions are passed down as\n    // integrator pass it to the root component\n    function get() {\n      var elementWidth = this.state.elementWidth;\n\n      if (elementWidth) {\n        return elementWidth;\n      }\n\n      var _ref8 = this.props.dimensions || {\n        width: undefined\n      },\n          width = _ref8.width;\n\n      if (!width) {\n        return defaultImageCardDimensions.width;\n      }\n\n      return getCSSUnitValue(width);\n    }\n  }, {\n    key: \"breakpoint\",\n    get: function get() {\n      var width = this.state.elementWidth || (this.props.dimensions ? this.props.dimensions.width : '') || defaultImageCardDimensions.width;\n      return calcBreakpointSize(parseInt(\"\".concat(width), 10));\n    } // If the dimensions.width is a percentage, we need to transform it\n    // into a pixel value in order to get the right breakpoints applied.\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var featureFlags = this.props.featureFlags;\n\n      if (getMediaFeatureFlag('newCardExperience', featureFlags)) {\n        return this.renderFileNewExperience();\n      }\n\n      var _this$props6 = this.props,\n          dimensions = _this$props6.dimensions,\n          appearance = _this$props6.appearance,\n          onClick = _this$props6.onClick,\n          onMouseEnter = _this$props6.onMouseEnter,\n          testId = _this$props6.testId;\n      var wrapperDimensions = dimensions ? dimensions : getDefaultCardDimensions(appearance);\n      return /*#__PURE__*/React.createElement(Wrapper, {\n        \"data-testid\": testId || 'media-card-view',\n        shouldUsePointerCursor: true,\n        breakpointSize: breakpointSize(this.width),\n        dimensions: wrapperDimensions,\n        onClick: onClick,\n        onMouseEnter: onMouseEnter,\n        innerRef: this.divRef\n      }, this.renderFile());\n    }\n  }, {\n    key: \"renderSpinner\",\n    value: function renderSpinner(hasTitleBox) {\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, /*#__PURE__*/React.createElement(SpinnerIcon, null));\n    }\n  }, {\n    key: \"shouldRenderPlayButton\",\n    value: function shouldRenderPlayButton() {\n      var _this$props7 = this.props,\n          metadata = _this$props7.metadata,\n          cardPreview = _this$props7.cardPreview;\n\n      var _ref9 = metadata || {},\n          mediaType = _ref9.mediaType;\n\n      if (mediaType !== 'video' || !cardPreview) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"renderPlayButton\",\n    value: function renderPlayButton(hasTitleBox) {\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, /*#__PURE__*/React.createElement(PlayButton, null), \";\");\n    } //This Blanket will provide a shadow backround for uploading status by\n    //setting isFixed.\n\n  }, {\n    key: \"renderBlanket\",\n    value: function renderBlanket(isFixed) {\n      return /*#__PURE__*/React.createElement(Blanket, {\n        isFixed: isFixed\n      });\n    }\n  }, {\n    key: \"renderTitleBox\",\n    value: function renderTitleBox() {\n      var _this$props8 = this.props,\n          metadata = _this$props8.metadata,\n          titleBoxBgColor = _this$props8.titleBoxBgColor,\n          titleBoxIcon = _this$props8.titleBoxIcon;\n\n      var _ref10 = metadata || {},\n          name = _ref10.name,\n          createdAt = _ref10.createdAt;\n\n      return !!name && /*#__PURE__*/React.createElement(TitleBox, {\n        name: name,\n        createdAt: createdAt,\n        breakpoint: this.breakpoint,\n        titleBoxIcon: titleBoxIcon,\n        titleBoxBgColor: titleBoxBgColor\n      });\n    }\n  }, {\n    key: \"renderFailedTitleBox\",\n    value: function renderFailedTitleBox(customMessage) {\n      return /*#__PURE__*/React.createElement(FailedTitleBox, {\n        breakpoint: this.breakpoint,\n        customMessage: customMessage\n      });\n    }\n  }, {\n    key: \"renderProgressBar\",\n    value: function renderProgressBar(positionBottom) {\n      var progress = this.props.progress;\n      return /*#__PURE__*/React.createElement(ProgressBar, {\n        progress: progress,\n        breakpoint: this.breakpoint,\n        positionBottom: positionBottom\n      });\n    }\n  }, {\n    key: \"renderImageRenderer\",\n    value: function renderImageRenderer() {\n      var _this$props9 = this.props,\n          cardPreview = _this$props9.cardPreview,\n          _this$props9$metadata = _this$props9.metadata;\n      _this$props9$metadata = _this$props9$metadata === void 0 ? {} : _this$props9$metadata;\n      var _this$props9$metadata2 = _this$props9$metadata.mediaType,\n          mediaType = _this$props9$metadata2 === void 0 ? 'unknown' : _this$props9$metadata2,\n          alt = _this$props9.alt,\n          resizeMode = _this$props9.resizeMode,\n          onDisplayImage = _this$props9.onDisplayImage,\n          nativeLazyLoad = _this$props9.nativeLazyLoad,\n          forceSyncDisplay = _this$props9.forceSyncDisplay;\n      return !!cardPreview && /*#__PURE__*/React.createElement(ImageRenderer, {\n        cardPreview: cardPreview,\n        mediaType: mediaType,\n        alt: alt,\n        resizeMode: resizeMode,\n        onDisplayImage: onDisplayImage,\n        onImageLoad: this.onImageLoad,\n        onImageError: this.onImageError,\n        nativeLazyLoad: nativeLazyLoad,\n        forceSyncDisplay: forceSyncDisplay\n      });\n    }\n  }, {\n    key: \"renderTickBox\",\n    value: function renderTickBox() {\n      var selected = this.props.selected;\n      return /*#__PURE__*/React.createElement(TickBox, {\n        selected: selected\n      });\n    }\n  }, {\n    key: \"renderMediaTypeIcon\",\n    value: function renderMediaTypeIcon(hasTitleBox, iconMessage) {\n      var metadata = this.props.metadata;\n\n      var _ref11 = metadata || {},\n          mediaType = _ref11.mediaType,\n          mimeType = _ref11.mimeType,\n          name = _ref11.name;\n\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, /*#__PURE__*/React.createElement(MimeTypeIcon, {\n        testId: 'media-card-file-type-icon',\n        mediaType: mediaType,\n        mimeType: mimeType,\n        name: name\n      }), iconMessage);\n    }\n  }, {\n    key: \"renderActionsBar\",\n    value: function renderActionsBar() {\n      var _this$props10 = this.props,\n          disableOverlay = _this$props10.disableOverlay,\n          actions = _this$props10.actions,\n          metadata = _this$props10.metadata;\n      var actionsWithDetails = metadata && actions ? attachDetailsToActions(actions, metadata) : [];\n\n      if (disableOverlay || !actions || actions.length === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(ActionsBar, {\n        actions: actionsWithDetails\n      });\n    }\n  }]);\n\n  return CardViewBase;\n}(React.Component);\n\n_defineProperty(CardViewBase, \"defaultProps\", {\n  appearance: 'auto'\n});\n\nexport var CardView = withAnalyticsEvents({\n  onClick: createAndFireMediaCardEvent({\n    eventType: 'ui',\n    action: 'clicked',\n    actionSubject: 'mediaCard',\n    attributes: {}\n  })\n})(CardViewBase);","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useEffect, forwardRef } from 'react';\n/**\n * As IntersectionObserver::rootMargin doesn't work within IFrames, we use an empty div + dynamic offsetTop to eagerly detect cards entering viewport.\n * Using this approach, we can lazy load cards ABS_VIEWPORT_ANCHOR_OFFSET_TOP px before they enter viewport.\n */\n\nexport var ABS_VIEWPORT_ANCHOR_OFFSET_TOP = 900; //px\n\nexport var ViewportAnchor = /*#__PURE__*/forwardRef(function (props, ref) {\n  if (typeof IntersectionObserver === 'undefined') {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: \"media-card-viewport-anchor\",\n    style: {\n      position: 'absolute',\n      top: \"\".concat(props.offsetTop, \"px\"),\n      maxHeight: 0,\n      pointerEvents: 'none'\n    }\n  });\n});\n\nvar createIntersectionObserverCallback = function createIntersectionObserverCallback(onVisible) {\n  return function (entries, observer) {\n    var _iterator = _createForOfIteratorHelper(entries),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          onVisible();\n          observer.disconnect();\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n};\n\nvar ViewportObserver = function ViewportObserver(_ref) {\n  var onVisible = _ref.onVisible,\n      cardEl = _ref.cardEl,\n      children = _ref.children,\n      preAnchorRef = _ref.preAnchorRef,\n      postAnchorRef = _ref.postAnchorRef;\n  useEffect(function () {\n    // IntersectionObserver uses root and target elements to detect intersections, defaulting root to the viewport\n    var intersectionObserver = new IntersectionObserver(createIntersectionObserverCallback(onVisible));\n    (preAnchorRef === null || preAnchorRef === void 0 ? void 0 : preAnchorRef.current) && intersectionObserver.observe(preAnchorRef.current);\n    (postAnchorRef === null || postAnchorRef === void 0 ? void 0 : postAnchorRef.current) && intersectionObserver.observe(postAnchorRef.current);\n    cardEl && intersectionObserver.observe(cardEl);\n    return function () {\n      intersectionObserver.disconnect();\n    };\n  }, [cardEl, preAnchorRef, postAnchorRef, onVisible]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\n\nexport var ViewportDetector = function ViewportDetector(_ref2) {\n  var cardEl = _ref2.cardEl,\n      preAnchorRef = _ref2.preAnchorRef,\n      postAnchorRef = _ref2.postAnchorRef,\n      onVisible = _ref2.onVisible,\n      children = _ref2.children;\n\n  if (typeof IntersectionObserver === 'undefined') {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n  }\n\n  return /*#__PURE__*/React.createElement(ViewportObserver, {\n    cardEl: cardEl,\n    preAnchorRef: preAnchorRef,\n    postAnchorRef: postAnchorRef,\n    onVisible: onVisible\n  }, children);\n};","export var containsPixelUnit = function containsPixelUnit(value) {\n  return value.substr(-2) === 'px' && !isNaN(+value.slice(0, -2));\n};","import { isRetina } from './isRetina';\nimport { getElementDimension } from './getElementDimension';\nimport { defaultImageCardDimensions } from './cardDimensions';\nimport { isValidPercentageUnit } from './isValidPercentageUnit';\nimport { containsPixelUnit } from './containsPixelUnit';\nexport var getDataURIDimension = function getDataURIDimension(dimension, options) {\n  var retinaFactor = isRetina() ? 2 : 1;\n  var dimensionValue = options.dimensions && options.dimensions[dimension] || '';\n\n  if (isValidPercentageUnit(dimensionValue) && options.element) {\n    return getElementDimension(options.element, dimension) * retinaFactor;\n  }\n\n  if (typeof dimensionValue === 'number') {\n    return dimensionValue * retinaFactor;\n  }\n\n  if (containsPixelUnit(\"\".concat(dimensionValue))) {\n    return parseInt(\"\".concat(dimensionValue), 10) * retinaFactor;\n  }\n\n  return defaultImageCardDimensions[dimension] * retinaFactor;\n};\nexport var getRequestedDimensions = function getRequestedDimensions(options) {\n  var width = getDataURIDimension('width', options);\n  var height = getDataURIDimension('height', options);\n  return {\n    width: width,\n    height: height\n  };\n};","export function isRetina() {\n  var mediaQuery = '(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)';\n  return window.devicePixelRatio > 1 || window.matchMedia && window.matchMedia(mediaQuery).matches;\n}","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { LRUCache } from 'lru-fast';\nimport { EventEmitter2 } from 'eventemitter2';\nexport var PREVIEW_CACHE_LRU_SIZE = 50;\n\nvar ExtendedLRUCache = /*#__PURE__*/function (_LRUCache) {\n  _inherits(ExtendedLRUCache, _LRUCache);\n\n  var _super = _createSuper(ExtendedLRUCache);\n\n  function ExtendedLRUCache(limit) {\n    var _this;\n\n    _classCallCheck(this, ExtendedLRUCache);\n\n    _this = _super.call(this, limit);\n    _this.eventEmitter = new EventEmitter2();\n    return _this;\n  }\n\n  _createClass(ExtendedLRUCache, [{\n    key: \"shift\",\n    value: function shift() {\n      var entry = _get(_getPrototypeOf(ExtendedLRUCache.prototype), \"shift\", this).call(this);\n\n      this.eventEmitter.emit('shift', entry);\n      return entry;\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      this.eventEmitter.on(event, callback);\n    }\n  }]);\n\n  return ExtendedLRUCache;\n}(LRUCache);\n\nexport var ObjectURLCache = /*#__PURE__*/function () {\n  function ObjectURLCache(size) {\n    _classCallCheck(this, ObjectURLCache);\n\n    this.cache = new ExtendedLRUCache(size);\n    this.cache.on('shift', function (entry) {\n      if (entry && entry.value.dataURI) {\n        URL.revokeObjectURL(entry.value.dataURI);\n      }\n    });\n  }\n\n  _createClass(ObjectURLCache, [{\n    key: \"has\",\n    value: function has(key) {\n      return !!this.cache.find(key);\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return this.cache.get(key);\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      this.cache.set(key, value);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var removed = this.cache.remove(key);\n      removed && URL.revokeObjectURL(removed.dataURI);\n    }\n  }]);\n\n  return ObjectURLCache;\n}();\nexport var createObjectURLCache = function createObjectURLCache() {\n  return new ObjectURLCache(PREVIEW_CACHE_LRU_SIZE);\n};","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { createObjectURLCache } from '../../../utils/objectURLCache';\n// Dimensions are used to create a key.\n// Cache is invalidated when different dimensions are provided.\nexport var getCacheKey = function getCacheKey(id, dimensions) {\n  return [id, dimensions.height, dimensions.width].join('-');\n};\nexport var CardPreviewCacheImpl = /*#__PURE__*/_createClass(function CardPreviewCacheImpl(previewCache) {\n  var _this = this;\n\n  _classCallCheck(this, CardPreviewCacheImpl);\n\n  _defineProperty(this, \"get\", function (id, dimensions) {\n    var cacheKey = getCacheKey(id, dimensions);\n    return _this.previewCache.get(cacheKey);\n  });\n\n  _defineProperty(this, \"set\", function (id, dimensions, cardPreview) {\n    var cacheKey = getCacheKey(id, dimensions);\n\n    _this.previewCache.set(cacheKey, cardPreview);\n  });\n\n  _defineProperty(this, \"remove\", function (id, dimensions) {\n    var cacheKey = getCacheKey(id, dimensions);\n\n    _this.previewCache.remove(cacheKey);\n  });\n\n  this.previewCache = previewCache;\n});\nexport default new CardPreviewCacheImpl(createObjectURLCache());","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport VideoSnapshot from 'video-snapshot';\nexport var takeSnapshot = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(blob) {\n    var snapshooter, dataUri;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            snapshooter = new VideoSnapshot(blob);\n            _context.next = 3;\n            return snapshooter.takeSnapshot();\n\n          case 3:\n            dataUri = _context.sent;\n            snapshooter.end();\n            return _context.abrupt(\"return\", dataUri);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function takeSnapshot(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { takeSnapshot } from '../../../utils/videoSnapshot';\nimport { getMediaTypeFromMimeType } from '@atlaskit/media-common';\nimport { getOrientation } from '@atlaskit/media-ui';\nimport { LocalPreviewError, RemotePreviewError } from '../../../errors';\n\n/**\n * This method tells the support for the media\n * types covered in getCardPreviewFromFilePreview\n */\nexport var isSupportedLocalPreview = function isSupportedLocalPreview(mediaType) {\n  return mediaType === 'image' || mediaType === 'video';\n};\n\nvar getImageLocalPreview = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n    var orientation, dataURI;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return getOrientation(value);\n\n          case 3:\n            orientation = _context.sent;\n            dataURI = URL.createObjectURL(value);\n            return _context.abrupt(\"return\", {\n              dataURI: dataURI,\n              orientation: orientation,\n              source: 'local'\n            });\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-image', _context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n\n  return function getImageLocalPreview(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getVideoLocalPreview = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value) {\n    var dataURI;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return takeSnapshot(value);\n\n          case 3:\n            dataURI = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              dataURI: dataURI,\n              orientation: 1,\n              source: 'local'\n            });\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-video', _context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n\n  return function getVideoLocalPreview(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport var getCardPreviewFromFilePreview = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(filePreview) {\n    var value, resolvedFilePreview, _value, type, mediaType;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return filePreview;\n\n          case 3:\n            resolvedFilePreview = _context3.sent;\n            value = resolvedFilePreview.value;\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-rejected', _context3.t0);\n\n          case 10:\n            if (!(typeof value === 'string')) {\n              _context3.next = 14;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", {\n              dataURI: value,\n              orientation: 1,\n              source: 'local'\n            });\n\n          case 14:\n            if (!(value instanceof Blob)) {\n              _context3.next = 22;\n              break;\n            }\n\n            _value = value, type = _value.type;\n            mediaType = getMediaTypeFromMimeType(type);\n            _context3.t1 = mediaType;\n            _context3.next = _context3.t1 === 'image' ? 20 : _context3.t1 === 'video' ? 21 : 22;\n            break;\n\n          case 20:\n            return _context3.abrupt(\"return\", getImageLocalPreview(value));\n\n          case 21:\n            return _context3.abrupt(\"return\", getVideoLocalPreview(value));\n\n          case 22:\n            throw new LocalPreviewError('local-preview-unsupported');\n\n          case 23:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n\n  return function getCardPreviewFromFilePreview(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getCardPreviewFromBackend = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(mediaClient, id, params) {\n    var blob;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return mediaClient.getImage(id, params);\n\n          case 3:\n            blob = _context4.sent;\n            return _context4.abrupt(\"return\", {\n              dataURI: URL.createObjectURL(blob),\n              orientation: 1,\n              source: 'remote'\n            });\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            throw new RemotePreviewError('remote-preview-fetch', _context4.t0);\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n\n  return function getCardPreviewFromBackend(_x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();","import { isValidPercentageUnit } from './isValidPercentageUnit';\nimport { containsPixelUnit } from './containsPixelUnit';\n\nvar isPixelEquivalent = function isPixelEquivalent(dimension) {\n  return typeof dimension === 'number' || containsPixelUnit(\"\".concat(dimension));\n};\n\nexport var canCompareDimension = function canCompareDimension(current, next) {\n  if (!current || !next) {\n    return false;\n  }\n\n  var bothPixelEquivalent = isPixelEquivalent(current) && isPixelEquivalent(next);\n  var bothPercentage = isValidPercentageUnit(current) && isValidPercentageUnit(next);\n  return bothPixelEquivalent || bothPercentage;\n};\nexport var isBigger = function isBigger(current, next) {\n  if (!!current && !!next && canCompareDimension(current.width, next.width) && canCompareDimension(current.height, next.height)) {\n    var nextIsHigher = parseInt(\"\".concat(current.width), 10) < parseInt(\"\".concat(next.width), 10);\n    var nextIsWider = parseInt(\"\".concat(current.height), 10) < parseInt(\"\".concat(next.height), 10);\n    return nextIsHigher || nextIsWider;\n  } else {\n    return false;\n  }\n};","import { isMimeTypeSupportedByBrowser } from '@atlaskit/media-common';\nimport { isPreviewableFileState, isPreviewableType, isImageRepresentationReady } from '@atlaskit/media-client';\nimport { isSupportedLocalPreview } from './helpers'; // TODO: align these checks with helpers from Media Client\n// https://product-fabric.atlassian.net/browse/BMPT-1300\n\nexport var extractFilePreviewStatus = function extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags) {\n  var hasFilesize = 'size' in fileState && !!fileState.size;\n\n  var _ref = 'mediaType' in fileState && fileState || {},\n      mediaType = _ref.mediaType;\n\n  var _ref2 = 'mimeType' in fileState && fileState || {},\n      mimeType = _ref2.mimeType;\n\n  var isPreviewable = !!mediaType && isPreviewableType(mediaType, featureFlags); // Local preview is available only if it's supported by browser and supported by Media Card (isSupportedLocalPreview)\n  // For example, SVGs are mime type NOT supported by browser but media type supported by Media Card (image)\n  // Then, local Preview NOT available\n\n  var hasLocalPreview = !isBannedLocalPreview && isPreviewableFileState(fileState) && isSupportedLocalPreview(mediaType) && !!mimeType && isMimeTypeSupportedByBrowser(mimeType);\n  var hasRemotePreview = isImageRepresentationReady(fileState);\n  var hasPreview = hasLocalPreview || hasRemotePreview;\n  var isSupportedByBrowser = !!mimeType && isMimeTypeSupportedByBrowser(mimeType);\n  return {\n    hasFilesize: hasFilesize,\n    isPreviewable: isPreviewable,\n    hasPreview: hasPreview,\n    isSupportedByBrowser: isSupportedByBrowser\n  };\n};\nexport var isPreviewableStatus = function isPreviewableStatus(cardStatus, _ref3) {\n  var isPreviewable = _ref3.isPreviewable,\n      hasPreview = _ref3.hasPreview,\n      isSupportedByBrowser = _ref3.isSupportedByBrowser;\n  return hasPreview && isPreviewable && (cardStatus === 'complete' || cardStatus === 'loading-preview' || cardStatus === 'uploading' || // For Video, we can have local or remote preview while processing.\n  // Then, we only want to show the thumbnail if the file is supported by the browser,\n  // this way we prevent playing unsupported videos that are not procesed\n  cardStatus === 'processing' && isSupportedByBrowser);\n};","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { isPreviewableFileState, addFileAttrsToUrl } from '@atlaskit/media-client';\nimport { isMimeTypeSupportedByBrowser } from '@atlaskit/media-common';\nimport cardPreviewCache from './cache';\nimport { getCardPreviewFromFilePreview, getCardPreviewFromBackend } from './helpers';\nimport { MediaCardError, SsrPreviewError, isUnsupportedLocalPreviewError } from '../../../errors';\nimport { isBigger } from '../../../utils/dimensionComparer';\nimport { extractFilePreviewStatus, isPreviewableStatus } from './filePreviewStatus';\nexport { getCardPreviewFromFilePreview, getCardPreviewFromBackend, isSupportedLocalPreview } from './helpers';\nexport { extractFilePreviewStatus } from './filePreviewStatus';\nexport var getCardPreviewFromCache = cardPreviewCache.get;\nexport var removeCardPreviewFromCache = cardPreviewCache.remove;\n/**\n * Will return the preview if available and supported by the browser\n * See extractFilePreviewStatus \"hasLocalPreview\" logic\n */\n\nexport var getFilePreviewFromFileState = function getFilePreviewFromFileState(fileState) {\n  return 'mimeType' in fileState && isMimeTypeSupportedByBrowser(fileState.mimeType) && isPreviewableFileState(fileState) ? fileState.preview : undefined;\n};\n\nvar extendAndCachePreview = function extendAndCachePreview(id, dimensions, preview, mediaBlobUrlAttrs) {\n  var source;\n\n  switch (preview.source) {\n    case 'local':\n      source = 'cache-local';\n      break;\n\n    case 'remote':\n      source = 'cache-remote';\n      break;\n\n    case 'ssr-server':\n      source = 'cache-ssr-server';\n      break;\n\n    case 'ssr-client':\n      source = 'cache-ssr-client';\n      break;\n\n    default:\n      source = preview.source;\n  } // We want to embed some meta context into dataURI for Copy/Paste to work.\n\n\n  var dataURI = mediaBlobUrlAttrs ? addFileAttrsToUrl(preview.dataURI, mediaBlobUrlAttrs) : preview.dataURI; // We store new cardPreview into cache\n\n  cardPreviewCache.set(id, dimensions, _objectSpread(_objectSpread({}, preview), {}, {\n    source: source,\n    dataURI: dataURI\n  }));\n  return _objectSpread(_objectSpread({}, preview), {}, {\n    dataURI: dataURI\n  });\n};\n/**\n * This function will try to return a Card preview, either from cache, local preview or remote preview.\n * It should only be called if there is a chance to get either a remote or a local preview, or both.\n * This, in order to ensure there is always going to be a valid return value OR throw an error if the process fails.\n * It is worth noting that local preview failures break the process if there is no remote preview available.\n * In that case we throw an error immediately.\n * Otherwise, if the local preview fails but there is a remote preview available, the failure does not break the process.\n * In that case, we still want to report the local preview error to the caller, for feature realiability track.\n * hence the use of the optional callback onLocalPreviewError\n */\n\n\nexport var getCardPreview = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var mediaClient, id, _ref$dimensions, dimensions, filePreview, onLocalPreviewError, isRemotePreviewReady, imageUrlParams, mediaBlobUrlAttrs, cachedPreview, localPreview;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            mediaClient = _ref.mediaClient, id = _ref.id, _ref$dimensions = _ref.dimensions, dimensions = _ref$dimensions === void 0 ? {} : _ref$dimensions, filePreview = _ref.filePreview, onLocalPreviewError = _ref.onLocalPreviewError, isRemotePreviewReady = _ref.isRemotePreviewReady, imageUrlParams = _ref.imageUrlParams, mediaBlobUrlAttrs = _ref.mediaBlobUrlAttrs;\n            cachedPreview = cardPreviewCache.get(id, dimensions);\n\n            if (!cachedPreview) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", cachedPreview);\n\n          case 4:\n            _context.prev = 4;\n\n            if (!filePreview) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 8;\n            return getCardPreviewFromFilePreview(filePreview);\n\n          case 8:\n            localPreview = _context.sent;\n            return _context.abrupt(\"return\", extendAndCachePreview(id, dimensions, localPreview, mediaBlobUrlAttrs));\n\n          case 10:\n            _context.next = 17;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](4);\n\n            /**\n             * We report the error if:\n             * - local preview is supported and fails\n             * - local preview is unsupported and remote preview is NOT READY\n             *   i.e. the function was called for \"no reason\".\n             * We DON'T report the error if:\n             * - local preview is unsupported and remote preview IS READY\n             *   i.e. local preview is available and not supported,\n             *   but we are after the remote preview instead.\n             */\n            if (!isUnsupportedLocalPreviewError(_context.t0) || isUnsupportedLocalPreviewError(_context.t0) && !isRemotePreviewReady) {\n              onLocalPreviewError && onLocalPreviewError(_context.t0);\n            }\n            /**\n             * No matter the reason why the local preview failed, we break the process\n             * if there is no remote preview available\n             */\n\n\n            if (isRemotePreviewReady) {\n              _context.next = 17;\n              break;\n            }\n\n            throw _context.t0;\n\n          case 17:\n            if (isRemotePreviewReady) {\n              _context.next = 19;\n              break;\n            }\n\n            throw new MediaCardError('remote-preview-not-ready');\n\n          case 19:\n            return _context.abrupt(\"return\", fetchAndCacheRemotePreview(mediaClient, id, dimensions, imageUrlParams, mediaBlobUrlAttrs));\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 12]]);\n  }));\n\n  return function getCardPreview(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var shouldResolvePreview = function shouldResolvePreview(_ref3) {\n  var status = _ref3.status,\n      fileState = _ref3.fileState,\n      dimensions = _ref3.dimensions,\n      prevDimensions = _ref3.prevDimensions,\n      hasCardPreview = _ref3.hasCardPreview,\n      isBannedLocalPreview = _ref3.isBannedLocalPreview,\n      featureFlags = _ref3.featureFlags;\n  var statusIsPreviewable = isPreviewableStatus(status, extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags));\n  var dimensionsAreBigger = isBigger(prevDimensions, dimensions);\n  return statusIsPreviewable && (!hasCardPreview || dimensionsAreBigger);\n};\nexport var getSSRCardPreview = function getSSRCardPreview(ssr, mediaClient, id, params, mediaBlobUrlAttrs) {\n  var dataURI;\n\n  try {\n    var rawDataURI = mediaClient.getImageUrlSync(id, params); // We want to embed some meta context into dataURI for Copy/Paste to work.\n\n    dataURI = mediaBlobUrlAttrs ? addFileAttrsToUrl(rawDataURI, mediaBlobUrlAttrs) : rawDataURI;\n    var source = ssr === 'client' ? 'ssr-client' : 'ssr-server';\n    return {\n      dataURI: dataURI,\n      source: source,\n      orientation: 1\n    };\n  } catch (e) {\n    var reason = ssr === 'server' ? 'ssr-server-uri' : 'ssr-client-uri';\n    throw new SsrPreviewError(reason, e);\n  }\n};\nexport var isLocalPreview = function isLocalPreview(preview) {\n  var localSources = ['local', 'cache-local'];\n  return localSources.includes(preview.source);\n};\nexport var isSSRPreview = function isSSRPreview(preview) {\n  return isSSRClientPreview(preview) || isSSRServerPreview(preview);\n};\nexport var isSSRServerPreview = function isSSRServerPreview(preview) {\n  var ssrClientSources = ['ssr-server', 'cache-ssr-server'];\n  return ssrClientSources.includes(preview.source);\n};\nexport var isSSRClientPreview = function isSSRClientPreview(preview) {\n  var ssrClientSources = ['ssr-client', 'cache-ssr-client'];\n  return ssrClientSources.includes(preview.source);\n};\nexport var isSSRDataPreview = function isSSRDataPreview(preview) {\n  return preview.source === 'ssr-data';\n};\nexport var fetchAndCacheRemotePreview = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(mediaClient, id, dimensions, params, mediaBlobUrlAttrs) {\n    var remotePreview;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return getCardPreviewFromBackend(mediaClient, id, params);\n\n          case 2:\n            remotePreview = _context2.sent;\n            return _context2.abrupt(\"return\", extendAndCachePreview(id, dimensions, remotePreview, mediaBlobUrlAttrs));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fetchAndCacheRemotePreview(_x2, _x3, _x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();","import { isErrorFileState, isFileIdentifier } from '@atlaskit/media-client';\n\nvar getProcessingStatusFromFileState = function getProcessingStatusFromFileState(status) {\n  switch (status) {\n    case 'processed':\n      return 'succeeded';\n\n    case 'processing':\n      return 'running';\n\n    case 'failed-processing':\n      return 'failed';\n  }\n};\n\nvar getFileDetailsFromFileState = function getFileDetailsFromFileState(state) {\n  return {\n    id: state.id,\n    name: state.name,\n    size: state.size,\n    mimeType: state.mimeType,\n    createdAt: state.createdAt,\n    mediaType: state.mediaType,\n    processingStatus: getProcessingStatusFromFileState(state.status)\n  };\n};\n\nexport var getFileDetails = function getFileDetails(identifier, fileState) {\n  return isFileIdentifier(identifier) ? fileState && !isErrorFileState(fileState) ? getFileDetailsFromFileState(fileState) : {\n    id: identifier.id\n  } : {\n    id: identifier.mediaItemType,\n    name: identifier.name || identifier.dataURI,\n    mediaType: 'image'\n  };\n};","import { fireMediaCardEvent, getRenderSucceededEventPayload, getRenderErrorEventPayload, getRenderFailedFileStatusPayload, getCopiedFilePayload, getRenderCommencedEventPayload, getRenderPreviewableCardPayload } from '../../utils/analytics';\nexport var fireOperationalEvent = function fireOperationalEvent(createAnalyticsEvent, status, fileAttributes, performanceAttributes, ssrReliability, error) {\n  var fireEvent = function fireEvent(payload) {\n    return fireMediaCardEvent(payload, createAnalyticsEvent);\n  };\n\n  switch (status) {\n    case 'complete':\n      fireEvent(getRenderSucceededEventPayload(fileAttributes, performanceAttributes, ssrReliability));\n      break;\n\n    case 'failed-processing':\n      fireEvent(getRenderFailedFileStatusPayload(fileAttributes, performanceAttributes, ssrReliability));\n      break;\n\n    case 'error':\n      error && fireEvent(getRenderErrorEventPayload(fileAttributes, performanceAttributes, error, ssrReliability));\n      break;\n  }\n};\nexport var fireCommencedEvent = function fireCommencedEvent(createAnalyticsEvent, fileAttributes, performanceAttributes) {\n  fireMediaCardEvent(getRenderCommencedEventPayload(fileAttributes, performanceAttributes), createAnalyticsEvent);\n};\nexport var fireCopiedEvent = function fireCopiedEvent(createAnalyticsEvent, fileId, cardRef) {\n  if (typeof window.getSelection === 'function') {\n    var _selection$containsNo;\n\n    var selection = window.getSelection();\n\n    if (selection !== null && selection !== void 0 && (_selection$containsNo = selection.containsNode) !== null && _selection$containsNo !== void 0 && _selection$containsNo.call(selection, cardRef, true)) {\n      fireMediaCardEvent(getCopiedFilePayload(fileId), createAnalyticsEvent);\n    }\n  }\n};\nexport var fireScreenEvent = function fireScreenEvent(createAnalyticsEvent, fileAttributes) {\n  fireMediaCardEvent(getRenderPreviewableCardPayload(fileAttributes), createAnalyticsEvent);\n};","export default (function () {\n  return document;\n});","import _typeof from \"@babel/runtime/helpers/typeof\";\n\nvar printParam = function printParam(param) {\n  if (typeof param === 'string') {\n    return \"'\".concat(param, \"'\");\n  } else if (_typeof(param) === 'object') {\n    return JSON.stringify(param);\n  } else if (param === undefined) {\n    return 'undefined';\n  }\n\n  return param;\n};\n\nvar printParams = function printParams(args) {\n  return args.map(function (arg) {\n    return printParam(arg);\n  }).join(',');\n};\n\nexport var printFunctionCall = function printFunctionCall(fn) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return \"(\".concat(fn.toString(), \")(\").concat(printParams(args), \");\");\n};\nexport var printScript = function printScript(statements) {\n  return \"(function(){\\n  \".concat(statements.join(';'), \"\\n})();\\n\");\n};","import React from 'react';\nimport { printFunctionCall, printScript } from '../printScript';\n// ----- WARNING -----\n// This is a very sensitive fraction of code.\n// Any changes to this file must be tested directly in product before merging.\n// The scripts printed here might differ from what we observe in our internal tests\n// due to minimification, for example.\nexport var GLOBAL_MEDIA_CARD_SSR = 'mediaCardSsr';\nexport var GLOBAL_MEDIA_NAMESPACE = '__MEDIA_INTERNAL';\nexport function getMediaGlobalScope() {\n  var globalScope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  // Must match GLOBAL_MEDIA_NAMESPACE. Can't reference the constant from here.\n  var namespace = '__MEDIA_INTERNAL';\n\n  if (!globalScope[namespace]) {\n    globalScope[namespace] = {};\n  }\n\n  return globalScope[namespace];\n}\nexport function getMediaCardSSR() {\n  var globalScope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n  var globalMedia = getMediaGlobalScope(globalScope); // Must match GLOBAL_MEDIA_CARD_SSR. Can't reference the constant from here.\n\n  var key = 'mediaCardSsr';\n\n  if (!globalMedia[key]) {\n    globalMedia[key] = {};\n  }\n\n  return globalMedia[key];\n}\n\nvar dashed = function dashed(param) {\n  return param ? \"-\".concat(param) : '';\n};\n\nexport var getKey = function getKey(_ref) {\n  var id = _ref.id,\n      collectionName = _ref.collectionName,\n      occurrenceKey = _ref.occurrenceKey;\n  return \"\".concat(id).concat(dashed(collectionName)).concat(dashed(occurrenceKey));\n};\nexport var storeDataURI = function storeDataURI(key, dataURI, dimensions, error) {\n  var globalScope = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : window;\n  var mediaCardSsr = getMediaCardSSR(globalScope);\n  mediaCardSsr[key] = {\n    dataURI: dataURI,\n    dimensions: dimensions,\n    error: error\n  };\n};\n\nvar generateScript = function generateScript(identifier, dataURI, dimensions, error) {\n  var functionCall = printFunctionCall(storeDataURI, getKey(identifier), dataURI, dimensions, error);\n  return printScript([getMediaCardSSR.toString(), getMediaGlobalScope.toString(), functionCall]);\n};\n\nexport var StoreSSRDataScript = function StoreSSRDataScript(_ref2) {\n  var dataURI = _ref2.dataURI,\n      identifier = _ref2.identifier,\n      dimensions = _ref2.dimensions,\n      error = _ref2.error;\n  return /*#__PURE__*/React.createElement(\"script\", {\n    dangerouslySetInnerHTML: {\n      __html: generateScript(identifier, dataURI, dimensions, error)\n    }\n  });\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { isErrorFileState } from '@atlaskit/media-client';\nimport { MediaCardError } from '../../errors';\nimport { getCardStatus, isFinalCardStatus } from './getCardStatus';\nimport { extractFilePreviewStatus } from './getCardPreview';\nexport var createStateUpdater = function createStateUpdater(newState) {\n  return function (prevState) {\n    // Only override if previous status is non-final\n    // or new status is 'complete'\n    if (isFinalCardStatus(prevState.status) && newState.status !== 'complete') {\n      return prevState;\n    }\n\n    return _objectSpread(_objectSpread({}, prevState), newState);\n  };\n};\nexport var getCardStateFromFileState = function getCardStateFromFileState(fileState, isBannedLocalPreview, featureFlags) {\n  var status = getCardStatus(fileState.status, extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags));\n  var error = status === 'error' && isErrorFileState(fileState) ? new MediaCardError('error-file-state', new Error(fileState.message)) : undefined;\n  var progress = status === 'uploading' && fileState.status === 'uploading' ? fileState.progress : 1;\n  return {\n    fileState: fileState,\n    status: status,\n    progress: progress,\n    error: error\n  };\n};","export var MediaCardCursor;\n\n(function (MediaCardCursor) {\n  MediaCardCursor[\"Action\"] = \"pointer\";\n  MediaCardCursor[\"NotReady\"] = \"wait\";\n})(MediaCardCursor || (MediaCardCursor = {}));","import { MediaCardCursor } from '../types';\n\n/**\n * When the returned value is undefined, we'd expect the media card to take the parent's cursor style.\n */\nexport var getMediaCardCursor = function getMediaCardCursor(useInlinePlayer, useMediaViewer, isErrorStatus, hasCardPreview, mediaType) {\n  // If error status or no action is requested = NoAction\n  if (isErrorStatus || !useInlinePlayer && !useMediaViewer) {\n    return;\n  }\n\n  if (!mediaType && (useInlinePlayer || useInlinePlayer && useMediaViewer)) {\n    return MediaCardCursor.NotReady;\n  } else if (mediaType === 'video' && hasCardPreview && useInlinePlayer) {\n    return MediaCardCursor.Action;\n  }\n\n  if (useMediaViewer) {\n    return MediaCardCursor.Action;\n  }\n\n  return;\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { ConcurrentExperience, ExperiencePerformanceTypes, ExperienceTypes } from '@atlaskit/ufo';\nimport { name as packageName, version as packageVersion } from '../version.json';\nimport { extractErrorInfo, getRenderErrorRequestMetadata, LOGGED_FEATURE_FLAG_KEYS } from './analytics';\nimport { getMediaEnvironment, getMediaRegion } from '@atlaskit/media-client';\nvar concurrentExperience;\n\nvar getExperience = function getExperience(id) {\n  if (!concurrentExperience) {\n    var inlineExperience = {\n      platform: {\n        component: 'media-card'\n      },\n      type: ExperienceTypes.Experience,\n      performanceType: ExperiencePerformanceTypes.InlineResult,\n      featureFlags: LOGGED_FEATURE_FLAG_KEYS\n    };\n    concurrentExperience = new ConcurrentExperience('media-card-render', inlineExperience);\n  }\n\n  return concurrentExperience.getInstance(id);\n};\n\nexport var startUfoExperience = function startUfoExperience(id) {\n  getExperience(id).start();\n};\nexport var completeUfoExperience = function completeUfoExperience(id, status, fileAttributes, fileStateFlags, ssrReliability, error) {\n  switch (status) {\n    case 'complete':\n      succeedUfoExperience(id, {\n        fileAttributes: fileAttributes,\n        ssrReliability: ssrReliability,\n        fileStateFlags: fileStateFlags\n      });\n      break;\n\n    case 'failed-processing':\n      failUfoExperience(id, {\n        fileAttributes: fileAttributes,\n        failReason: 'failed-processing',\n        ssrReliability: ssrReliability,\n        fileStateFlags: fileStateFlags\n      });\n      break;\n\n    case 'error':\n      error && failUfoExperience(id, _objectSpread(_objectSpread({\n        fileAttributes: fileAttributes\n      }, extractErrorInfo(error)), {}, {\n        request: getRenderErrorRequestMetadata(error),\n        ssrReliability: ssrReliability,\n        fileStateFlags: fileStateFlags\n      }));\n      break;\n  }\n};\n\nvar succeedUfoExperience = function succeedUfoExperience(id, properties) {\n  getExperience(id).success({\n    metadata: _objectSpread(_objectSpread({}, properties), {}, {\n      packageName: packageName,\n      packageVersion: packageVersion,\n      mediaEnvironment: getMediaEnvironment(),\n      mediaRegion: getMediaRegion()\n    })\n  });\n};\n\nvar failUfoExperience = function failUfoExperience(id, properties) {\n  getExperience(id).failure({\n    metadata: _objectSpread(_objectSpread({}, properties), {}, {\n      packageName: packageName,\n      packageVersion: packageVersion,\n      mediaEnvironment: getMediaEnvironment(),\n      mediaRegion: getMediaRegion()\n    })\n  });\n};","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, createRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport { version as packageVersion, name as packageName } from '../../version.json';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { withMediaAnalyticsContext } from '@atlaskit/media-common';\nimport DownloadIcon from '@atlaskit/icon/glyph/download';\nimport { globalMediaEventEmitter, isDifferentIdentifier, isFileIdentifier, RECENTS_COLLECTION, isImageRepresentationReady, isExternalImageIdentifier, isProcessedFileState, imageResizeModeToFileImageMode } from '@atlaskit/media-client';\nimport { MediaViewer } from '@atlaskit/media-viewer';\nimport { injectIntl, IntlProvider } from 'react-intl-next';\nimport { CardView } from '../cardView';\nimport { ABS_VIEWPORT_ANCHOR_OFFSET_TOP, ViewportDetector, ViewportAnchor } from '../../utils/viewportDetector';\nimport { getRequestedDimensions } from '../../utils/getDataURIDimension';\nimport { getCardPreview, getCardPreviewFromCache, removeCardPreviewFromCache, getFilePreviewFromFileState, shouldResolvePreview, getSSRCardPreview, isLocalPreview, isSSRPreview, isSSRClientPreview, isSSRDataPreview, fetchAndCacheRemotePreview } from './getCardPreview';\nimport { getFileDetails } from '../../utils/metadata';\nimport { InlinePlayer } from '../inlinePlayer';\nimport { getFileAttributes, extractErrorInfo, LOGGED_FEATURE_FLAGS } from '../../utils/analytics';\nimport { isLocalPreviewError, MediaCardError, ensureMediaCardError, ImageLoadError } from '../../errors';\nimport { fireOperationalEvent as _fireOperationalEvent, fireCommencedEvent as _fireCommencedEvent, fireCopiedEvent, fireScreenEvent } from './cardAnalytics';\nimport getDocument from '../../utils/document';\nimport { StoreSSRDataScript, getSSRData } from '../../utils/globalScope';\nimport { getCardStateFromFileState, createStateUpdater } from './cardState';\nimport { getMediaFeatureFlag } from '@atlaskit/media-common';\nimport { isBigger } from '../../utils/dimensionComparer';\nimport { getMediaCardCursor } from '../../utils/getMediaCardCursor';\nimport { completeUfoExperience, startUfoExperience } from '../../utils/ufoExperiences';\nimport { generateUniqueId } from '../../utils/generateUniqueId';\nexport var CardBase = /*#__PURE__*/function (_Component) {\n  _inherits(CardBase, _Component);\n\n  var _super = _createSuper(CardBase);\n\n  // An internalOccurrenceKey is a randomly generated value to differentiate various instances\n  // of Cards regardless of whether it shares the same file (either internal or external)\n  // We initialise timeElapsedTillCommenced\n  // to avoid extra branching on a possibly undefined value.\n  function CardBase(props) {\n    var _this;\n\n    _classCallCheck(this, CardBase);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"internalOccurrenceKey\", generateUniqueId());\n\n    _defineProperty(_assertThisInitialized(_this), \"hasBeenMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"fileStateFlags\", {\n      wasStatusUploading: false,\n      wasStatusProcessing: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"viewportPreAnchorRef\", /*#__PURE__*/createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"viewportPostAnchorRef\", /*#__PURE__*/createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"ssrReliability\", {\n      server: {\n        status: 'unknown'\n      },\n      client: {\n        status: 'unknown'\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"timeElapsedTillCommenced\", performance.now());\n\n    _defineProperty(_assertThisInitialized(_this), \"getImageURLParams\", function (_ref) {\n      var collection = _ref.collectionName;\n      return _objectSpread(_objectSpread({\n        collection: collection,\n        mode: imageResizeModeToFileImageMode(_this.props.resizeMode)\n      }, _this.requestedDimensions), {}, {\n        allowAnimated: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMediaBlobUrlAttrs\", function (identifier, fileState) {\n      var id = identifier.id,\n          collection = identifier.collectionName;\n      var _this$props = _this.props,\n          originalDimensions = _this$props.originalDimensions,\n          contextId = _this$props.contextId,\n          alt = _this$props.alt;\n\n      var _getFileDetails = getFileDetails(identifier, fileState),\n          mimeType = _getFileDetails.mimeType,\n          name = _getFileDetails.name,\n          size = _getFileDetails.size;\n\n      return contextId ? _objectSpread(_objectSpread({\n        id: id,\n        collection: collection,\n        contextId: contextId,\n        mimeType: mimeType,\n        name: name,\n        size: size\n      }, originalDimensions || _this.requestedDimensions), {}, {\n        alt: alt\n      }) : undefined;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCardPreviewParams\", function (identifier, fileState) {\n      var isBannedLocalPreview = _this.state.isBannedLocalPreview;\n      var id = identifier.id;\n      var _this$props2 = _this.props,\n          _this$props2$dimensio = _this$props2.dimensions,\n          dimensions = _this$props2$dimensio === void 0 ? {} : _this$props2$dimensio,\n          mediaClient = _this$props2.mediaClient;\n      return {\n        mediaClient: mediaClient,\n        id: id,\n        dimensions: dimensions,\n        onLocalPreviewError: _this.fireLocalPreviewErrorEvent,\n        filePreview: isBannedLocalPreview ? undefined : getFilePreviewFromFileState(fileState),\n        isRemotePreviewReady: isImageRepresentationReady(fileState),\n        imageUrlParams: _this.getImageURLParams(identifier),\n        mediaBlobUrlAttrs: _this.getMediaBlobUrlAttrs(identifier, fileState)\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCacheSSRPreview\", function (identifier) {\n      var _this$props3 = _this.props,\n          mediaClient = _this$props3.mediaClient,\n          _this$props3$dimensio = _this$props3.dimensions,\n          dimensions = _this$props3$dimensio === void 0 ? {} : _this$props3$dimensio;\n      fetchAndCacheRemotePreview(mediaClient, identifier.id, dimensions, _this.getImageURLParams(identifier), _this.getMediaBlobUrlAttrs(identifier)).catch(function () {// No need to log this error.\n        // If preview fails, it will be refetched later\n        //TODO: test this catch\n        // https://product-fabric.atlassian.net/browse/MEX-1071\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"refetchSSRPreview\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(identifier) {\n        var _this$props4, mediaClient, _this$props4$dimensio, dimensions, cardPreview;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props4 = _this.props, mediaClient = _this$props4.mediaClient, _this$props4$dimensio = _this$props4.dimensions, dimensions = _this$props4$dimensio === void 0 ? {} : _this$props4$dimensio;\n                _context.prev = 1;\n                _context.next = 4;\n                return fetchAndCacheRemotePreview(mediaClient, identifier.id, dimensions, _this.getImageURLParams(identifier), _this.getMediaBlobUrlAttrs(identifier));\n\n              case 4:\n                cardPreview = _context.sent;\n\n                _this.safeSetState({\n                  cardPreview: cardPreview\n                });\n\n                _context.next = 10;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"resolvePreview\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(identifier, fileState) {\n        var params, cardPreview, wrappedError;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                params = _this.getCardPreviewParams(identifier, fileState);\n                _context2.next = 4;\n                return getCardPreview(params);\n\n              case 4:\n                cardPreview = _context2.sent;\n\n                _this.safeSetState({\n                  cardPreview: cardPreview\n                });\n\n                _context2.next = 12;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](0);\n                wrappedError = ensureMediaCardError('preview-fetch', _context2.t0); //  If remote preview fails, we set status 'error'\n                //  If local preview fails (i.e, no remote preview available),\n                //  we can stay in the same status until there is a remote preview available\n                //  If it's any other error we set status 'error'\n\n                if (isLocalPreviewError(wrappedError)) {\n                  _this.safeSetState({\n                    isBannedLocalPreview: true\n                  });\n                } else {\n                  _this.safeSetState({\n                    status: 'error',\n                    error: wrappedError\n                  });\n                }\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 8]]);\n      }));\n\n      return function (_x2, _x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"getPerformanceAttributes\", function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          timeElapsedTillCommenced = _assertThisInitialize.timeElapsedTillCommenced;\n\n      var timeElapsedTillEvent = performance.now();\n      var durationSinceCommenced = timeElapsedTillCommenced && timeElapsedTillEvent - timeElapsedTillCommenced;\n      return {\n        overall: {\n          durationSincePageStart: timeElapsedTillEvent,\n          durationSinceCommenced: durationSinceCommenced\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"logSSRImageError\", function (cardPreview) {\n      if (cardPreview) {\n        var failedSSRObject = _objectSpread({\n          status: 'fail'\n        }, extractErrorInfo(new ImageLoadError(cardPreview.source)));\n\n        if (isSSRClientPreview(cardPreview)) {\n          _this.ssrReliability.client = failedSSRObject;\n        }\n        /*\n          If the cardPreview failed and it comes from server (global scope / ssrData), it means that we have reused it in client and the error counts for both: server & client.\n        */\n\n\n        if (isSSRDataPreview(cardPreview)) {\n          _this.ssrReliability.server = failedSSRObject;\n          _this.ssrReliability.client = failedSSRObject;\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function (cardPreview) {\n      _this.logSSRImageError(cardPreview);\n\n      var currentPreview = _this.state.cardPreview; // If the dataURI has been replaced, we can dismiss this error\n\n      if ((cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dataURI) !== (currentPreview === null || currentPreview === void 0 ? void 0 : currentPreview.dataURI)) {\n        return;\n      }\n\n      var error = new ImageLoadError(cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.source);\n      var isLocal = cardPreview && isLocalPreview(cardPreview);\n      var isSSR = cardPreview && (isSSRClientPreview(cardPreview) || isSSRDataPreview(cardPreview));\n\n      if (isLocal || isSSR) {\n        var updateState = {\n          cardPreview: undefined\n        };\n\n        if (isLocal) {\n          updateState.isBannedLocalPreview = true;\n\n          _this.fireLocalPreviewErrorEvent(error);\n        }\n\n        var _this$props5 = _this.props,\n            identifier = _this$props5.identifier,\n            _this$props5$dimensio = _this$props5.dimensions,\n            dimensions = _this$props5$dimensio === void 0 ? {} : _this$props5$dimensio;\n        isFileIdentifier(identifier) && removeCardPreviewFromCache(identifier.id, dimensions);\n\n        _this.safeSetState(updateState);\n      } else {\n        _this.safeSetState({\n          status: 'error',\n          error: error\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function (cardPreview) {\n      if (cardPreview) {\n        if (isSSRClientPreview(cardPreview) && _this.ssrReliability.client.status === 'unknown') {\n          _this.ssrReliability.client = {\n            status: 'success'\n          };\n        }\n        /*\n          If the image loads successfully and it comes from server (global scope / ssrData), it means that we have reused it in client and the success counts for both: server & client.\n        */\n\n\n        if (isSSRDataPreview(cardPreview) && _this.ssrReliability.server.status === 'unknown') {\n          _this.ssrReliability.server = {\n            status: 'success'\n          };\n          _this.ssrReliability.client = {\n            status: 'success'\n          };\n        }\n      }\n\n      var currentPreview = _this.state.cardPreview; // If the dataURI has been replaced, we can dismiss this callback\n\n      if ((cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.dataURI) !== (currentPreview === null || currentPreview === void 0 ? void 0 : currentPreview.dataURI)) {\n        return;\n      }\n\n      _this.safeSetState({\n        previewDidRender: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireCopiedEvent\", function () {\n      var createAnalyticsEvent = _this.props.createAnalyticsEvent;\n      var cardRef = _this.state.cardRef;\n      cardRef && createAnalyticsEvent && fireCopiedEvent(createAnalyticsEvent, _this.metadata.id, cardRef);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireScreenEvent\", function () {\n      var createAnalyticsEvent = _this.props.createAnalyticsEvent;\n      createAnalyticsEvent && fireScreenEvent(createAnalyticsEvent, _this.fileAttributes);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireLocalPreviewErrorEvent\", function (error) {// TODO: track local preview success rate\n      // https://product-fabric.atlassian.net/browse/MEX-774\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"safeSetState\", function (state) {\n      if (_this.hasBeenMounted) {\n        // If it's setting the status, we need to use a state updater function,\n        // which ensures that no non-final status overrides a final status.\n        // If no status is set, we don't need a sate updater\n        var updater = !!state.status ? createStateUpdater(state) : state;\n\n        _this.setState(updater);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", function () {\n      if (_this.subscription) {\n        _this.subscription.unsubscribe();\n      }\n\n      if (_this.hasBeenMounted) {\n        // TODO MEX-788: add test for \"do not remove the card preview when unsubscribing\".\n        _this.setState({\n          isBannedLocalPreview: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCardViewClick\", function (event, analyticsEvent) {\n      var _this$props6 = _this.props,\n          identifier = _this$props6.identifier,\n          useInlinePlayer = _this$props6.useInlinePlayer,\n          shouldOpenMediaViewer = _this$props6.shouldOpenMediaViewer;\n      var cardPreview = _this.state.cardPreview;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize2.metadata;\n\n      _this.onClick(event, analyticsEvent);\n\n      if (!metadata) {\n        return;\n      }\n\n      var isVideo = metadata && metadata.mediaType === 'video';\n\n      if (useInlinePlayer && isVideo && !!cardPreview) {\n        _this.setState({\n          isPlayingFile: true,\n          shouldAutoplay: true\n        });\n      } else if (shouldOpenMediaViewer) {\n        var mediaViewerSelectedItem;\n\n        if (isFileIdentifier(identifier)) {\n          mediaViewerSelectedItem = {\n            id: identifier.id,\n            mediaItemType: 'file',\n            collectionName: identifier.collectionName,\n            occurrenceKey: identifier.occurrenceKey\n          };\n        } else {\n          mediaViewerSelectedItem = {\n            mediaItemType: 'external-image',\n            dataURI: identifier.dataURI,\n            name: identifier.name\n          };\n        }\n\n        _this.setState({\n          mediaViewerSelectedItem: mediaViewerSelectedItem\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInlinePlayerError\", function () {\n      _this.setState({\n        isPlayingFile: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRef\", function (cardRef) {\n      !!cardRef && _this.setState({\n        cardRef: cardRef\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInlinePlayer\", function () {\n      var _this$props7 = _this.props,\n          identifier = _this$props7.identifier,\n          mediaClient = _this$props7.mediaClient,\n          dimensions = _this$props7.dimensions,\n          selected = _this$props7.selected,\n          testId = _this$props7.testId,\n          originalDimensions = _this$props7.originalDimensions,\n          onFullscreenChange = _this$props7.onFullscreenChange;\n      var _this$state = _this.state,\n          shouldAutoplay = _this$state.shouldAutoplay,\n          cardPreview = _this$state.cardPreview;\n      return /*#__PURE__*/React.createElement(InlinePlayer, {\n        mediaClient: mediaClient,\n        dimensions: dimensions,\n        originalDimensions: originalDimensions,\n        identifier: identifier,\n        autoplay: !!shouldAutoplay,\n        onFullscreenChange: onFullscreenChange,\n        onError: _this.onInlinePlayerError,\n        onClick: _this.onClick,\n        selected: selected,\n        ref: _this.setRef,\n        testId: testId,\n        cardPreview: cardPreview\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMediaViewerClose\", function () {\n      _this.setState({\n        mediaViewerSelectedItem: undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDisplayImage\", function () {\n      var identifier = _this.props.identifier;\n      var payloadPart;\n\n      if (isFileIdentifier(identifier)) {\n        payloadPart = {\n          fileId: identifier.id,\n          isUserCollection: identifier.collectionName === RECENTS_COLLECTION\n        };\n      } else {\n        payloadPart = {\n          fileId: identifier.dataURI,\n          isUserCollection: false\n        };\n      }\n\n      globalMediaEventEmitter.emit('media-viewed', _objectSpread({\n        viewingLevel: 'minimal'\n      }, payloadPart));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMediaViewer\", function () {\n      var mediaViewerSelectedItem = _this.state.mediaViewerSelectedItem;\n      var _this$props8 = _this.props,\n          mediaClient = _this$props8.mediaClient,\n          identifier = _this$props8.identifier,\n          mediaViewerDataSource = _this$props8.mediaViewerDataSource,\n          contextId = _this$props8.contextId,\n          featureFlags = _this$props8.featureFlags;\n\n      if (!mediaViewerSelectedItem) {\n        return;\n      }\n\n      var collectionName = isFileIdentifier(identifier) ? identifier.collectionName || '' : '';\n      var dataSource = mediaViewerDataSource || {\n        list: []\n      };\n      return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(MediaViewer, {\n        collectionName: collectionName,\n        dataSource: dataSource,\n        mediaClientConfig: mediaClient.config,\n        selectedItem: mediaViewerSelectedItem,\n        onClose: _this.onMediaViewerClose,\n        contextId: contextId,\n        featureFlags: featureFlags\n      }), document.body);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCard\", function () {\n      var _this$props9 = _this.props,\n          identifier = _this$props9.identifier,\n          isLazy = _this$props9.isLazy,\n          appearance = _this$props9.appearance,\n          resizeMode = _this$props9.resizeMode,\n          dimensions = _this$props9.dimensions,\n          selectable = _this$props9.selectable,\n          selected = _this$props9.selected,\n          disableOverlay = _this$props9.disableOverlay,\n          alt = _this$props9.alt,\n          testId = _this$props9.testId,\n          featureFlags = _this$props9.featureFlags,\n          titleBoxBgColor = _this$props9.titleBoxBgColor,\n          titleBoxIcon = _this$props9.titleBoxIcon,\n          ssr = _this$props9.ssr,\n          useInlinePlayer = _this$props9.useInlinePlayer,\n          shouldOpenMediaViewer = _this$props9.shouldOpenMediaViewer;\n      var mediaItemType = identifier.mediaItemType;\n      var _this$state2 = _this.state,\n          status = _this$state2.status,\n          progress = _this$state2.progress,\n          cardPreview = _this$state2.cardPreview,\n          error = _this$state2.error,\n          cardRef = _this$state2.cardRef,\n          isCardVisible = _this$state2.isCardVisible;\n\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize3.metadata;\n\n      var _assertThisInitialize4 = _assertThisInitialized(_this),\n          onCardViewClick = _assertThisInitialize4.onCardViewClick,\n          onDisplayImage = _assertThisInitialize4.onDisplayImage,\n          actions = _assertThisInitialize4.actions,\n          onMouseEnter = _assertThisInitialize4.onMouseEnter; // Card can be artificially turned visible before entering the viewport\n      // For example, when we have the image in cache\n\n\n      var nativeLazyLoad = isLazy && !isCardVisible; // Force Media Image to always display img for SSR\n\n      var forceSyncDisplay = !!ssr;\n      var mediaCardCursor = getMediaCardCursor(!!useInlinePlayer, !!shouldOpenMediaViewer, status === 'error' || status === 'failed-processing', !!_this.state.cardPreview, metadata.mediaType);\n      var card = /*#__PURE__*/React.createElement(CardView, {\n        status: status,\n        error: error,\n        mediaItemType: mediaItemType,\n        metadata: metadata,\n        cardPreview: cardPreview,\n        alt: alt,\n        appearance: appearance,\n        resizeMode: resizeMode,\n        dimensions: dimensions,\n        actions: actions,\n        selectable: selectable,\n        selected: selected,\n        onClick: onCardViewClick,\n        onMouseEnter: onMouseEnter,\n        disableOverlay: disableOverlay,\n        progress: progress,\n        onDisplayImage: onDisplayImage,\n        innerRef: _this.setRef,\n        testId: testId,\n        featureFlags: featureFlags,\n        titleBoxBgColor: titleBoxBgColor,\n        titleBoxIcon: titleBoxIcon,\n        onImageError: _this.onImageError,\n        onImageLoad: _this.onImageLoad,\n        nativeLazyLoad: nativeLazyLoad,\n        forceSyncDisplay: forceSyncDisplay,\n        mediaCardCursor: mediaCardCursor\n      });\n      return isLazy ? /*#__PURE__*/React.createElement(ViewportDetector, {\n        cardEl: cardRef,\n        preAnchorRef: _this.viewportPreAnchorRef,\n        postAnchorRef: _this.viewportPostAnchorRef,\n        onVisible: _this.onCardInViewport\n      }, /*#__PURE__*/React.createElement(ViewportAnchor, {\n        ref: _this.viewportPreAnchorRef,\n        offsetTop: -ABS_VIEWPORT_ANCHOR_OFFSET_TOP\n      }), card, /*#__PURE__*/React.createElement(ViewportAnchor, {\n        ref: _this.viewportPostAnchorRef,\n        offsetTop: ABS_VIEWPORT_ANCHOR_OFFSET_TOP\n      })) : card;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"storeSSRData\", function () {\n      var _this$ssrReliability$;\n\n      var _this$props10 = _this.props,\n          ssr = _this$props10.ssr,\n          identifier = _this$props10.identifier;\n      var _this$state$cardPrevi = _this.state.cardPreview;\n      _this$state$cardPrevi = _this$state$cardPrevi === void 0 ? {} : _this$state$cardPrevi;\n      var dataURI = _this$state$cardPrevi.dataURI;\n      return isFileIdentifier(identifier) && ssr === 'server' && /*#__PURE__*/React.createElement(StoreSSRDataScript, {\n        identifier: identifier,\n        dataURI: dataURI,\n        dimensions: _this.requestedDimensions,\n        error: ((_this$ssrReliability$ = _this.ssrReliability.server) === null || _this$ssrReliability$ === void 0 ? void 0 : _this$ssrReliability$.status) === 'fail' ? _this.ssrReliability.server : undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCardInViewport\", function () {\n      _this.setState({\n        isCardVisible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event, analyticsEvent) {\n      var onClick = _this.props.onClick;\n\n      var _assertThisInitialize5 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize5.metadata;\n\n      if (onClick) {\n        var cardEvent = {\n          event: event,\n          mediaItemDetails: metadata\n        };\n        onClick(cardEvent, analyticsEvent);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseEnter\", function (event) {\n      var onMouseEnter = _this.props.onMouseEnter;\n\n      var _assertThisInitialize6 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize6.metadata;\n\n      if (onMouseEnter) {\n        var cardEvent = {\n          event: event,\n          mediaItemDetails: metadata\n        };\n        onMouseEnter(cardEvent);\n      }\n    });\n\n    var _status = 'loading';\n\n    var _cardPreview;\n\n    var _error;\n\n    var _this$props11 = _this.props,\n        _identifier = _this$props11.identifier,\n        _this$props11$dimensi = _this$props11.dimensions,\n        _dimensions = _this$props11$dimensi === void 0 ? {} : _this$props11$dimensi,\n        _ssr = _this$props11.ssr,\n        _mediaClient = _this$props11.mediaClient;\n\n    if (isFileIdentifier(_identifier)) {\n      var id = _identifier.id;\n      _cardPreview = getCardPreviewFromCache(id, _dimensions);\n\n      if (!_cardPreview && _ssr) {\n        var _this$ssrData, _this$ssrData2;\n\n        _this.ssrData = getSSRData(_identifier);\n\n        if ((_this$ssrData = _this.ssrData) !== null && _this$ssrData !== void 0 && _this$ssrData.error) {\n          _this.ssrReliability.server = _objectSpread({\n            status: 'fail'\n          }, _this.ssrData.error);\n        }\n\n        if (!((_this$ssrData2 = _this.ssrData) !== null && _this$ssrData2 !== void 0 && _this$ssrData2.dataURI)) {\n          try {\n            _cardPreview = getSSRCardPreview(_ssr, _mediaClient, _identifier.id, _this.getImageURLParams(_identifier), _this.getMediaBlobUrlAttrs(_identifier));\n          } catch (e) {\n            _this.ssrReliability[_ssr] = _objectSpread({\n              status: 'fail'\n            }, extractErrorInfo(e));\n          }\n        } else {\n          _cardPreview = {\n            dataURI: _this.ssrData.dataURI,\n            source: 'ssr-data'\n          };\n        }\n      }\n    } else if (isExternalImageIdentifier(_identifier)) {\n      _this.fireCommencedEvent();\n\n      _status = 'loading-preview';\n      var dataURI = _identifier.dataURI;\n      _cardPreview = {\n        dataURI: dataURI,\n        orientation: 1,\n        source: 'external'\n      };\n    } // If cardPreview is available from local cache or external, `isCardVisible`\n    // should be true to avoid flickers during re-mount of the component\n    // should not be visible for SSR preview, otherwise we'll fire the metadata fetch from\n    // outside the viewport\n\n\n    var _isCardVisible = !_this.props.isLazy || !!_cardPreview && !isSSRPreview(_cardPreview);\n\n    _this.state = {\n      status: _status,\n      isCardVisible: _isCardVisible,\n      isPlayingFile: false,\n      shouldAutoplay: false,\n      cardPreview: _cardPreview,\n      cardRef: null,\n      isBannedLocalPreview: false,\n      previewDidRender: false,\n      error: _error\n    };\n    return _this;\n  }\n\n  _createClass(CardBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.hasBeenMounted = true;\n      var _this$state3 = this.state,\n          isCardVisible = _this$state3.isCardVisible,\n          cardPreview = _this$state3.cardPreview;\n      var _this$props12 = this.props,\n          identifier = _this$props12.identifier,\n          ssr = _this$props12.ssr,\n          dimensions = _this$props12.dimensions;\n\n      if (isCardVisible && isFileIdentifier(identifier)) {\n        this.updateStateForIdentifier(identifier);\n      }\n\n      if (isCardVisible && !!ssr && !!cardPreview && isFileIdentifier(identifier)) {\n        var _this$ssrData3;\n\n        if (isSSRClientPreview(cardPreview)) {\n          // Since the SSR preview brings the token in the query params,\n          // We need to fetch the remote preview to be able to cache it,\n          this.setCacheSSRPreview(identifier);\n        }\n\n        if (isSSRDataPreview(cardPreview) && isBigger((_this$ssrData3 = this.ssrData) === null || _this$ssrData3 === void 0 ? void 0 : _this$ssrData3.dimensions, dimensions)) {\n          // If dimensions from Server have changed and are bigger,\n          // we need to refetch\n          this.refetchSSRPreview(identifier);\n        }\n      } // we add a listener for each of the cards on the page\n      // and then check if the triggered listener is from the card\n      // that contains a div in current window.getSelection()\n      // won't work in IE11\n\n\n      getDocument().addEventListener('copy', this.fireCopiedEvent);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var prevMediaClient = prevProps.mediaClient,\n          prevIdentifier = prevProps.identifier,\n          prevDimensions = prevProps.dimensions;\n      var prevIsCardVisible = prevState.isCardVisible;\n      var _this$props13 = this.props,\n          mediaClient = _this$props13.mediaClient,\n          identifier = _this$props13.identifier,\n          dimensions = _this$props13.dimensions,\n          featureFlags = _this$props13.featureFlags,\n          useInlinePlayer = _this$props13.useInlinePlayer,\n          disableOverlay = _this$props13.disableOverlay;\n      var _this$state4 = this.state,\n          isCardVisible = _this$state4.isCardVisible,\n          cardPreview = _this$state4.cardPreview,\n          status = _this$state4.status,\n          fileState = _this$state4.fileState,\n          isBannedLocalPreview = _this$state4.isBannedLocalPreview,\n          previewDidRender = _this$state4.previewDidRender,\n          isPlayingFile = _this$state4.isPlayingFile;\n      var isDifferent = isDifferentIdentifier(prevIdentifier, identifier);\n      var turnedVisible = !prevIsCardVisible && isCardVisible;\n      var isNewMediaClient = prevMediaClient !== mediaClient;\n      this.updateFileStateFlag(fileState);\n\n      if (isExternalImageIdentifier(identifier) && isDifferent) {\n        this.fireCommencedEvent();\n        var dataURI = identifier.dataURI;\n        this.setState({\n          status: 'loading-preview',\n          cardPreview: {\n            dataURI: dataURI,\n            orientation: 1,\n            source: 'external'\n          },\n          isCardVisible: true\n        });\n      }\n\n      if (isFileIdentifier(identifier) && (turnedVisible || !!this.subscription && (isNewMediaClient || isDifferent))) {\n        this.updateStateForIdentifier(identifier);\n      }\n\n      if (this.state.status !== prevState.status) {\n        this.fireOperationalEvent();\n\n        if (this.state.status === 'complete' || this.fileAttributes.fileMediatype === 'video' && !!cardPreview && this.state.status === 'processing') {\n          this.fireScreenEvent();\n        }\n      }\n\n      if (isFileIdentifier(identifier) && fileState && shouldResolvePreview({\n        status: status,\n        fileState: fileState,\n        dimensions: dimensions,\n        prevDimensions: prevDimensions,\n        featureFlags: featureFlags,\n        hasCardPreview: !!cardPreview,\n        isBannedLocalPreview: isBannedLocalPreview\n      })) {\n        this.resolvePreview(identifier, fileState);\n      }\n\n      if (turnedVisible && this.props.ssr && !!cardPreview && isSSRClientPreview(cardPreview) && isFileIdentifier(identifier)) {\n        // Since the SSR preview brings the token in the query params,\n        // We need to fetch the remote preview to be able to cache it,\n        this.setCacheSSRPreview(identifier);\n      }\n\n      if (previewDidRender && // We should't complete if status is uploading\n      ['loading-preview', 'processing'].includes(status)) {\n        this.safeSetState({\n          status: 'complete'\n        });\n        this.unsubscribe();\n      }\n\n      var isVideo = this.fileAttributes.fileMediatype === 'video';\n      var videoAvailableToPlay = fileState && isProcessedFileState(fileState);\n\n      if (isVideo && !isPlayingFile && disableOverlay && useInlinePlayer && videoAvailableToPlay && getMediaFeatureFlag('timestampOnVideo', this.props.featureFlags)) {\n        this.setState({\n          isPlayingFile: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.hasBeenMounted = false;\n      this.unsubscribe();\n      getDocument().removeEventListener('copy', this.fireCopiedEvent);\n    }\n  }, {\n    key: \"updateStateForIdentifier\",\n    value: function updateStateForIdentifier(identifier) {\n      this.fireCommencedEvent();\n      this.subscribeInternalFile(identifier);\n    }\n  }, {\n    key: \"updateFileStateFlag\",\n    value: function updateFileStateFlag(fileState) {\n      if (!fileState) {\n        return;\n      }\n\n      var status = fileState.status;\n\n      if (status === 'processing') {\n        this.fileStateFlags.wasStatusProcessing = true;\n      } else if (status === 'uploading') {\n        this.fileStateFlags.wasStatusUploading = true;\n      }\n    }\n  }, {\n    key: \"subscribeInternalFile\",\n    value: function subscribeInternalFile(identifier) {\n      var _this2 = this;\n\n      var mediaClient = this.props.mediaClient;\n      var isBannedLocalPreview = this.state.isBannedLocalPreview;\n      var id = identifier.id,\n          collectionName = identifier.collectionName,\n          occurrenceKey = identifier.occurrenceKey;\n      this.unsubscribe();\n      this.subscription = mediaClient.file.getFileState(id, {\n        collectionName: collectionName,\n        occurrenceKey: occurrenceKey\n      }).subscribe({\n        next: function next(fileState) {\n          var featureFlags = _this2.props.featureFlags;\n          var newState = getCardStateFromFileState(fileState, isBannedLocalPreview, featureFlags);\n\n          _this2.safeSetState(newState);\n        },\n        error: function error(e) {\n          var errorReason = _this2.state.status === 'uploading' ? 'upload' : 'metadata-fetch';\n          var error = new MediaCardError(errorReason, e);\n\n          _this2.safeSetState({\n            error: error,\n            status: 'error'\n          });\n        }\n      });\n    }\n  }, {\n    key: \"requestedDimensions\",\n    get: function get() {\n      var dimensions = this.props.dimensions;\n\n      var _ref4 = this.state || {},\n          element = _ref4.cardRef;\n\n      return getRequestedDimensions({\n        dimensions: dimensions,\n        element: element\n      });\n    }\n  }, {\n    key: \"metadata\",\n    get: function get() {\n      var _this$state5;\n\n      return getFileDetails(this.props.identifier, (_this$state5 = this.state) === null || _this$state5 === void 0 ? void 0 : _this$state5.fileState);\n    }\n  }, {\n    key: \"fileAttributes\",\n    get: function get() {\n      var _this$state6, _this$state6$fileStat;\n\n      return getFileAttributes(this.metadata, (_this$state6 = this.state) === null || _this$state6 === void 0 ? void 0 : (_this$state6$fileStat = _this$state6.fileState) === null || _this$state6$fileStat === void 0 ? void 0 : _this$state6$fileStat.status);\n    }\n  }, {\n    key: \"fireOperationalEvent\",\n    value: function fireOperationalEvent() {\n      var _this$state7 = this.state,\n          status = _this$state7.status,\n          error = _this$state7.error;\n      var createAnalyticsEvent = this.props.createAnalyticsEvent;\n      createAnalyticsEvent && _fireOperationalEvent(createAnalyticsEvent, status, this.fileAttributes, this.getPerformanceAttributes(), this.ssrReliability, error);\n      completeUfoExperience(this.internalOccurrenceKey, status, this.fileAttributes, this.fileStateFlags, this.ssrReliability, error);\n    }\n  }, {\n    key: \"fireCommencedEvent\",\n    value: function fireCommencedEvent() {\n      this.timeElapsedTillCommenced = performance.now();\n      var createAnalyticsEvent = this.props.createAnalyticsEvent;\n      createAnalyticsEvent && _fireCommencedEvent(createAnalyticsEvent, this.fileAttributes, {\n        overall: {\n          durationSincePageStart: this.timeElapsedTillCommenced\n        }\n      });\n      startUfoExperience(this.internalOccurrenceKey);\n    }\n  }, {\n    key: \"actions\",\n    get: function get() {\n      var _this3 = this;\n\n      var _this$props14 = this.props,\n          _this$props14$actions = _this$props14.actions,\n          actions = _this$props14$actions === void 0 ? [] : _this$props14$actions,\n          identifier = _this$props14.identifier,\n          shouldEnableDownloadButton = _this$props14.shouldEnableDownloadButton;\n      var status = this.state.status;\n      var metadata = this.metadata;\n\n      if (isFileIdentifier(identifier) && (status === 'failed-processing' || shouldEnableDownloadButton)) {\n        var downloadAction = {\n          label: 'Download',\n          icon: /*#__PURE__*/React.createElement(DownloadIcon, {\n            label: \"Download\"\n          }),\n          handler: function handler() {\n            return _this3.props.mediaClient.file.downloadBinary(identifier.id, metadata.name, identifier.collectionName);\n          }\n        };\n        return [downloadAction].concat(_toConsumableArray(actions));\n      } else {\n        return actions;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state8 = this.state,\n          isPlayingFile = _this$state8.isPlayingFile,\n          mediaViewerSelectedItem = _this$state8.mediaViewerSelectedItem;\n      var innerContent = /*#__PURE__*/React.createElement(React.Fragment, null, isPlayingFile ? this.renderInlinePlayer() : this.renderCard(), mediaViewerSelectedItem ? this.renderMediaViewer() : null, this.storeSSRData());\n      return this.props.intl ? innerContent : /*#__PURE__*/React.createElement(IntlProvider, {\n        locale: \"en\"\n      }, innerContent);\n    }\n  }]);\n\n  return CardBase;\n}(Component);\n\n_defineProperty(CardBase, \"defaultProps\", {\n  appearance: 'auto',\n  resizeMode: 'crop',\n  isLazy: true,\n  disableOverlay: false,\n  // Media Feature Flag defaults are defined in @atlaskit/media-common\n  featureFlags: {}\n});\n\nexport var Card = withMediaAnalyticsContext({\n  packageVersion: packageVersion,\n  packageName: packageName,\n  componentName: 'mediaCard',\n  component: 'mediaCard'\n}, {\n  filterFeatureFlags: LOGGED_FEATURE_FLAGS\n})(withAnalyticsEvents()(injectIntl(CardBase, {\n  enforceContext: false\n})));","export var generateUniqueId = function generateUniqueId() {\n  return (performance.now().toString(36) + Math.random().toString(36)).replace(/\\./g, '');\n};","export var isFinalCardStatus = function isFinalCardStatus(status) {\n  return ['complete', 'error', 'failed-processing'].includes(status);\n};\nexport var getCardStatus = function getCardStatus(fileStatus, _ref) {\n  var hasFilesize = _ref.hasFilesize,\n      isPreviewable = _ref.isPreviewable,\n      hasPreview = _ref.hasPreview;\n\n  switch (fileStatus) {\n    case 'uploading':\n    case 'failed-processing':\n    case 'error':\n      return fileStatus;\n\n    case 'processing':\n      // Legacy empty files logic\n      // isPreviewable will most likely be false for empty files,\n      // therefore we need to do this cut before that check.\n      // TODO: https://product-fabric.atlassian.net/browse/BMPT-1247\n      if (!hasFilesize) {\n        return 'processing';\n      } // If we show no preview for this file\n      // we won't show the \"creating preview\" message, i.e. Card is \"complete\".\n\n\n      if (!isPreviewable) {\n        return 'complete';\n      }\n\n      return 'processing';\n\n    case 'processed':\n      if (!isPreviewable || !hasPreview) {\n        return 'complete';\n      }\n\n      return 'loading-preview';\n\n    default:\n      return 'loading';\n  }\n};","import { getMediaCardSSR, getKey } from './globalScope';\nexport var getSSRData = function getSSRData(identifier) {\n  var mediaCardSsr = getMediaCardSSR();\n\n  if (!mediaCardSsr) {\n    return;\n  }\n\n  return mediaCardSsr[getKey(identifier)];\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Video16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm11.37 10.954c.285.138.63-.05.63-.343V5.39c0-.293-.345-.481-.63-.343L11 6.194v3.613l2.37 1.147zM2 5.99v4.018c0 .54.449.991 1.003.991h4.994A.99.99 0 009 10.01V5.99C9 5.452 8.551 5 7.997 5H3.003A.99.99 0 002 5.99z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nVideo16Icon.displayName = 'Video16Icon';\nvar _default = Video16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Archive16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm4 3v2h2V3H6zm2 2v2h2V5H8zM6 7v2h2V7H6zm2 2v2h2V9H8zm-2.307 2v2h2v-2h-2z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nArchive16Icon.displayName = 'Archive16Icon';\nvar _default = Archive16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Image16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#FFAB00\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm4.75 11.75l-.543-.543a1 1 0 00-1.414 0L3 13h10v-2.25l-1.795-1.974a1 1 0 00-1.447-.034L6.75 11.75zM4.667 6.333a1.667 1.667 0 100-3.333 1.667 1.667 0 000 3.333z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nImage16Icon.displayName = 'Image16Icon';\nvar _default = Image16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Audio16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#FF5630\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm11 4.195v-.753c0-.271-.23-.468-.514-.44l-6.115.634a.565.565 0 00-.514.545v4.616a2 2 0 00-.571-.083H5a2 2 0 00-2 2V11a2 2 0 002 2h.286a2 2 0 002-2V5.76l4.285-.444v2.767A2 2 0 0011 8h-.286a2 2 0 00-2 2v.286a2 2 0 002 2H11a2 2 0 002-2V4.195z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nAudio16Icon.displayName = 'Audio16Icon';\nvar _default = Audio16Icon;\nexports.default = _default;","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport styled from 'styled-components';\nimport { fontFamily } from '@atlaskit/theme/constants';\nimport { fadeIn } from '@atlaskit/media-ui';\nexport { defaultTransitionDuration } from './config';\nexport { antialiased, borderRadiusLeft, capitalize, centerSelf, centerSelfX, centerSelfY, centerX, hexToRgb, rgba, spaceAround, transition, withAppearance } from './mixins';\nexport { easeOutCubic, easeOutExpo } from './easing';\nexport { spin } from './animations';\nexport var Root = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  box-sizing: border-box;\\n  font-family: \", \";\\n\\n  * {\\n    box-sizing: border-box;\\n  }\\n\"])), fontFamily());\nexport var cardShadow = \"\\n  box-shadow: 0 1px 1px rgba(9, 30, 66, 0.2), 0 0 1px 0 rgba(9, 30, 66, 0.24);\\n\";\nexport var FadeinImage = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \";\\n\"])), fadeIn);\nexport default Root;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Document16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#2684FF\" fill-rule=\"evenodd\" d=\"M2 0h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2V2a2 2 0 012-2zm2 3a1 1 0 100 2h8a1 1 0 000-2H4zm0 4a1 1 0 100 2h8a1 1 0 000-2H4zm0 4a1 1 0 000 2h4a1 1 0 000-2H4z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nDocument16Icon.displayName = 'Document16Icon';\nvar _default = Document16Icon;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst Generic16Icon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" role=\"presentation\"><path fill=\"#5E6C84\" fill-rule=\"evenodd\" d=\"M8 3H5.333C4.597 3 4 3.617 4 4.378v7.244C4 12.382 4.597 13 5.333 13h5.334c.736 0 1.333-.617 1.333-1.378V8h-1.333v3.622H5.333V4.378H8v1.414c0 .736.597 1.333 1.333 1.333h2.334c.184 0 .333-.15.333-.333v-.903a.333.333 0 00-.093-.231l-2.164-2.25A1.333 1.333 0 008.782 3H8zM0 1.994C0 .893.895 0 1.994 0h12.012C15.107 0 16 .895 16 1.994v12.012A1.995 1.995 0 0114.006 16H1.994A1.995 1.995 0 010 14.006V1.994z\"/></svg>`\n}, props, {\n  size: \"small\"\n}));\n\nGeneric16Icon.displayName = 'Generic16Icon';\nvar _default = Generic16Icon;\nexports.default = _default;"],"sourceRoot":""}